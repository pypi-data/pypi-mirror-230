{"version":3,"file":"132.3c74277b7584606eb909.js?v=3c74277b7584606eb909","mappings":"mOAmBO,SAASA,EACdC,EACAC,GAEA,IAAKD,EAAIE,OACP,OAAOF,EAET,MAAMG,EAAiB,EAAAC,OAAA,KAAYJ,EAAIE,OAAOA,QACxCG,GAAO,IAAAC,YAAWH,GAClBI,EAAa,EAAAH,OAAA,wBAA+BC,EAAM,QAExD,OADaG,KAAKC,MAAMF,EAE1B,CAEO,SAASG,EACdV,EACAW,GAEA,MAAMJ,EAAaC,KAAKI,UAAUZ,GAC5BK,EAAO,EAAAD,OAAA,KAAYG,EAAY,SAErC,MAAO,CACLL,QAFqB,IAAAW,UAASR,GAEPH,OAE3B,CAEO,MAAMY,EAA0B,CACrCC,YAAahB,EACbiB,UAAWN,GAGNO,eAAeC,UACd,IAAAC,QACN,MAASC,QAAQC,KAAK,GAAG,mBAC3B,C","sources":["webpack://@jupyrdf/jupyter-forcegraph/./js/widgets/serializers/dataframe.ts"],"sourcesContent":["/*\n * Copyright (c) 2023 ipyforcegraph contributors.\n * Distributed under the terms of the Modified BSD License.\n */\nimport { compress, decompress, init } from '@bokuweb/zstd-wasm';\nimport { Buffer } from 'buffer';\n\nimport { IWidgetManager, WidgetModel } from '@jupyter-widgets/base';\n\nimport { DEBUG, EMOJI } from '../../tokens';\n\nexport interface IReceivedSerializedDataFrame {\n  buffer: DataView;\n}\n\nexport interface ISendSerializedDataFrame {\n  buffer: DataView;\n}\n\nexport function jsonToDataFrame(\n  obj: IReceivedSerializedDataFrame | null,\n  manager?: IWidgetManager\n): any {\n  if (!obj.buffer) {\n    return obj;\n  }\n  const compressedData = Buffer.from(obj.buffer.buffer);\n  const data = decompress(compressedData);\n  const jsonString = Buffer.prototype.toString.call(data, 'utf8');\n  const json = JSON.parse(jsonString);\n  return json;\n}\n\nexport function dataFrameToJson(\n  obj: any,\n  widget?: WidgetModel\n): ISendSerializedDataFrame | null {\n  const jsonString = JSON.stringify(obj);\n  const data = Buffer.from(jsonString, 'utf-8');\n  const compressedData = compress(data);\n  return {\n    buffer: compressedData.buffer as any,\n  };\n}\n\nexport const dataframe_serialization = {\n  deserialize: jsonToDataFrame,\n  serialize: dataFrameToJson,\n};\n\nexport async function initializeZstd() {\n  await init();\n  DEBUG && console.warn(`${EMOJI} zstd loaded`);\n}\n"],"names":["jsonToDataFrame","obj","manager","buffer","compressedData","Buffer","data","decompress","jsonString","JSON","parse","dataFrameToJson","widget","stringify","compress","dataframe_serialization","deserialize","serialize","async","initializeZstd","init","console","warn"],"sourceRoot":""}