"use strict";(self.webpackChunkjupyterlab_jupytext=self.webpackChunkjupyterlab_jupytext||[]).push([[568],{568:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0});const a=o(303),n=o(299),r=o(460),i=o(127),l=o(759),d=o(720),u=o(546),c=o(9),s=["ipynb","md","Rmd","qmd"];let m=!0;function p(t){var e,o;if(!t.currentWidget)return[];let a=function(t){var e;if(!t.currentWidget)return[];const o=t.currentWidget.context.model,a=m?o.getMetadata("jupytext"):null===(e=o.metadata)||void 0===e?void 0:e.get("jupytext");return a?(a&&a.formats?a.formats.split(","):[]).filter((function(t){return""!==t})):[]}(t);const n=t.currentWidget.context.model,r=m?n.getMetadata("language_info"):null===(e=n.metadata)||void 0===e?void 0:e.get("language_info");if(r&&r.file_extension){const t=r.file_extension.substring(1);a=a.map((function(e){return e===t?"auto:light":e.replace(t+":","auto:")}))}let i=t.currentWidget.context.path.split(".").pop();if(!i)return a;i=-1==s.indexOf(i)?"auto":i;for(const t in a)if(a[t].split(":")[0]==i)return a;if(-1!=s.indexOf(i))a.push(i);else{let e="light";const n=t.currentWidget.context.model,r=m?n.getMetadata("jupytext"):null===(o=n.metadata)||void 0===o?void 0:o.get("jupytext");r&&r.text_representation&&r.text_representation.format_name&&(e=r.text_representation.format_name),a.push("auto:"+e)}return a}const y={id:"jupyterlab-jupytext",autoStart:!0,optional:[d.ITranslator,a.ICommandPalette,c.IRisePreviewFactory],requires:[i.NotebookPanel.IContentFactory,r.IEditorServices,l.IRenderMimeRegistry,a.ISessionContextDialogs,i.INotebookWidgetFactory,i.INotebookTracker,n.ISettingRegistry,a.IToolbarWidgetRegistry],activate:(t,e,o,n,r,l,c,y,f,g,b,_)=>{var x,k,h;if("JupyterLab"==t.name){const e=t.version.match(/[0-9]+/);e&&(m=parseInt(e[0],10)>=4)}console.log("JupyterLab extension jupytext is activating..."),console.debug(`bundled jupytext labextension: JLAB4=${m}`);const v=(null!=g?g:d.nullTranslator).load("jupytext"),j=function(t){return[{format:"ipynb",label:t.__("Pair Notebook with ipynb document")},{format:"auto:light",label:t.__("Pair Notebook with light Script")},{format:"auto:percent",label:t.__("Pair Notebook with percent Script")},{format:"auto:hydrogen",label:t.__("Pair Notebook with Hydrogen Script")},{format:"auto:nomarker",label:t.__("Pair Notebook with nomarker Script")},{format:"md",label:t.__("Pair Notebook with Markdown")},{format:"md:myst",label:t.__("Pair Notebook with MyST Markdown")},{format:"Rmd",label:t.__("Pair Notebook with R Markdown")},{format:"qmd",label:t.__("Pair Notebook with Quarto (qmd)")},{format:"custom",label:t.__("Custom pairing")},{format:"none",label:t.__("Unpair Notebook")}]}(v);let w;if(j.forEach(((e,o)=>{const n=e.format,r="jupytext:"+n;t.commands.addCommand(r,{label:e.label,isToggled:()=>{if(!c.currentWidget)return!1;const t=p(c);if("custom"==n){for(const e in t){const o=t[e];if(-1==["ipynb","auto:light","auto:percent","auto:hydrogen","auto:nomarker","md","Rmd","qmd","md:myst"].indexOf(o))return!0}return!1}return-1!=t.indexOf(n)},isEnabled:()=>{if(!c.currentWidget)return!1;const t=c.currentWidget.context.path.split(".").pop();return n!==t&&("none"!==n||p(c).length>1)},execute:()=>{var t,e;if(null===c.currentWidget)return;const o=c.currentWidget.context.model;let i=m?o.getMetadata("jupytext"):null===(t=o.metadata)||void 0===t?void 0:t.get("jupytext"),l=p(c);if(console.log("Jupytext: executing command="+r),"custom"==n)return void a.showErrorMessage(v.__("Error"),v.__("Please edit the notebook metadata directly if you wish a custom configuration."));let d=c.currentWidget.context.path.split(".").pop();d=-1==s.indexOf(d)?"auto":d;const u=l.indexOf(n);if("none"===n)for(const t in l){const e=l[t];if(e.split(":")[0]===d){l=[e];break}}else if(-1!=u){l.splice(u,1);let t=!1;for(const e in l)if(l[e].split(":")[0]===d){t=!0;break}if(!t)return}else{const t=[];for(const e in l){const o=l[e];o.split(":")[0]!==n.split(":")[0]&&t.push(o)}l=t,l.push(n)}if(1===l.length)if("auto"!==d)l=[];else if(null==i?void 0:i.text_representation){const t=l[0].split(":")[1];i.text_representation.format_name=t,l=[]}if(0===l.length){if(!i)return;return i.formats&&delete i.formats,void(0==Object.keys(i).length?m?o.deleteMetadata("jupytext"):o.metadata.delete("jupytext"):m&&o.setMetadata("jupytext",i))}i?i.formats=l.join():(i={formats:l.join()},m||null===(e=o.metadata)||void 0===e||e.set("jupytext",i)),m&&o.setMetadata("jupytext",i)}}),console.log("Jupytext: adding command="+r+" with rank="+(o+1)),null==b||b.addItem({command:r,rank:o+2,category:"Jupytext"})})),null==b||b.addItem({args:{text:v.__("Jupytext Reference"),url:"https://jupytext.readthedocs.io/en/latest/"},command:"help:open",category:"Jupytext",rank:0}),null==b||b.addItem({args:{text:v.__("Jupytext FAQ"),url:"https://jupytext.readthedocs.io/en/latest/faq.html"},command:"help:open",category:"Jupytext",rank:1}),t.commands.addCommand("jupytext_metadata",{label:v.__("Include Metadata"),isToggled:()=>{var t;if(!c.currentWidget)return!1;const e=c.currentWidget.context.model,o=m?e.getMetadata("jupytext"):null===(t=e.metadata)||void 0===t?void 0:t.get("jupytext");return!!o&&"-all"!==o.notebook_metadata_filter},isEnabled:()=>{var t;if(!c.currentWidget)return!1;const e=c.currentWidget.context.model,o=m?e.getMetadata("jupytext"):null===(t=e.metadata)||void 0===t?void 0:t.get("jupytext");if(!o)return!1;const a=o;return void 0===a.notebook_metadata_filter||"-all"===a.notebook_metadata_filter},execute:()=>{var t,e;if(console.log("Jupytext: toggling YAML header"),!c.currentWidget)return;const o=c.currentWidget.context.model,a=m?o.getMetadata("jupytext"):null===(t=o.metadata)||void 0===t?void 0:t.get("jupytext");if(!a)return;const n=null!==(e=a)&&void 0!==e?e:{};n.notebook_metadata_filter?(delete n.notebook_metadata_filter,"-all"===n.cell_metadata_filter&&delete n.cell_metadata_filter):(n.notebook_metadata_filter="-all",void 0===n.cell_metadata_filter&&(n.cell_metadata_filter="-all")),m&&o.setMetadata("jupytext",n)}}),null==b||b.addItem({command:"jupytext_metadata",rank:j.length+3,category:"Jupytext"}),t.docRegistry.addFileType({name:"myst",displayName:v.__("MyST Markdown Notebook"),extensions:[".myst",".mystnb",".mnb"],icon:u.markdownIcon},["Notebook"]),t.docRegistry.addFileType({name:"r-markdown",displayName:v.__("R Markdown Notebook"),extensions:[".rmd"],icon:u.markdownIcon},["Notebook"]),t.docRegistry.addFileType({name:"quarto",displayName:v.__("Quarto Notebook"),extensions:[".qmd"],icon:u.markdownIcon},["Notebook"]),m){const t="Notebook",e="@jupyterlab/notebook-extension:panel";w=a.createToolbarFactory(f,y,t,e,g)}else w=l.toolbarFactory;const N=new i.NotebookWidgetFactory({name:"Jupytext Notebook",label:v.__("Jupytext Notebook"),fileTypes:["markdown","myst","r-markdown","quarto","julia","python","r"],modelName:null!==(x=l.modelName)&&void 0!==x?x:"notebook",preferKernel:null===(k=l.preferKernel)||void 0===k||k,canStartKernel:null===(h=l.canStartKernel)||void 0===h||h,rendermime:n,contentFactory:e,editorConfig:l.editorConfig,notebookConfig:l.notebookConfig,mimeTypeService:o.mimeTypeService,sessionDialogs:r,toolbarFactory:w,translator:g});t.docRegistry.addWidgetFactory(N);let M=0;const T=t.docRegistry.getFileType("notebook");N.widgetCreated.connect(((t,e)=>{var o,a;e.id=e.id||"notebook-jupytext-"+ ++M,e.title.icon=null==T?void 0:T.icon,e.title.iconClass=null!==(o=null==T?void 0:T.iconClass)&&void 0!==o?o:"",e.title.iconLabel=null!==(a=null==T?void 0:T.iconLabel)&&void 0!==a?a:"",e.context.pathChanged.connect((()=>{c.save(e)})),c.add(e)})),_&&(_.addFileType("markdown"),_.addFileType("myst"),_.addFileType("r-markdown"),_.addFileType("quarto"),_.addFileType("julia"),_.addFileType("python"),_.addFileType("r"))}};e.default=y}}]);