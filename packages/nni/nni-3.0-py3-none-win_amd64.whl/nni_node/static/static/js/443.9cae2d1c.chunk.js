"use strict";(self.webpackChunknni_webui=self.webpackChunknni_webui||[]).push([[443],{7691:function(e,t,s){var n=s(15201),a=s(9711),i=s.n(a),r=s(41218),o=s(41188),l=s(66630),c=s(56465);t.Z=e=>{const{value:t,hideTooltip:s}=e,a=(0,n.useRef)(null);return n.createElement("div",null,n.createElement(r.h,{iconProps:{iconName:"Copy"},styles:{icon:[{fontSize:o.TS.small}]},onClick:e=>{e.stopPropagation(),i()(t),a.current&&a.current.show(),setTimeout((()=>{null!==a.current&&a.current.dismiss()}),1e3)},onMouseDown:e=>{e.stopPropagation()},onMouseUp:e=>{e.stopPropagation()}}),n.createElement(l.G,{hidden:s,content:"Copied",componentRef:a,delay:0,tooltipProps:c.$8}))}},5443:function(e,t,s){s.r(t),s.d(t,{default:function(){return $}});var n=s(15201),a=s(5975),i=s(50691),r=s(2419),o=s(72496),l=s(12673),c=s(79461),m=s(59537),d=s(56465),u=s(75091);class h{experimentList=[];platform=[];errorMessage="";getExperimentList(){return this.experimentList}getPlatformList(){return this.platform}getExpErrorMessage(){return this.errorMessage}async init(){await(0,u.b6)(`${d.zU}/experiments-info`).then((e=>{const t=new Set;for(const s of e)void 0!==s.port&&"string"===typeof s.port&&(s.port=JSON.parse(s.port)),t.add(s.platform);this.experimentList=e.sort(((e,t)=>t.startTime-e.startTime)),this.platform=Array.from(t)})).catch((e=>{e.response&&(this.errorMessage=e.response.data.error)}))}}function p(e,t){return void 0!==e&&void 0!==t&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}const f=(e,t,s)=>"string"===typeof e&&""!==e?s.filter((s=>s[t]===e)):Array.isArray(e)&&0!==e.length?s.filter((s=>e.includes(s[t]))):s;function S(e){return e.map((e=>({key:e,text:e})))}function E(e,t){return(0,u.Lc)(e,t.field,t.isDescend)}const g=180,N=139;var C=s(89103),v=s(79569),x=s(22250),k=s(75781),y=s(33607),w=s(79267);const D=()=>n.createElement("div",{className:"header"},n.createElement("div",{className:"headerCon"},n.createElement(a.K,{className:"nav",horizontal:!0},n.createElement(v.v,{grow:30,styles:{root:{minWidth:300,display:"flex",verticalAlign:"center"}}},n.createElement("span",{className:"desktop-logo"},y.qo),n.createElement("span",{className:"logoTitle"},"Neural Network Intelligence")),n.createElement(v.v,{grow:70,className:"navOptions"},n.createElement(a.K,{horizontal:!0,horizontalAlign:"end",tokens:w.s1,styles:w.uI},n.createElement(C.rU,{to:"/oview",className:"experiment"},n.createElement(x.Q,{iconProps:k.We,text:"Back to the experiment"})))))));var b=s(7691);class P extends n.Component{constructor(e){super(e)}render(){const{item:e}=this.props,t=window.location.hostname,s=window.location.protocol,i=null===e.prefixUrl?`${s}//${t}:${e.port}/oview`:`${s}//${t}:${e.port}/${this.formatPrefix(e.prefixUrl)}/oview`;return n.createElement(a.K,{horizontal:!0,className:"ellipsis idCopy"},"STOPPED"===e.status?n.createElement("div",{className:"idColor"},e.id):n.createElement("a",{href:i,className:"link",target:"_blank",rel:"noopener noreferrer"},e.id),n.createElement(b.Z,{value:e.id}))}formatPrefix(e){return e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e}}var L=P,T=s(73407),W=s(4464),I=s(45682);class M extends n.Component{constructor(e){super(e)}render(){const{platform:e,selectedStatus:t,selectedPlatform:s,selectedStartDate:a,selectedEndDate:i,selectStatus:r,selectPlatform:o,getSelectedData:m,setSearchSource:u}=this.props;return n.createElement(n.Fragment,null,n.createElement(T.L,{label:"Status",selectedKeys:t,multiSelect:!0,onChange:r.bind(this),placeholder:"Select an option",options:S(d.hh),className:"filter-condition-status"}),n.createElement(T.L,{label:"Platform",selectedKey:s,onChange:o.bind(this),placeholder:"Select an option",options:S(e),className:"filter-condition-platform"}),n.createElement(W.M,{label:"Start time",firstDayOfWeek:I.eO.Sunday,showMonthPickerAsOverlay:!0,placeholder:"Select a date...",ariaLabel:"Select a date",value:a,onSelectDate:m.bind(this,"start"),className:"filter-condition-date"}),n.createElement(W.M,{label:"End time",firstDayOfWeek:I.eO.Sunday,showMonthPickerAsOverlay:!0,placeholder:"Select a date...",ariaLabel:"Select a date",value:i,onSelectDate:m.bind(this,"end"),className:"filter-condition-date"}),n.createElement(l.a,{onClick:u.bind(this),className:"reset"},n.createElement(c.J,{iconName:"Refresh"}),n.createElement("span",{className:"margin"},"Reset")))}}var O=M;const R=n.createContext({text:"",icon:""});s(1696);const z=()=>{const{icon:e,text:t}=(0,n.useContext)(R);return n.createElement(a.K,{horizontal:!0,className:"panelTitle"},n.createElement(c.J,{iconName:e}),n.createElement("span",{className:"fontColor333"},t))};s(41475),s(18856),s(49885),s(81296),s(16668);const K={childrenGap:25};class A extends n.Component{constructor(e){super(e),this.state={platform:[],columns:this.columns,errorMessage:"",hideFilter:!0,searchInputVal:"",selectedStatus:[],selectedPlatform:"",source:[],originExperimentList:[],searchSource:[],sortInfo:{field:"",isDescend:!1}}}async componentDidMount(){const e=new h;await e.init();const t=e.getExperimentList();this.setState((()=>({source:t,originExperimentList:t,searchSource:t,platform:e.getPlatformList(),errorMessage:e.getExpErrorMessage()})))}render(){const{platform:e,hideFilter:t,selectedStatus:s,source:d,selectedPlatform:u,selectedStartDate:h,selectedEndDate:p,errorMessage:f}=this.state;return n.createElement(a.K,{className:"nni experiments-info",style:{minHeight:window.innerHeight}},n.createElement(D,null),""!==f?n.createElement("div",{className:"warning"},n.createElement(i.c,{messageBarType:r.f.error,isMultiline:!0,style:{width:400}},f)):null,n.createElement(a.K,{className:"contentBox expBackground"},n.createElement(a.K,{className:"content",styles:{root:{minHeight:window.innerHeight-112}}},n.createElement(a.K,{className:"experimentList"},n.createElement(R.Provider,{value:{text:"All experiments",icon:"CustomList"}},n.createElement(z,null)),n.createElement(a.K,{className:"box",horizontal:!0},n.createElement("div",{className:"search"},n.createElement(o.R,{className:"search-input",placeholder:"Search the experiment by name or ID",onEscape:this.setOriginSource.bind(this),onClear:this.setOriginSource.bind(this),onChange:this.searchNameAndId.bind(this)})),n.createElement("div",{className:"filter"},n.createElement(l.a,{onClick:this.clickFilter.bind(this),className:`${t?null:"filter-button-open"}`},n.createElement(c.J,{iconName:"Equalizer"}),n.createElement("span",{className:"margin"},"Filter")))),n.createElement(a.K,{className:(t?"hidden":"")+" filter-condition",horizontal:!0,tokens:K},n.createElement(O,{platform:e,selectedStatus:s,selectedPlatform:u,selectedStartDate:h,selectedEndDate:p,selectStatus:this.selectStatus.bind(this),selectPlatform:this.selectPlatform.bind(this),getSelectedData:this.getSelectedData.bind(this),setSearchSource:this.setSearchSource.bind(this)})),n.createElement(m.W,{columns:this.columns,items:d,setKey:"set",compact:!0,selectionMode:0,className:"table"})))))}onColumnClick=(e,t)=>{const{columns:s,source:n}=this.state,a=s.slice(),i=a.filter((e=>t.key===e.key))[0];a.forEach((e=>{e===i?(i.isSortedDescending=!i.isSortedDescending,i.isSorted=!0):(e.isSorted=!1,e.isSortedDescending=!0)}));const r=(0,u.Lc)(n,i.fieldName,i.isSortedDescending);this.setState((()=>({columns:a,source:r,sortInfo:{field:i.fieldName,isDescend:i.isSortedDescending}})))};columns=[{name:"Name",key:"experimentName",fieldName:"experimentName",minWidth:N,maxWidth:g,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",null,e.experimentName)},{name:"ID",key:"id",fieldName:"id",minWidth:N,maxWidth:g,isResizable:!0,className:"tableHead leftTitle",data:"string",onColumnClick:this.onColumnClick,onRender:e=>n.createElement(L,{item:e})},{name:"Status",key:"status",fieldName:"status",minWidth:N,maxWidth:g,isResizable:!0,onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",{className:`${e.status} commonStyle`},e.status)},{name:"Port",key:"port",fieldName:"port",minWidth:124,maxWidth:150,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",{className:"STOPPED"===e.status?"gray-port":""},void 0!==e.port?e.port:"--")},{name:"Platform",key:"platform",fieldName:"platform",minWidth:124,maxWidth:150,isResizable:!0,data:"string",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",{className:"commonStyle"},e.platform)},{name:"Start time",key:"startTime",fieldName:"startTime",minWidth:154,maxWidth:210,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",null,(0,u.ZU)(e.startTime))},{name:"End time",key:"endTime",fieldName:"endTime",minWidth:154,maxWidth:210,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>n.createElement("div",null,(0,u.ZU)(e.endTime))}];clickFilter(e){const{hideFilter:t}=this.state;!0===!t&&this.setSearchSource(),this.setState((()=>({hideFilter:!t})))}setOriginSource(){let{originExperimentList:e}=this.state;const{sortInfo:t}=this.state;if(void 0!==e){e=this.commonSelectString(e,"");const s=E(e,t);this.setState((()=>({source:s})))}}searchNameAndId(e,t){const{originExperimentList:s,sortInfo:n}=this.state;if(void 0!==t){if(""===t)this.setOriginSource();else{const e=t.trim();let a=s.filter((t=>null!==t.experimentName&&t.experimentName.toLowerCase().includes(e.toLowerCase())||t.id.toLowerCase().includes(e.toLowerCase())));a=this.commonSelectString(a,"");const i=E(a,n);this.setState((()=>({source:i,searchSource:i})))}this.setState((()=>({searchInputVal:t.trim()})))}}commonSelectString=(e,t)=>{const{selectedStatus:s,selectedPlatform:n,selectedStartDate:a,selectedEndDate:i}=this.state;return"status"===t&&(e=f(n,"platform",e)),"platform"===t&&(e=f(s,"status",e)),""===t&&(e=Array.from(new Set([...f(n,"platform",e),...f(s,"status",e)]))),e=e.filter((e=>(void 0===a||p(new Date(e.startTime),a))&&(void 0===i||p(new Date(e.endTime),i))))};selectStatus=(e,t)=>{if(void 0!==t){const{searchSource:e,sortInfo:s,selectedStatus:n}=this.state,a=t.selected?[...n,t.key]:n.filter((e=>e!==t.key));let i=f(a,"status",e);i=this.commonSelectString(i,"status"),this.setState({selectedStatus:a,source:E(i,s)})}};selectPlatform=(e,t)=>{if(void 0!==t){const{searchSource:e,sortInfo:s}=this.state;let n=f(t.key,"platform",e);n=this.commonSelectString(n,"platform"),this.setState({selectedPlatform:t.key,source:E(n,s)})}};getSelectedData(e,t){if(null!==t&&void 0!==t){const{selectedStatus:s,selectedPlatform:n,selectedStartDate:a,selectedEndDate:i,searchSource:r,sortInfo:o}=this.state,l=""!==n;let c=f(s,"status",r);l&&(c=c.filter((e=>e.platform===n))),"start"===e?(c=c.filter((e=>p(new Date(e.startTime),t)&&(void 0===i||p(new Date(e.endTime),i)))),this.setState((()=>({source:E(c,o),selectedStartDate:t})))):(c=c.filter((e=>p(new Date(e.endTime),t)&&(void 0===a||p(new Date(e.startTime),a)))),this.setState((()=>({source:E(c,o),selectedEndDate:t}))))}}setSearchSource(){const{sortInfo:e,originExperimentList:t}=this.state;let{searchInputVal:s}=this.state,n=JSON.parse(JSON.stringify(t));s=s.trim(),""!==s&&(n=t.filter((e=>e.id.toLowerCase().includes(s.toLowerCase())||null!==e.experimentName&&e.experimentName.toLowerCase().includes(s.toLowerCase())))),this.setState((()=>({source:E(n,e),selectedStatus:[],selectedPlatform:"",selectedStartDate:void 0,selectedEndDate:void 0})))}}var $=A},79267:function(e,t,s){s.d(t,{O4:function(){return n},s1:function(){return a},uI:function(){return i}});const n={childrenGap:10},a={childrenGap:15},i={root:{minWidth:400,height:56,display:"flex",verticalAlign:"center"}}},33607:function(e,t,s){s.d(t,{fS:function(){return r},qo:function(){return o}});var n=s(15201),a=s(89103),i=s(75091);a.OL;const r=n.createElement("a",{href:"/detail",className:"link"},n.createElement("span",{className:"common-tabs"},"Trials detail")),o=n.createElement(a.OL,{to:"/oview"},n.createElement("img",{src:((0,i.Gn)()||"")+"/logo.png",alt:"NNI logo",style:{height:40}}))},16668:function(){},81296:function(){},1696:function(){}}]);
//# sourceMappingURL=443.9cae2d1c.chunk.js.map