"use strict";(self.webpackChunknni_webui=self.webpackChunknni_webui||[]).push([[616],{7691:function(e,t,a){var n=a(15201),l=a(9711),r=a.n(l),i=a(41218),s=a(41188),o=a(66630),c=a(56465);t.Z=e=>{const{value:t,hideTooltip:a}=e,l=(0,n.useRef)(null);return n.createElement("div",null,n.createElement(i.h,{iconProps:{iconName:"Copy"},styles:{icon:[{fontSize:s.TS.small}]},onClick:e=>{e.stopPropagation(),r()(t),l.current&&l.current.show(),setTimeout((()=>{null!==l.current&&l.current.dismiss()}),1e3)},onMouseDown:e=>{e.stopPropagation()},onMouseUp:e=>{e.stopPropagation()}}),n.createElement(o.G,{hidden:a,content:"Copied",componentRef:l,delay:0,tooltipProps:c.$8}))}},3813:function(e,t,a){a.d(t,{Z:function(){return b}});var n=a(15201),l=a(5975),r=a(61017),i=a(6316),s=a(12673),o=a(50691),c=a(2419),m=a(9775),d=a(9711),u=a.n(d),p=a(20338),h=a(56465),g=a(66904),f=a(75091),v=a(43520);var E=e=>{const{logStr:t,logName:a}=e,r=t.toLowerCase().startsWith("http");return n.createElement(l.K,{horizontal:!0,className:"logpath",tokens:v.W},n.createElement("span",{className:"logName"},a),r?n.createElement("a",{className:"link",rel:"noopener noreferrer",href:t,target:"_blank"},t):n.createElement("span",{className:"fontColor333"},t))};var y=e=>{const{logStr:t}=e,a=-1!==t.indexOf(",");return n.createElement("div",null,a?n.createElement("div",null,n.createElement(E,{logStr:t.split(",")[0],logName:"Trial stdout:"}),n.createElement(E,{logStr:t.split(",")[1],logName:"Log on NFS:"})):n.createElement(E,{logStr:t,logName:"Trial stdout:"}))},S=a(60196),N=a(83105);a(63573);var x=e=>{const[t,a]=(0,n.useState)(window.innerHeight),r=()=>{a(window.innerHeight)};(0,n.useEffect)((()=>(window.addEventListener("resize",r),window.removeEventListener("resize",r))),[]);const{hideConfigPanel:i,panelName:s,panelContent:o}=e,c=(0,f.yG)(t);return n.createElement(l.K,null,n.createElement(S.s,{isOpen:!0,hasCloseButton:!1,isFooterAtBottom:!0,isLightDismiss:!0,onLightDismissClick:i},n.createElement("div",{className:"panel"},n.createElement("div",null,n.createElement("div",{className:"panelName"},s),n.createElement(N.ZP,{height:c,language:"json",theme:"vs-light",value:o,options:{minimap:{enabled:!1},readOnly:!0,automaticLayout:!0,wordWrap:"on"}})),n.createElement(m.K,{text:"Close",className:"configClose",onClick:i}))))};a(18433);var b=e=>{const[t,a]=(0,n.useState)(""),[d,S]=(0,n.useState)(""),[N,b]=(0,n.useState)(!0),[C,k]=(0,n.useState)(!1),w=e.trialId,I=g.F.getTrial(w),T=I.info.logPath||"This trial's log path is not available.",O=I.parameter,M=h.qp in O,D=()=>{b(!0)},K=(e,t)=>{a(t),S(e),b(!1),setTimeout(D,2e3)},P=t=>{window.open(`${h.zU}/trial-file/${e.trialId}/${t}`)};return n.createElement(l.K,{className:"openRow"},n.createElement(l.K,{className:"openRowContent"},n.createElement(r.o,null,n.createElement(i.M,{headerText:"Parameters",key:"1",itemIcon:"TestParameter"},void 0!==I.info.hyperParameters?n.createElement(l.K,{tokens:v.W},n.createElement("div",{className:"bgHyper"},n.createElement(p.L,{hideRoot:!0,shouldExpandNodeInitially:()=>!0,getItemString:()=>null,data:(0,f.cJ)(O)})),n.createElement(l.K,{horizontal:!0,className:"copy",tokens:v.w},n.createElement(s.a,{onClick:(e=>{const t=JSON.stringify((0,f.cJ)(e.parameter),null,4);u()(t)?K("Successfully copy parameters to clipboard in form of python dict!","success"):K("Failed!","error")}).bind(void 0,I),text:"Copy as json"}),M&&n.createElement(s.a,{onClick:()=>{k(!0)},text:"Original parameters"}),!N&&n.createElement("div",{style:{width:400}},n.createElement(o.c,{messageBarType:c.f[t]},d)),C&&n.createElement(x,{hideConfigPanel:()=>{k(!1)},panelName:"Retiarii parameters",panelContent:JSON.stringify(O,null,2)}))):n.createElement(l.K,{horizontal:!0,className:"logpath",tokens:v.W},n.createElement("span",{className:"logName"},"Error: "),n.createElement("span",{className:"error"},"This trial's parameters are not available."))),n.createElement(i.M,{headerText:"Log",key:"2",itemIcon:"M365InvoicingLogo"},"local"!==g.O.trainingServicePlatform?n.createElement(y,{logStr:T}):n.createElement(E,{logStr:T,logName:"LogPath:"}),"local"===g.O.trainingServicePlatform||"remote"===g.O.trainingServicePlatform?n.createElement(l.K,{horizontal:!0,tokens:v.w,style:{marginLeft:10}},n.createElement(m.K,{onClick:P.bind(void 0,"trial.log"),text:"View trial log"}),n.createElement(m.K,{onClick:P.bind(void 0,"stderr"),text:"View trial error"}),n.createElement(m.K,{onClick:P.bind(void 0,"stdout"),text:"View trial stdout"})):null),g.O.metadata.tag.includes("retiarii")?n.createElement(i.M,{headerText:"Visualization",key:"3",itemIcon:"FlowChart"},n.createElement(l.K,{tokens:v.W},n.createElement("div",null,"Visualize models with 3rd-party tools."),n.createElement(m.K,{onClick:(()=>{window.open(`/netron/index.html?url=${h.zU}/trial-file/${e.trialId}/model.onnx`)}).bind(void 0),text:"Netron",styles:{root:{width:88}}}))):null)))}},43520:function(e,t,a){a.d(t,{W:function(){return l},w:function(){return n}});const n={childrenGap:10},l={childrenGap:10,padding:10}},28622:function(e,t,a){var n=a(15201),l=a(56465),r=a(66630),i=a(81042);t.Z=e=>{const{value:t}=e,a=String(t).length;return n.createElement(n.Fragment,null,a>=15?n.createElement("div",null,n.createElement(r.G,{content:t,directionalHint:i.b.bottomLeftEdge,tooltipProps:l.$8},n.createElement("div",{className:"ellipsis name"},t))):n.createElement("div",{className:"name"},t))}},31520:function(e,t,a){a.d(t,{W:function(){return r}});var n=a(41188);const l=(0,n.gh)(),r=(0,n.ZC)({buttonArea:{verticalAlign:"top",display:"inline-block",textAlign:"center",minWidth:30,height:30},callout:{maxWidth:300},header:{padding:"18px 24px 12px"},title:[l.fonts.xLarge,{margin:0,color:l.palette.neutralPrimary,fontWeight:n.lq.semilight}],inner:{height:"100%",padding:"0 24px 20px"},actions:{position:"relative",marginTop:20,width:"100%",whiteSpace:"nowrap"},subtext:[l.fonts.small,{margin:0,color:l.palette.neutralPrimary,fontWeight:n.lq.semilight}],link:[l.fonts.medium,{color:l.palette.neutralPrimary}],buttons:{display:"flex",justifyContent:"flex-end",padding:"0 24px 24px"}})},31763:function(e,t,a){a.r(t),a.d(t,{default:function(){return Pe}});var n=a(15201),l=a(61017),r=a(6316),i=a(5975),s=a(66904),o=a(97704),c=a(33047),m=a(60006),d=a(75091);a(81187),a(99058),a(97538);var u=n.memo((e=>{const{source:t}=e,a=[],l=[],r=[];t.forEach((e=>{a.push(e.sequenceId),l.push(e.duration)})),r.push({trialId:a,trialTime:l});const i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},enterable:!0,formatter:e=>`<div class="tooldetailAccuracy">\n                    <div class='main'>\n                        <div>Trial No.: ${e[0].dataIndex}</div>\n                        <div>Duration: ${(0,d.BG)(e[0].data)}</div>\n                    </div>\n                </div>\n                `},grid:{bottom:"3%",containLabel:!0,left:"1%",right:"5%"},dataZoom:[{id:"dataZoomY",type:"inside",yAxisIndex:[0],filterMode:"empty",start:0,end:100}],xAxis:{name:"Time",type:"value"},yAxis:{name:"Trial",type:"category",data:(s=r[0]).trialId,nameTextStyle:{padding:[0,0,0,30]}},series:[{type:"bar",data:s.trialTime}]};var s;return n.createElement("div",{className:"graph"},n.createElement(m.Z,{option:i,style:{width:"94%",height:412,margin:"0 auto",marginTop:15},theme:"nni_theme",lazyUpdate:!0}))})),p=a(8314),h=a(73407),g=a(12673),f=a(15483);const v=e=>{const t=localStorage.getItem(e);if(!t)return null;const a=JSON.parse(t);return Date.now()-a.time>a.expire?(localStorage.removeItem(e),null):a.value};class E{key="";value="";expire=0;isSelectall=!1;constructor(e,t,a,n){this.key=e,this.value=t,this.expire=a,this.isSelectall=n}setValue(){const e={value:this.value,time:Date.now(),expire:this.expire,isSelectall:this.isSelectall};localStorage.setItem(this.key,JSON.stringify(e))}}var y=a(21385),S=a(34719),N=a(58239),x=a(51889),b=a(9775);var C=e=>{const{selectedColumns:t,allColumns:a,minSelected:l,onHideDialog:r}=e,[i,o]=(0,n.useState)(t.length===a.length),[c,m]=(0,n.useState)(t),d=e=>(t,a)=>((e,t,a)=>{const n=[...c];if(!0===a)n.includes(t)||(n.push(t),m(n));else{const e=n.filter((e=>e!==t));m(e),o(!1)}})(0,e,a),u=(0,n.useCallback)(((e,t)=>{m(!1===t?[]:a.map((e=>e.key))),o(!!t)}),[]);return n.createElement("div",null,n.createElement(y.V,{hidden:!1,dialogContentProps:{type:S.i.largeHeader,title:"Customize columns",subText:"You can choose which columns you wish to see."},modalProps:{isBlocking:!1,styles:{main:{maxWidth:450}}}},n.createElement("div",{className:"columns-height"},n.createElement(N.X,{key:"selectAll",label:"Select all",checked:i,onChange:u.bind("selectAll"),styles:{root:{marginBottom:8}}}),a.map((e=>n.createElement(N.X,{key:e.key,label:e.name,checked:c.includes(e.key),onChange:d(e.key),styles:{root:{marginBottom:8}}})))),n.createElement(x.c,null,n.createElement(b.K,{text:"Save",onClick:()=>{const{allColumns:t,onSelectedChange:a,whichComponent:n}=e,l=t.map((e=>e.key)).filter((e=>c.includes(e)));if(a(l),"table"===n){new E(`${s.O.profile.id}_columns`,JSON.stringify(l),2592e6,i).setValue()}else{new E(`${s.O.profile.id}_paraColumns`,JSON.stringify(l),2592e6,i).setValue()}r()},disabled:c.length<(l??1)}),n.createElement(g.a,{text:"Cancel",onClick:()=>{m(t),r()}}))))},k=a(43520);a(21662);const w={width:"100%",height:392,margin:"0 auto"},I={top:32,right:20,bottom:20,left:28};let T;const O=n.createRef();var M=e=>{const{metricGraphMode:t,changeMetricGraphMode:a}=(0,n.useContext)(o.Il),{trials:l,searchSpace:r}=e,[c,m]=(0,n.useState)("1"),[d,u]=(0,n.useState)("default"),[E,y]=(0,n.useState)(!0),[S,N]=(0,n.useState)(!1),[x,b]=(0,n.useState)([]),[M,D]=(0,n.useState)((K=(()=>{const e=s.F.inferredSearchSpace(r),t=s.F.inferredMetricSpace(),a=[];for(const[n]of e.axes)a.push(n);for(const[n]of t.axes)a.push(n);return a})(),null!==localStorage.getItem(`${s.O.profile.id}_paraColumns`)&&null!==v(`${s.O.profile.id}_paraColumns`)?JSON.parse(v(`${s.O.profile.id}_paraColumns`)):K));var K;const P=(e,t)=>{void 0!==t&&u(t.key)},A=(e,t=!0)=>{const a=([e,t],a=.1)=>{const n=(t-e)*a/2;return[e-n,t+n]};let n;return"ordinal"===e.scale?n=e.nested?p.q2y().domain(Array.from(e.domain.keys())).padding(.2):p.q2y().domain(e.domain).padding(.2):"log"===e.scale?n=p.p2C().domain((([e,t],n=.1)=>{const[l,r]=a([Math.log(e),Math.log(t)],n);return[Math.exp(l),Math.exp(r)]})(e.domain)):"linear"===e.scale&&(n=p.BYU().domain(a(e.domain))),t&&(n=n.range([w.height-I.top-I.bottom,1])),n},z=()=>{const e=parseFloat(c),a=s.F.inferredSearchSpace(r),n=s.F.inferredMetricSpace();let i=((e,t)=>l.map((a=>{const n=Array.from(a.parameters(e).entries());n.push(...Array.from(a.metrics(t).entries()));const l={};for(const[e,t]of n)l[e.fullName]=t;return l})))(a,n);const o=[];let m,u;for(const[t,l]of a.axes)o.push([t,{type:"number",yscale:A(l)}]);for(const[l,r]of n.axes){const a=A(r);if(l===d&&void 0!==a&&a.interpolate){if(u=A(r,!1),i.sort(((e,a)=>"Minimize"===t?e[l]-a[l]:a[l]-e[l])),1!=e){const t=Math.max(Math.ceil(i.length*e),1);i=i.slice(0,t);const n=p.Wem(i,(e=>e[l]));a.domain([n[0],n[1]]),u.domain([n[0],n[1]]),void 0!==u&&u.domain(n)}i.reverse();const n=e=>{e.range([0,1]);const[t,a]=e.domain(),n=e.invert(.5);e.domain([t,n,a]).range(["#90EE90","#FFC400","#CA0000"]).interpolate(p.USs)};n(u),m=l}o.push([l,{type:"number",yscale:a}])}if(0===i.length||o.length<=1)return;const h=void 0===T;h&&(void 0===O.current&&null===O.current||(O.current.innerHTML=""),T=(0,f.Z)()(O.current)),T.data(i).dimensions(o.filter((([e,t])=>0===M.length||M.includes(e))).reduce(((e,t)=>({...e,[t[0]]:t[1]})),{})),h&&T.margin(I).alphaOnBrushed(.2).smoothness(.1).brushMode("1D-axes").reorderable().interactive(),void 0!==u&&T.color((e=>u(e[m]))),T.render(),i.length>=0&&y(!1),b(o.map((e=>e[0])))};(0,n.useEffect)((()=>(z(),function(){T=void 0})),[M,c,t,d,l,r]);const $=n.useMemo((()=>n.createElement(n.Fragment,null,n.createElement("div",{className:"parcoords",style:w,ref:O}),E&&n.createElement("div",{className:"nodata"},"No data"))),[E,M]);return n.createElement("div",{className:"parameter"},n.createElement(i.K,{horizontal:!0,className:"para-filter",horizontalAlign:"end",tokens:k.w},n.createElement(g.a,{text:"Add/Remove axes",onClick:()=>{N(!0)}}),n.createElement(h.L,{selectedKey:t,onChange:(e,t)=>{void 0!==t&&a(t.key.toString())},options:[{key:"Maximize",text:"Maximize"},{key:"Minimize",text:"Minimize"}],styles:{dropdown:{width:100}}}),n.createElement(h.L,{selectedKey:c,onChange:(e,t)=>{void 0!==t&&m(t.key.toString())},options:[{key:"0.01",text:"Top 1%"},{key:"0.05",text:"Top 5%"},{key:"0.2",text:"Top 20%"},{key:"1",text:"Top 100%"}],styles:{dropdown:{width:120}}}),(()=>{if(1===s.F.finalKeys().length)return null;{const e=[];return s.F.finalKeys().forEach((t=>{e.push({key:t,text:t})})),n.createElement(n.Fragment,null,n.createElement("div",{className:"para-filter-text"},"Metrics"),n.createElement(h.L,{selectedKey:d,options:e,onChange:P,styles:{root:{width:150}}}))}})()),S&&x.length>0&&n.createElement(C,{selectedColumns:M,allColumns:x.map((e=>({key:e,name:e}))),onSelectedChange:e=>{D(e)},onHideDialog:()=>{N(!1)},minSelected:2,whichComponent:"para"}),$)},D=a(83579);const K={childrenGap:20};var P=e=>{let t,a,l;const[r,s]=(0,n.useState)({}),[o,c]=(0,n.useState)([]),[u,p]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),{source:f}=e,v=e=>{if(e.length>0){const t=[];e.sort(((e,t)=>t.data.length-e.data.length));for(let a=1;a<=e[0].data.length;a++)t.push(a);s({tooltip:{trigger:"item",enterable:!0,confine:!0,formatter:function(t){const a=t.seriesName;let n={},l=0;const r=e.find((e=>e.name===a));return void 0!==r&&(n=r.parameter,l=r.sequenceId),`\n                            <div class="tooldetailAccuracy">\n                                <div class='trial-No'>Trial No.: ${l}</div> \n                                <div class='main'>\n                                <div><span>Trial ID: </span>${a}</div>\n                                <div><span>Intermediate: </span>${t.data}</div>\n                                <div><span>Parameters: </span><pre>${JSON.stringify((0,d.cJ)(n),null,4)}</pre>\n                                </div>\n                                </div>\n                            </div>\n                        `}},grid:{left:"5%",top:40,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t},yAxis:{type:"value",name:"Metric",scale:!0},dataZoom:[{type:"inside",yAxisIndex:[0],filterMode:"none",start:0,end:100}],series:e})}else{s({grid:{left:"5%",top:40,containLabel:!0},xAxis:{type:"category",boundaryGap:!1},yAxis:{type:"value",name:"Metric"}})}};(0,n.useEffect)((()=>{if(!0===h){const e=void 0!==t?t.value:"",n=void 0!==a?a.value:"";v(""===e||""===n?f:o)}else v(f)}),[h,f]);const E=n.useMemo((()=>n.createElement("div",{className:"intermediate-graph graph"},n.createElement(m.Z,{option:r,style:{width:"100%",height:400,margin:"0 auto"},notMerge:!0}),n.createElement("div",{className:"fontColor333 xAxis"},"# Intermediate result"))),[r]);return n.createElement("div",null,n.createElement(i.K,{horizontal:!0,horizontalAlign:"end",tokens:K,className:"meline intermediate"},h?n.createElement("div",null,n.createElement("span",{className:"filter-x"},"# Intermediate result"),n.createElement("input",{ref:e=>t=e,className:"strange"}),n.createElement("span",null,"Metric range"),n.createElement("input",{ref:e=>a=e}),n.createElement("span",{className:"hyphen"},"-"),n.createElement("input",{ref:e=>l=e}),n.createElement(b.K,{className:"intermeidateconfirm",text:"Confirm",onClick:()=>{const e=[];p(!0);const n=null!==t?t.value:"",r=null!==a?a.value:"",i=null!==l?l.value:"";if(""===n||""===r)alert("Please input filter message");else{const t=JSON.parse(n),a=JSON.parse(r);if(""===i)for(const n of f){n.data[t-1]>=a&&e.push(n)}else{const n=JSON.parse(i);for(const l of f){const r=l.data[t-1];r>=a&&r<=n&&e.push(l)}}c(e),v(e)}p(!1)},disabled:u})):null,n.createElement(D.Z,{label:"Filter",inlineLabel:!0,onChange:(e,t)=>{g(t??!0)}})),E)},A=a(79461),z=a(75781),$=a(92711),L=a(79569),F=a(56465);var R=e=>{const{closeCustomizeModal:t,copyTrialId:a,visible:l}=e,r=s.O.searchSpace,[o,c]=(0,n.useState)(!1),[m,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)({}),[v,E]=(0,n.useState)({}),[N,C]=(0,n.useState)(NaN),[k,w]=(0,n.useState)(new Map),I=e=>{const{name:t,value:a}=e.target;w(k.set(t,a))},T=e=>{for(const t in e)"tag"===t&&delete e[t];(0,$.Z)(`${F.zU}/trial-jobs`,{method:"POST",headers:{"Content-Type":"application/json"},data:e}).then((e=>{200===e.status?(c(!0),C(e.data.sequenceId),t()):d(!0)})).catch((()=>{d(!0)}))},O=()=>{c(!1),w(new Map),t()};return(0,n.useEffect)((()=>{if(void 0!==a&&void 0!==s.F.getTrial(a)){const e=s.F.getTrial(a).parameter;f(e)}}),[a]),n.createElement(i.K,null,n.createElement(y.V,{hidden:!l,dialogContentProps:{type:S.i.largeHeader,title:"Customized trial setting",subText:"You can submit a customized trial."},modalProps:{isBlocking:!1,styles:{main:{maxWidth:450}}}},n.createElement("form",{className:"hyper-box"},Object.keys(h).map((e=>n.createElement(i.K,{horizontal:!0,key:e,className:"hyper-form"},n.createElement(L.v,{styles:{root:{minWidth:100}},className:"title"},e),n.createElement(L.v,{className:"inputs"},n.createElement("input",{type:"text",name:e,defaultValue:h[e],onChange:I})))))),n.createElement(x.c,null,n.createElement(b.K,{text:"Submit",onClick:()=>{const e=JSON.parse(JSON.stringify(h));k.forEach((function(t,a){e[a]=t}));let t=!1;Object.keys(e).map((a=>{if("tag"!==a){if(("number"===typeof h[a]&&"string"===typeof e[a]||"boolean"===typeof h[a]&&"string"===typeof e[a])&&(e[a]=JSON.parse(e[a])),void 0===r[a])return;if("choice"===r[a]._type){if(void 0===r[a]._value.find((t=>t===e[a])))return void(t=!0)}else if(e[a]<r[a]._value[0]||e[a]>r[a]._value[1])return void(t=!0)}})),!1!==t?(p(!0),E(e)):T(e)}}),n.createElement(g.a,{text:"Cancel",onClick:t}))),n.createElement(y.V,{hidden:!o,onDismiss:O,dialogContentProps:{type:S.i.normal,title:n.createElement("div",{className:"icon-color"},z.d8,n.createElement("b",null,"Submit successfully")),closeButtonAriaLabel:"Close",subText:`You can find your customized trial by Trial No.${N}`},modalProps:{isBlocking:!1,styles:{main:{minWidth:500}}}},n.createElement(x.c,null,n.createElement(b.K,{onClick:O,text:"OK"}))),n.createElement(y.V,{hidden:!m,onDismiss:O,dialogContentProps:{type:S.i.normal,title:n.createElement("div",{className:"icon-error"},z.of,"Submit Failed"),closeButtonAriaLabel:"Close",subText:"Unknown error."},modalProps:{isBlocking:!1,styles:{main:{minWidth:500}}}},n.createElement(x.c,null,n.createElement(b.K,{onClick:()=>{d(!1),w(new Map),t()},text:"OK"}))),n.createElement(y.V,{hidden:!u,onDismiss:O,dialogContentProps:{type:S.i.normal,title:n.createElement("div",{className:"icon-error"},z.uQ,"Warning"),closeButtonAriaLabel:"Close",subText:"The parameters you set are not in our search space, this may cause the tuner to crash, Are you sure you want to continue submitting?"},modalProps:{isBlocking:!1,styles:{main:{minWidth:500}}}},n.createElement(x.c,null,n.createElement(b.K,{onClick:()=>{p(!1),T(v)},text:"Confirm"}),n.createElement(g.a,{onClick:()=>{p(!1)},text:"Cancel"}))))};var W=function(e){const{isReaptedStartTensorboard:t,onHideDialog:a,item:l,isShowTensorboardDetail:r,errorMessage:i}=e,s={type:S.i.normal,title:`${r?l.id:"TensorBoard"}`};return n.createElement(y.V,{hidden:!1,dialogContentProps:s,modalProps:{className:"dialog"}},i.isError?n.createElement("div",null,n.createElement("span",null,"Error message: ",i.message)):r?n.createElement("div",null,"This tensorBoard with trials: ",n.createElement("span",{className:"bold"},l.trialJobIdList.join(", ")),"."):t?n.createElement("div",null,"You had started this tensorBoard with these trials:",n.createElement("span",{className:"bold"},l.trialJobIdList.join(", ")),".",n.createElement("div",{className:"line-height"},"Its tensorBoard id: ",n.createElement("span",{className:"bold"},l.id))):n.createElement("div",null,"You are starting a new TensorBoard with trials:",n.createElement("span",{className:"bold"},l.trialJobIdList.join(", ")),".",n.createElement("div",{className:"line-height"},"TensorBoard id: ",n.createElement("span",{className:"bold"},l.id))),i.isError?n.createElement(x.c,null,n.createElement(b.K,{onClick:a,text:"Close"})):n.createElement(x.c,null,n.createElement(b.K,{onClick:function(){const e=window.location.hostname,t=window.location.protocol;window.open(`${t}//${e}:${l.port}`),a()},text:""+(r?"See tensorBoard":"Ok")})))};var J=function(e){let t=0;const{selectedRowIds:a,changeSelectTrialIds:l}=e,[r,i]=(0,n.useState)([]),[s,o]=(0,n.useState)(!1),[c,m]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)({}),[v,E]=(0,n.useState)({}),[y,S]=(0,n.useState)([0]);function N(){$.Z.get(`${F.zU}/tensorboard-tasks`).then((e=>{if(200===e.status&&(i(e.data),0!==e.data.length)){t=window.setTimeout(N,1e4);const e=y;e.push(t),S(e)}}))}function x(){y.forEach((e=>{window.clearTimeout(e)}))}const b=(0,d.DF)(a,r),C=(0,d.D8)(r,(function(){$.Z.delete(`${F.zU}/tensorboard-tasks`).then((e=>{200===e.status&&(i([]),x())}))}),(function(e){f(e),p(!0),m(!0)}));return(0,n.useEffect)((()=>(N(),function(){y.forEach((e=>{window.clearTimeout(e)}))})),[]),n.createElement(n.Fragment,null,n.createElement(g.a,{text:"TensorBoard",split:!0,splitButtonAriaLabel:"See 2 options","aria-roledescription":"split button",menuProps:C,onClick:()=>function(){const{selectedRowIds:t}=e;if(t.length>0){p(!1);const e=r.filter((e=>e.trialJobIdList.join(",")===t.join(",")));e.length>0?(o(!0),f(e[0]),m(!0)):($.Z.post(`${F.zU}/tensorboard`,{trials:t.join(",")}).then((e=>{200===e.status&&(f(e.data),x(),N(),E({isError:!1,message:""}),m(!0))})).catch((e=>{e.response&&E({isError:!0,message:e.response.data.error||"Failed to start tensorBoard!"}),m(!0)})),o(!1))}else alert("Please select trials first!")}(),disabled:b}),0!==r.length?n.createElement("span",{className:"circle"},r.length):null,c&&n.createElement(W,{isReaptedStartTensorboard:s,isShowTensorboardDetail:u,errorMessage:v,item:h,onHideDialog:()=>{m(!1),l()}}))},_=a(81042),Z=a(72496),B=a(41188);const H=(0,B.ZC)({menu:{textAlign:"center",maxWidth:600,selectors:{".ms-ContextualMenu-item":{height:"auto"}}},item:{display:"inline-block",width:40,height:40,lineHeight:40,textAlign:"center",verticalAlign:"middle",marginBottom:8,cursor:"pointer",selectors:{"&:hover":{backgroundColor:"#eaeaea"}}},categoriesList:{margin:0,padding:0,listStyleType:"none"},button:{width:"40%",margin:"2%"}});function j(e){return"StatusNNI"===e?F.S3.map((e=>({key:e,text:e}))):s.O.searchSpace[e]._value.map((e=>({key:e.toString(),text:e.toString()})))}const q=(e,t,a)=>{const n=((e,t)=>{const a=[],n=JSON.parse(JSON.stringify(e));return n.forEach((e=>{"number"===t.get(e.name)&&(!0===e.isChoice?(e.choice.forEach((e=>{a.push(JSON.parse(e))})),e.choice=a):(e.value1=JSON.parse(e.value1),""!==e.value2&&(e.value2=JSON.parse(e.value2))))})),n})(t,a);return n.forEach((t=>{if("Trial id"===t.name)e=e.filter((e=>e.id.toUpperCase().includes(t.value1.toUpperCase())));else if("Trial No."===t.name)e=e.filter((e=>e.sequenceId.toString()===t.value1));else if("StatusNNI"===t.name)e=V(e,t,"status");else if("Default metric"===t.name)"="===t.operator?e=e.filter((e=>e.latestAccuracy===JSON.parse(t.value1))):">"===t.operator?e=e.filter((e=>e.latestAccuracy>JSON.parse(t.value1))):"<"===t.operator?e=e.filter((e=>e.latestAccuracy<JSON.parse(t.value1))):"between"===t.operator&&(e=e.filter((e=>e.latestAccuracy>JSON.parse(t.value1)&&e.latestAccuracy<JSON.parse(t.value2))));else{const a=`space/${t.name}`;e=!0===t.isChoice?V(e,t,t.name):"="===t.operator?e.filter((e=>e[a]===t.value1)):">"===t.operator?e.filter((e=>e[a]>t.value1)):"<"===t.operator?e.filter((e=>e[a]<t.value1)):"between"===t.operator?e.filter((e=>e[a]>t.value1&&e[a]<t.value2)):e.filter((e=>e[a]!==t.value1))}})),e};function G(e,t,a){const n=[],l="status"===a?"status":`space/${a}`;return e.forEach((e=>{t.forEach((t=>{e[l]===t&&n.push(e)}))})),n}function V(e,t,a){if("="===t.operator)return G(e,t.choice,a);{let n;return n="status"===a?F.S3.filter((e=>!new Set(t.choice).has(e))):s.O.searchSpace[a]._value.filter((e=>!new Set(t.choice).has(e))),G(e,n,a)}}function U(e){let t="";return e.forEach((e=>{const a="StatusNNI"===e.name?"Status":e.name;!1===e.isChoice?"Trial id"===e.name||"Trial No."===e.name?t+=`${e.name}:${e.value1}; `:["=","\u2260",">","<"].includes(e.operator)?t+=`${a}${"="===e.operator?":":e.operator}${e.value1}; `:t+=`${a}:[${e.value1},${e.value2}]; `:t+=`${a}${"="===e.operator?":":"\u2260"}[${[...e.choice]}]; `})),t}function Y(e){let t=!1;return"StatusNNI"===e&&(t=!0),e in s.O.searchSpace&&(t="choice"===s.O.searchSpace[e]._type),t}var X=a(79267);var Q=function(e){const{parameter:t,searchFilter:a,dismiss:l,changeSearchFilterList:r,setSearchInputVal:c}=e,{updateDetailPage:m}=(0,n.useContext)(o.Il),d="StatusNNI"===t||"choice"===s.O.searchSpace[t]._type,u=d?["=","\u2260"]:["between",">","<","=","\u2260"],p=function(){const e=[];if(a.length>0){const n=a.find((e=>e.name===t));void 0!==n?e.push(n.operator,n.value1.toString(),n.value2.toString(),n.choice.toString().split(",")):e.push(""+(d?"=":"between"),"","",[])}else e.push(""+(d?"=":"between"),"","",[]);return e}(),[g,f]=(0,n.useState)(p[0]),[v,E]=(0,n.useState)(p[1]),[y,S]=(0,n.useState)(p[2]),[N,x]=(0,n.useState)(p[3]);function C(e){E(e.target.value)}function k(){return""===y&&"between"===g?s.O.searchSpace[t]._value[1].toString():y}return n.createElement(i.K,{horizontal:!0,className:"filterConditions",tokens:X.O4},n.createElement(h.L,{selectedKey:g,options:u.map((e=>({key:e,text:e}))),onChange:function(e,t){void 0!==t&&f(t.key.toString())},className:"btn-vertical-middle",styles:{root:{width:100}}}),d?n.createElement(h.L,{selectedKeys:N,multiSelect:!0,options:j(t),onChange:function(e,t){if(void 0!==t){const e=t.selected?[...N,t.key]:N.filter((e=>e!==t.key));x(e)}},className:"btn-vertical-middle",styles:{root:{width:190}}}):n.createElement(n.Fragment,null,"between"===g?n.createElement("div",null,n.createElement("input",{type:"text",className:"input input-padding",onChange:C,value:v}),n.createElement("span",{className:"and"},"and"),n.createElement("input",{type:"text",className:"input input-padding",onChange:function(e){S(e.target.value)},value:y})):n.createElement("input",{type:"text",className:"input input-padding",onChange:C,value:v})),n.createElement(b.K,{text:"Apply",className:"btn-vertical-middle",onClick:function(){if(!1===d&&""===v)return void alert("Please input related value!");if(v.match(/[a-zA-Z]/)||y.match(/[a-zA-Z]/))return void alert("Please input a number!");let e=JSON.parse(JSON.stringify(a));e.filter((e=>e.name===t)).length>0?d&&0!==N.length||!1===d?e.forEach((e=>{e.name===t&&(e.operator=g,e.value1=v,e.value2=k(),e.choice=N,e.isChoice=!!d)})):e=e.filter((e=>e.name!==t)):(d&&0!==N.length||!1===d)&&e.push({name:t,operator:g,value1:v,value2:k(),choice:N,isChoice:!!d}),c(U(e)),r(e),m(),l()}}))};var ee=function(e){const{updateDetailPage:t}=(0,n.useContext)(o.Il),{searchName:a,searchFilter:l,dismiss:r,changeSearchFilterList:s,setSearchInputVal:c}=e,[m,d]=(0,n.useState)(function(){let e="";const t=l.find((e=>e.name===a));void 0!==t&&(e=t.value1);return e}());return n.createElement(i.K,{horizontal:!0,className:"filterConditions",tokens:X.O4},n.createElement("span",null,"Trial id"===a?"Includes":"Equals to"),n.createElement("input",{type:"text",className:"input input-padding",onChange:function(e){d(e.target.value)},value:m}),n.createElement(b.K,{text:"Apply",className:"btn-vertical-middle",onClick:function(){const{searchFilter:n}=e,l=JSON.parse(JSON.stringify(n)),i=l.filter((e=>e.name===a));""!==m?(i.length>0?l.forEach((e=>{e.name===a&&(e.value1=m,e.isChoice=!1)})):l.push({name:a,value1:m,isChoice:!1}),c(U(l)),s(l),t(),r()):alert("Please input related value!")}}))};var te=function(e){const{parameter:t,searchFilter:a,dismiss:l,changeSearchFilterList:r,setSearchInputVal:c}=e,{updateDetailPage:m}=(0,n.useContext)(o.Il),d=function(){const e=[];if(a.length>0){const n=a.find((e=>e.name===t));void 0!==n?e.push(n.operator,n.value1.toString(),n.value2.toString()):e.push("between","","",[])}else e.push("between","","",[]);return e}(),[u,p]=(0,n.useState)(d[0]),[g,f]=(0,n.useState)(d[1]),[v,E]=(0,n.useState)(d[2]);function y(e){f(e.target.value)}return n.createElement(i.K,{horizontal:!0,className:"filterConditions",tokens:X.O4},n.createElement(h.L,{selectedKey:u,options:["between",">","<","="].map((e=>({key:e,text:e}))),onChange:function(e,t){void 0!==t&&p(t.key.toString())},className:"btn-vertical-middle",styles:{root:{width:100}}}),"between"===u?n.createElement("div",null,n.createElement("input",{type:"text",className:"input input-padding",onChange:y,value:g}),n.createElement("span",{className:"and"},"and"),n.createElement("input",{type:"text",className:"input input-padding",onChange:function(e){E(e.target.value)},value:v})):n.createElement("input",{type:"text",className:"input input-padding",onChange:y,value:g}),n.createElement(b.K,{text:"Apply",className:"btn-vertical-middle",onClick:function(){if(""===g)return void alert("Please input related value!");if(g.match(/[a-zA-Z]/)||v.match(/[a-zA-Z]/))return void alert("Please input a number!");let e=JSON.parse(JSON.stringify(a));e.filter((e=>e.name===t)).length>0?e=e.filter((e=>e.name!==t)):e.push({name:t,operator:u,value1:g,value2:""===v&&"between"===u?String(s.O.searchSpace[t]._value[1]):v,isChoice:!1}),c(U(e)),r(e),m(),l()}}))};var ae=function(e){const{searchFilter:t,changeSearchFilterList:a}=e,{updateDetailPage:l}=(0,n.useContext)(o.Il),[r,c]=(0,n.useState)(""),m=function(e){const t=[];return e.unshift("StatusNNI"),["Trial id","Trial No."].forEach((e=>{t.push({key:e,text:e,subMenuProps:{items:[{key:e,text:e,onRender:p.bind(e)}]}})})),e.forEach((e=>{t.push({key:e,text:"StatusNNI"===e?"Status":e,subMenuProps:{items:[{key:e,text:e,onRender:d.bind(e)}]}})})),t.push({key:"Default metric",text:"Default metric",subMenuProps:{items:[{key:"Default metric",text:"Default metric",onRender:u.bind("Default metric")}]}}),{shouldFocusOnMount:!0,directionalHint:_.b.bottomLeftEdge,className:H.menu,items:t}}(s.O.isNestedExp()?[]:Object.keys(s.O.searchSpace));function d(e,r){return n.createElement(Q,{parameter:e.text??"",searchFilter:t,changeSearchFilterList:a,updatePage:l,setSearchInputVal:c,dismiss:r})}function u(e,r){return n.createElement(te,{parameter:e.text??"",searchFilter:t,changeSearchFilterList:a,updatePage:l,setSearchInputVal:c,dismiss:r})}function p(e,l){return n.createElement(ee,{searchName:e.text??"",searchFilter:t,changeSearchFilterList:a,setSearchInputVal:c,dismiss:l})}function h(e){a(e),l()}function f(e){const t=e.trim().slice(1,e.trim().length-1),a=[];if(t.includes(",")){return t.split(",").forEach((e=>{""!==e&&a.push(e)})),a}return""===t?a:[t]}function v(){if(/`~!@#$%^&*()+?"{}.'/im.test(r)||/\xb7\uff01#\uffe5\uff08\u2014\u2014\uff09\uff1a\uff1b\u201c\u201d\u2018\u3001\uff0c|\u300a\u3002\u300b\uff1f\u3001\u3010\u3011[\]]/im.test(r))return void alert("Please delete special characters in the conditions!");const e=[],t=r.trim();if(t.includes(">")||t.includes("<")||t.includes(":")||t.includes("\u2260")){r.trim().split(";").forEach((t=>{if(!((t=t.trim()).endsWith(":")||t.endsWith("<")||t.endsWith(">")||t.endsWith("\u2260"))){let a=[];if(t.includes(">")||t.includes("<")){const n=!0===t.includes(">")?">":"<";a=t.trim().split(n),e.push({name:a[0],operator:n,value1:a[1].trim(),value2:"",choice:[],isChoice:!1})}else if(t.includes("\u2260")){a=t.trim().split("\u2260");const n="Status"===a[0]?"StatusNNI":a[0],l=Y(n);e.push({name:n,operator:"\u2260",value1:l?"":JSON.parse(a[1].trim()),value2:"",choice:l?f(a[1]):[],isChoice:!!l})}else{if(!t.includes(":"))return;{a=t.trim().split(":");const n="Status"===a[0]?"StatusNNI":a[0],l=Y(n);!0===!!(a.length>1&&(a[1].includes("[")||a[1].includes("]")))?!0===l?e.push({name:n,operator:"=",value1:"",value2:"",choice:f(a[1]),isChoice:!0}):e.push({name:a[0],operator:"between",value1:JSON.parse(a[1].trim())[0],value2:JSON.parse(a[1].trim())[1],choice:[],isChoice:!1}):e.push({name:a[0],operator:"=",value1:a[1].trim(),value2:"",choice:[],isChoice:!1})}}}}))}else{/^[0-9]+.?[0-9]*/.test(t)?e.push({name:"Trial No.",value1:t,isChoice:!1}):e.push({name:"Trial id",value1:t,isChoice:!1})}h(e)}function E(){h([])}return n.createElement(i.K,{horizontal:!0},n.createElement(g.a,{text:"Filter",menuProps:m}),n.createElement(Z.R,{styles:{root:{width:400}},placeholder:"Search",onChange:function(e,t){c(t)},value:r,onSearch:v,onEscape:E,onClear:E}),n.createElement(b.K,{text:"Search",onClick:v}))},ne=a(93711),le=a(59355),re=a(58664),ie=a(41218);const se=(0,B.gh)(),oe=(0,B.ZC)({container:{display:"flex",flexFlow:"column nowrap",alignItems:"stretch"},header:[se.fonts.xLargePlus,{flex:"1 1 auto",borderTop:`4px solid ${se.palette.themePrimary}`,color:se.palette.neutralPrimary,display:"flex",fontSize:B.TS.xLarge,alignItems:"center",fontWeight:B.lq.semibold,padding:"12px 12px 14px 24px"}],body:{flex:"4 4 auto",padding:"0 24px 24px 24px",overflowY:"hidden",selectors:{p:{margin:"14px 0"},"p:first-child":{marginTop:0},"p:last-child":{marginBottom:0}}}}),ce=(0,B.ZC)({root:{color:se.palette.neutralPrimary,marginLeft:"auto",marginTop:"4px",marginRight:"2px"},rootHovered:{color:se.palette.neutralDark}});const me={moveMenuItemText:"Move",closeMenuItemText:"Close",menu:le.r};function de(e,t){const a=[];for(const n of e.intermediates){if(void 0===n)break;const e=(0,d.Ti)(n.data);"object"===typeof e?a.push(e[t]):a.push(e)}return a}var ue=function(e){const{trials:t,title:a}=e,l=t.find((e=>e.intermediates.length>0)),r=(0,d.g7)(void 0===l?t[0]:l),[o,c]=(0,n.useState)(r.length>0?r[0]:"default"),u=t.find((e=>"RUNNING"===e.status)),p=void 0!==u?u.intermediates.length:-1;function g(){const e=s.F.inferredSearchSpace(s.O.searchSpaceNew),a=e=>new Map(Array.from(e).map((([e,t])=>[e.baseName,t])));return t.map((t=>({id:t.id,sequenceId:t.sequenceId,duration:(0,d.BG)(t.duration),parameters:a(t.parameters(e)),metrics:a(t.metrics(s.F.inferredMetricSpace())),intermediates:de(t,o)})))}const[f,v]=(0,n.useState)(g());function E(e,t,a,l,r){return n.createElement("tr",{key:e},n.createElement("td",{className:"column"},t),l.map((e=>n.createElement("td",{className:a,key:e.id},r(e)||"--"))))}function y(e){const t=[];for(const a of e[0].keys()){let n=!0;for(const t of e)if(!Array.from(t.keys()).includes(a)){n=!1;break}n&&t.push(a)}return t}(0,n.useEffect)((()=>{v(g())}),[o,p]);const S=()=>{const{title:t,changeSelectTrialIds:a,onHideDialog:n}=e;"Compare trials"===t&&a(),n()};return n.createElement(re.u,{isOpen:!0,containerClassName:oe.container,className:"compare-modal",allowTouchBodyScroll:!0,dragOptions:me,onDismiss:S},n.createElement("div",null,n.createElement("div",{className:oe.header},n.createElement("span",null,a),n.createElement(ie.h,{styles:ce,iconProps:{iconName:"Cancel"},ariaLabel:"Close popup modal",onClick:S})),r.length>1||1===r.length&&"default"!==r[0]?n.createElement(i.K,{horizontalAlign:"end",className:"selectKeys"},n.createElement(h.L,{className:"select",selectedKey:o,options:r.map(((e,t)=>({key:e,text:r[t]}))),onChange:(e,t)=>{void 0!==t&&c(t.text)}})):null,n.createElement(i.K,{className:"compare-modal-intermediate"},function(e){const t=Math.max(...e.map((e=>e.intermediates.length))),a=Array(t).fill(0).map(((e,t)=>t+1)),l=e.map((e=>({name:e.id,data:e.intermediates,type:"line"}))),r=l.map((e=>e.name)),i={tooltip:{trigger:"item",enterable:!0,confine:!0,formatter:t=>{const a=e.find((e=>e.id===t.seriesName));return l=a,r=t.data,(0,ne.renderToString)(n.createElement("div",{className:"tooldetailAccuracy"},n.createElement("div",{className:"main"},n.createElement("div",null,"Trial No.: ",l.sequenceId),n.createElement("div",null,"Trial ID: ",l.id),n.createElement("div",null,"Intermediate metric: ",r))));var l,r}},grid:{left:"5%",top:40,containLabel:!0},legend:{type:"scroll",right:40,left:r.length>6?"15%":null,data:r},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value",name:"Metric",scale:!0},series:l};return n.createElement("div",{className:"graph"},n.createElement(m.Z,{option:i,style:{width:"100%",height:418,margin:"0 auto"},notMerge:!0}))}(f),n.createElement(i.K,{className:"compare-yAxis fontColor333"},"# Intermediate result")),"Compare trials"===a&&n.createElement(i.K,null,function(e){const t=window.innerWidth;let a="";a=t>1200?e.length>3?"flex":"":t<700?e.length>1?"flex":"":e.length>2?"flex":"";const l=y(e.map((e=>e.parameters))),r=y(e.map((e=>e.metrics)));return n.createElement("table",{className:`compare-modal-table ${a} fontColor333`},n.createElement("tbody",null,E("id","ID","value idList",e,(e=>e.id)),E("trialnum","Trial No.","value",e,(e=>e.sequenceId.toString())),E("duration","Duration","value",e,(e=>e.duration)),l.map((t=>E(`space_${t}`,t,"value",e,(e=>e.parameters.get(t))))),void 0!==r?r.map((t=>E(`metrics_${t}`,`Metric: ${t}`,"value",e,(e=>e.metrics.get(t))))):null))}(f))))},pe=a(39318),he=a(104);var ge=function(e){const{onHideDialog:t,trialId:a,isError:l}=e,r={type:S.i.normal,title:"Kill job"};return n.createElement(y.V,{hidden:!1,dialogContentProps:r,modalProps:{className:"dialog"}},l.isError?n.createElement("div",null,n.createElement("div",null,"Trial ",a," kill failed!"),n.createElement("span",null,"Error message: ",l.message)):n.createElement("div",null,"Trial ",n.createElement("span",{className:"bold"},a)," had been killed successfully."),n.createElement(x.c,null,n.createElement(b.K,{onClick:t,text:"Close"})))},fe=a(31520);var ve=function(e){const t=(0,n.useRef)(null),{startTimer:a,closeTimer:l,interval:r,refreshDetailTable:s}=(0,n.useContext)(o.Il),{trialId:c}=e,[m,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)({isError:!1,message:""}),v=()=>{d(!1)};return n.createElement("div",null,n.createElement("div",{className:fe.W.buttonArea,ref:t},n.createElement(b.K,{className:"detail-button-operation",onClick:e=>{e.preventDefault(),e.stopPropagation(),d(!0)},title:"kill"},z.IN)),m?n.createElement("div",null,n.createElement(pe.y,{role:"alertdialog",className:fe.W.callout,gapSpace:0,target:t,onDismiss:v,setInitialFocus:!0},n.createElement("div",{className:`${fe.W.header} font`},n.createElement("p",{className:`${fe.W.title} color333`},"Kill trial")),n.createElement("div",{className:`${fe.W.inner} font`},n.createElement("div",null,n.createElement("p",{className:`${fe.W.subtext} color333`},"Are you sure to cancel this trial?"))),n.createElement(he.k,null,n.createElement(i.K,{className:fe.W.buttons,tokens:X.O4,horizontal:!0},n.createElement(g.a,{onClick:v},"No"),n.createElement(b.K,{onClick:()=>{var t;d(!1),t=e.trialId,0!==r&&l(),(0,$.Z)(`${F.zU}/trial-jobs/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((e=>{200===e.status?(p(!0),f({isError:!1,message:""})):(p(!0),f({isError:!1,message:"fail to cancel the job"}))})).catch((e=>{e.response?f({isError:!0,message:e.response.data.error||"Fail to cancel the job"}):f({isError:!0,message:"500 error, fail to cancel the job"}),p(!0)}))}},"Yes"))))):null,u&&n.createElement(ge,{trialId:c,isError:h,onHideDialog:async()=>{p(!1),await s(),0!==r&&a()}}))},Ee=a(70572),ye=a(3813);a(32993);var Se=e=>{const{detailsProps:t,isExpand:a}=e;return n.createElement("div",null,n.createElement(Ee.X,t),a&&n.createElement(ye.Z,{trialId:t.item.id}))},Ne=a(59537),xe=a(31850),be=a.n(xe);const Ce={childrenGap:20,padding:10};function ke(e,t,a){return-1===e?0:Math.min(t,Math.floor((a.length-1)/e))*e}function we(e,t,a){if(-1===e)return a;{const n=ke(e,t,a);return a.slice(n,n+e)}}var Ie=e=>{const[t,a]=(0,n.useState)(20),[l,r]=(0,n.useState)(0),[s,o]=(0,n.useState)([]),{items:c}=e;(0,n.useEffect)((()=>{o(we(t,l,c))}),[c,t]);const m={...e,items:s},d=c.length,u=-1===t?1:Math.ceil(d/t);return n.createElement("div",null,n.createElement(Ne.W,m),n.createElement(i.K,{horizontal:!0,horizontalAlign:"end",verticalAlign:"baseline",styles:{root:{padding:10}},tokens:Ce},n.createElement(h.L,{selectedKey:t,options:[{key:10,text:"10 items per page"},{key:20,text:"20 items per page"},{key:50,text:"50 items per page"},{key:-1,text:"All items"}],onChange:((e,n)=>{if(void 0!==n){const e=ke(t,l,c),i=n.key,s=Math.floor(e/t);a(i),r(s),o(we(t,l,c))}}).bind(void 0),styles:{dropdown:{width:150}}}),n.createElement(be(),{previousLabel:n.createElement(A.J,{"aria-hidden":!0,iconName:"ChevronLeft"}),nextLabel:n.createElement(A.J,{"aria-hidden":!0,iconName:"ChevronRight"}),breakLabel:"...",breakClassName:"break",pageCount:u,marginPagesDisplayed:2,pageRangeDisplayed:2,onPageChange:(e=>{r(e.selected),o(we(t,e.selected,c))}).bind(void 0),containerClassName:0===d?"pagination hidden":"pagination",disableInitialCallback:!1,activeClassName:"active"})))},Te=a(7691),Oe=a(28622);a(91643),a(99058),a(97538);const Me=["sequenceId","id","duration","status","latestAccuracy"],De=[{name:"sequenceId",value:[140,250]},{name:"id",value:[145,270]},{name:"duration",value:[163,296]},{name:"status",value:[165,310]},{name:"latestAccuracy",value:[180,306]}];var Ke=e=>{const{tableSource:t}=e,{expandRowIDsDetailTable:a,changeExpandRowIDsDetailTable:l,selectedRowIds:r,changeSelectedRowIds:c}=(0,n.useContext)(o.Il),[m,u]=(0,n.useState)(null!==localStorage.getItem(`${s.O.profile.id}_columns`)&&null!==v(`${s.O.profile.id}_columns`)?JSON.parse(v(`${s.O.profile.id}_columns`)):Me),[p,h]=(0,n.useState)([]),[f,E]=(0,n.useState)(!1),[y,S]=(0,n.useState)(!1),[x,w]=(0,n.useState)([]),[I,T]=(0,n.useState)(void 0),[O,M]=(0,n.useState)({field:"",isDescend:!0}),[D,K]=(0,n.useState)([]),P=(0,d.tr)(),[$,L]=(0,n.useState)([]),F=(e,t)=>{const a=!p.slice().filter((e=>t.key===e.key))[0].isSortedDescending;M({field:t.key,isDescend:a})},W=()=>{c([])},_=e=>{const a=!["RUNNING","UNKNOWN"].includes(e.status),l=["DONE","ERROR","STOPPED","VIEWED"].includes(s.O.status);return n.createElement(i.K,{className:"detail-button",horizontal:!0},n.createElement(b.K,{className:"detail-button-operation",title:"Intermediate",onClick:()=>{const a=t.find((t=>t.id===e.id));w([a])}},z.wW),a?n.createElement(b.K,{className:"detail-button-operation",disabled:!0,title:"kill"},z.IN):n.createElement(ve,{trialId:e.id}),n.createElement(b.K,{className:"detail-button-operation",title:"Customized trial",onClick:()=>{T(e.id)},disabled:l},z.JG))},Z=()=>{let e=(e=>{const t=s.F.inferredSearchSpace(s.O.searchSpaceNew),n=s.F.inferredMetricSpace(),l=e.map((e=>{const l=e.tableRecord;l._checked=!!r.includes(e.id),l._expandDetails=a.has(e.id);for(const[a,n]of e.parameters(t))l[`space/${a.baseName}`]=n;for(const[t,a]of e.metrics(n))l[`metric/${t.baseName}`]=a;return l}));return""!==O.field?(0,d.Lc)(l,O.field,O.isDescend):l})(t);if(D.length>0&&(e=q(e,D,P)),e.length>0){const t=(e=>{const t=[{name:"",key:"_selected",fieldName:"selected",minWidth:20,maxWidth:20,isResizable:!0,className:"detail-table",onRender:e=>n.createElement(N.X,{label:void 0,checked:e._checked,className:"detail-check",onChange:(t,a)=>{let n=r;!1===a?n=n.filter((t=>t!==e.id)):n.push(e.id),c(n)}})},{key:"_expand",name:"",onRender:e=>n.createElement(A.J,{"aria-hidden":!0,iconName:"ChevronRight",className:"cursor bold positionTop",styles:{root:{transition:"all 0.2s",transform:`rotate(${a.has(e.id)?90:0}deg)`}},onClick:t=>{t.stopPropagation(),l(e.id)},onMouseDown:e=>{e.stopPropagation()},onMouseUp:e=>{e.stopPropagation()}}),fieldName:"expand",isResizable:!1,minWidth:20,maxWidth:20}];for(const a of Object.keys(e[0])){if("metric/default"===a)continue;const e=(0,d.mn)(a);t.push({name:e,key:a,fieldName:a,minWidth:void 0!==De.find((e=>e.name===a))?De.find((e=>e.name===a)).value[0]:150,maxWidth:void 0!==De.find((e=>e.name===a))?De.find((e=>e.name===a)).value[1]:250,isResizable:!0,onColumnClick:F,..."status"===a&&{onRender:e=>n.createElement("span",{className:`${e.status} commonStyle`},e.status)},..."message"===a&&{onRender:e=>n.createElement(Oe.Z,{value:e.message})},...(a.startsWith("metric/")||a.startsWith("space/"))&&{onRender:e=>n.createElement(Oe.Z,{value:e[a]})},..."latestAccuracy"===a&&{onRender:e=>n.createElement(Oe.Z,{value:e._formattedLatestAccuracy})},...["startTime","endTime"].includes(a)&&{onRender:e=>n.createElement("span",null,(0,d.i$)(e[a],"--"))},..."duration"===a&&{onRender:e=>n.createElement("span",null,(0,d.BG)(e[a]))},..."id"===a&&{onRender:e=>n.createElement(i.K,{horizontal:!0,className:"idCopy"},n.createElement("div",null,e.id),n.createElement(Te.Z,{value:e.id}))}})}t.push({name:"Operation",key:"_operation",fieldName:"operation",minWidth:207,maxWidth:221,isResizable:!0,className:"detail-table",onRender:_});for(const a of t)a.key===O.field?(a.isSorted=!0,a.isSortedDescending=O.isDescend):(a.isSorted=!1,a.isSortedDescending=!0);return t})(e);h(t),L(e)}else h([]),L([])};return(0,n.useEffect)((()=>{Z()}),[t,r,D,O]),n.createElement("div",{id:"tableList"},n.createElement(i.K,{horizontal:!0,className:"panelTitle",style:{marginTop:10}},n.createElement("span",{style:{marginRight:12}},z.zF),n.createElement("span",{className:"fontColor333"},"Trial jobs")),n.createElement(i.K,{horizontal:!0,horizontalAlign:"space-between",className:"allList"},n.createElement(ae,{searchFilter:D,changeSearchFilterList:e=>{K(e)}}),n.createElement(i.K,{horizontal:!0,horizontalAlign:"end",tokens:k.w},n.createElement(g.a,{text:"Add/Remove columns",onClick:()=>{E(!0)}}),n.createElement(g.a,{text:"Compare",onClick:()=>{S(!0)},disabled:0===r.length}),y&&n.createElement(ue,{title:"Compare trials",trials:t.filter((e=>r.includes(e.id))),onHideDialog:()=>{S(!1)},changeSelectTrialIds:W}),n.createElement(J,{selectedRowIds:r,changeSelectTrialIds:W}))),p&&$&&n.createElement(Ie,{columns:p.filter((e=>m.includes(e.key)||["_expand","_operation","_selected"].includes(e.key))),items:$,compact:!0,selectionMode:0,selectionPreservedOnEmptyClick:!0,onRenderRow:e=>n.createElement(Se,{detailsProps:e,isExpand:e.item._expandDetails})}),0!==x.length&&n.createElement(ue,{title:"Intermediate results",trials:x,onHideDialog:()=>{w([])}}),f&&n.createElement(C,{selectedColumns:m,allColumns:p.filter((e=>!e.key.startsWith("_"))).map((e=>({key:e.key,name:e.name}))),onSelectedChange:e=>{u(e)},onHideDialog:()=>{E(!1)},whichComponent:"table"}),n.createElement(R,{visible:void 0!==I,copyTrialId:I||"",closeCustomizeModal:()=>{T(void 0)}}))};a(35329),a(1696),a(16668);var Pe=()=>{const{changeExpandRowIDs:e}=(0,n.useContext)(o.Il),t=s.F.toArray(),a=s.F.succeededTrials(),m=s.F.succeededTrials().map((e=>e.id));return n.createElement(n.Fragment,null,n.createElement("div",{className:"trial",id:"tabsty"},n.createElement(l.o,{className:"detail-title"},n.createElement(r.M,{headerText:"Default metric",itemIcon:"HomeGroup"},n.createElement(i.K,{className:"graph"},n.createElement(c.Z,{trialIds:m,hasBestCurve:!0,chartHeight:402,changeExpandRowIDs:e}))),n.createElement(r.M,{headerText:"Hyper-parameter",itemIcon:"Equalizer"},n.createElement(i.K,{className:"graph"},n.createElement(M,{trials:a,searchSpace:s.O.searchSpaceNew}))),n.createElement(r.M,{headerText:"Duration",itemIcon:"BarChartHorizontal"},n.createElement(u,{source:s.F.notWaittingTrials()})),n.createElement(r.M,{headerText:"Intermediate result",itemIcon:"StackedLineChart"},n.createElement(P,{source:s.F.allTrialsIntermediateChart()})))),n.createElement("div",{className:"detailTable",style:{marginTop:10}},n.createElement(Ke,{tableSource:t})))}},33047:function(e,t,a){var n=a(15201),l=a(5975),r=a(83579),i=a(73407),s=a(60006),o=a(97704),c=a(66904),m=a(75091),d=a(79267);a(83963),a(99058),a(97538);const u={grid:{left:"8%"},xAxis:{name:"Trial",type:"category"},yAxis:{name:"Default metric",type:"value"}},p=e=>void 0===e||isNaN(e)||!isFinite(e)?0:e,h=(e,t,a,n,l)=>{const r=c.F.getTrials(e).filter((e=>e.sortable));if(0===r.length)return u;const i=((e,t)=>({grid:{left:"8%"},tooltip:{trigger:"item",enterable:e,confine:!0,formatter:e=>`\n                <div class="tooldetailAccuracy">\n                    <div class='trial-No'>No. ${e.data[0]}</div>\n                    <div class='main'>\n                    <div><span>Trial ID: </span>${e.data[2]}</div>\n                    <div><span>${t}: </span>${e.data[1]}</div>\n                    <div><span>Parameters: </span><pre>${JSON.stringify((0,m.cJ)(e.data[3]),null,4)}</pre></div>\n                    <div>\n                </div>\n            `},dataZoom:[{type:"inside",yAxisIndex:[0],filterMode:"none",start:0,end:100}],xAxis:{name:"Trial",type:"category"},yAxis:{name:"Default metric",type:"value",scale:!0},series:void 0}))(t,a);return i.series=n?[f(r,a,l),g(r,a)]:[g(r,a)],i},g=(e,t)=>{let a;return a=e[0].accuracyNumberTypeDictKeys.length>1?e.map((e=>[e.sequenceId,void 0===e.acc?0:p(e.acc[t]),e.id,e.parameter])):e.map((e=>[e.sequenceId,p(e.accuracy),e.id,e.parameter])),{symbolSize:6,type:"scatter",data:a}},f=(e,t,a)=>{let n=e[0];const l=[[n.sequenceId,void 0===n.acc?0:p(n.acc[t]),n.id,n.parameter]];for(let r=1;r<e.length;r++){const i=e[r],s=i.acc[t]-n.acc[t];("Minimize"===a?s<0:s>0)?(l.push([i.sequenceId,void 0===i.acc?0:p(i.acc[t]),n.id,i.parameter]),n=i):l.push([i.sequenceId,void 0===n.acc?0:p(n.acc[t]),n.id,i.parameter])}return{type:"line",lineStyle:{color:"#FF6600"},data:l}};t.Z=e=>{const{hasBestCurve:t,trialIds:a,changeExpandRowIDs:m,chartHeight:p}=e,{metricGraphMode:g,changeMetricGraphMode:f}=(0,n.useContext)(o.Il),[v,E]=(0,n.useState)(!1),[y,S]=(0,n.useState)(u),[N,x]=(0,n.useState)("default");(0,n.useEffect)((()=>{S(h(a,t,N,v,g))}),[a.length,v,N,g]);const b=e=>{t||m(e.data[2],"chart")},C=c.F.getTrials(a).filter((e=>e.sortable));let k=[];C.length>0&&(k=C[0].accuracyNumberTypeDictKeys);const w=n.useMemo((()=>n.createElement("div",{className:"default-metric-graph graph"},n.createElement(s.Z,{option:y,style:{width:"100%",height:p,margin:"0 auto"},theme:"nni_theme",lazyUpdate:!0,onEvents:{click:b}}),n.createElement("div",{className:"default-metric-noData fontColor333"},y===u?"No data":""))),[y]);return n.createElement("div",null,t&&n.createElement(l.K,{horizontal:!0,reversed:!0,tokens:d.s1,className:"default-metric"},n.createElement(r.Z,{label:"Optimization curve",inlineLabel:!0,onChange:(e,t)=>{E(t??!0)}}),n.createElement(i.L,{selectedKey:g,onChange:(e,t)=>{void 0!==t&&f(t.key.toString())},options:[{key:"Maximize",text:"Maximize"},{key:"Minimize",text:"Minimize"}],styles:{dropdown:{width:100}},className:"para-filter-percent"}),k.length>1&&n.createElement(i.L,{selectedKey:N,onChange:(e,t)=>{void 0!==t&&x(t.key.toString())},options:k.map((e=>({key:e,text:e}))),styles:{dropdown:{width:100}},className:"para-filter-percent"})),w)}},79267:function(e,t,a){a.d(t,{O4:function(){return n},s1:function(){return l},uI:function(){return r}});const n={childrenGap:10},l={childrenGap:15},r={root:{minWidth:400,height:56,display:"flex",verticalAlign:"center"}}},16668:function(){},18433:function(){},1696:function(){},35329:function(){},32993:function(){}}]);
//# sourceMappingURL=616.8c67a119.chunk.js.map