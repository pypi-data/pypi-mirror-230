(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4584:function(e,t,n){"use strict";n.d(t,{l:function(){return C}});var r=n(5893),o=n(8347),i=n(6265),s=n(7294),a=n(3935),c=n(1090),l=n(2525),u=n(5076),d=n(4751),f=n(5975),p=n(229),h=n(3234);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){},x=(0,l.ZC)({wrapper:{boxShadow:h.r.effects.elevation8,border:"1px solid ".concat(h.r.palette.neutralLight),background:"white",display:"flex !important",flexDirection:"column"},main:{flex:1,overflow:"hidden",cursor:"default"}}),g={root:{background:"white",paddingLeft:h.r.spacing.m,cursor:"move",borderBottom:"1px solid ".concat(h.r.palette.neutralLighter)}},y={root:b(b({},g.root),{},{width:"fit-content"})},j={root:{paddingRight:0}},w={width:"auto",height:"auto"},C=(0,s.memo)((function(e){var t,n,i,l,h=e.children,v=e.title,C=void 0===v?" ":v,k=e.docker,O=e.onClose,S=e.default,P=e.style,D=(e.width,(0,o.Z)(e,["children","title","docker","onClose","default","style","width"])),E=(0,s.useRef)(),I=(0,p.M)(),N=(0,s.useState)({x:null!==(t=null===S||void 0===S?void 0:S.x)&&void 0!==t?t:0,y:null!==(n=null===S||void 0===S?void 0:S.y)&&void 0!==n?n:0}),R=N[0],_=N[1],z=(0,s.useState)({width:null!==(i=null===S||void 0===S?void 0:S.width)&&void 0!==i?i:"auto",height:null!==(l=null===S||void 0===S?void 0:S.height)&&void 0!==l?l:"auto"}),A=z[0],T=z[1],L=(0,s.useRef)(R),M=(0,s.useState)(!1),q=M[0],K=M[1],Z=(0,s.useState)(!1),W=Z[0],B=Z[1],U=(0,s.useState)(!1),V=U[0],G=U[1],H=(0,s.useState)(),X=H[0],F=H[1],J=(0,s.useState)(P),$=J[0],Q=J[1],Y=(0,s.useCallback)((function(){return K((function(e){return!e}))}),[]),ee=(0,s.useCallback)((function(){return B((function(e){return!e}))}),[]);(0,s.useLayoutEffect)((function(){var e=document.getElementById(I);F(e.clientWidth+104),G(!0)}),[]),(0,s.useLayoutEffect)((function(){_(q?function(e){return L.current=e,{x:0,y:0}}:L.current)}),[q]),(0,s.useLayoutEffect)((function(){Q(q?b(b({},P),{},{position:"static",transform:"translate(0,0)"}):P)}),[q,P]);var te=(0,s.useCallback)((function(e,t){return _(t)}),[_]),ne=(0,s.useCallback)((function(e,t,n,r,o){T({width:n.clientWidth,height:"auto"}),_(o)}),[]),re=(0,s.useMemo)((function(){var e=[];return k&&e.push({key:"minimize",iconOnly:!0,iconProps:{iconName:q?"ChromeRestore":"ChromeMinimize"},onClick:Y}),e.push({key:"collapse",disabled:q,iconOnly:!0,iconProps:{iconName:W?"ChevronDownMed":"ChevronUpMed"},onClick:ee}),O&&e.push({id:C,key:"close",iconOnly:!0,iconProps:{iconName:"ChromeClose"},onClick:O}),e}),[k,q,W,C,O]),oe=(0,r.jsxs)(c.s,b(b({ref:E,className:x.wrapper,lockAspectRatio:!0,bounds:"parent",dragHandleClassName:"rnd-titlebar",minWidth:X,size:q?w:A,position:R,onDragStop:te,onResizeStop:ne,dragAxis:q?"x":"both",style:$},D),{},{children:[(0,r.jsxs)(u.K,{id:I,className:"rnd-titlebar",horizontal:!0,verticalAlign:"center",horizontalAlign:V?"space-between":void 0,styles:V?g:y,children:[(0,r.jsx)(d.x,{variant:"large",children:C}),(0,r.jsx)(f.X,{items:re,styles:j,onReduceData:m})]}),V&&(0,r.jsx)("div",{className:x.main,children:W||q||h})]}));return q&&k?(0,a.createPortal)(oe,k):oe}))},1229:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ae}});var r=n(5893),o=n(4121),i=n(6265),s=n(7294),a=n(5152),c=n(1163),l=n(5076),u=n(4751),d=n(19),f=n(2525),p=n(5554),h=n(4839),v=n(3234),b=n(9741),m=n(9236),x=n(3950),g=n(2927),y={padding:v.r.spacing.s1},j={iconName:"ChevronRight"},w={iconName:"ChevronLeft"},C={field:{width:48,textAlign:"center",outline:"none",borderRadius:2,MozAppearance:"textfield","::-webkit-outer-spin-button, ::-webkit-inner-spin-button":{WebkitAppearance:"none"}}},k={root:{paddingLeft:v.r.spacing.s1,paddingRight:v.r.spacing.s1}},O=(0,s.memo)((function(e){var t=e.min,n=e.max,o=e.value,i=e.onChange,a=(0,s.useState)(o),c=a[0],d=a[1],f=(0,s.useState)(o.toString()),p=f[0],h=f[1];(0,s.useEffect)((function(){d(o),h(o.toString())}),[o]);var v=(0,s.useCallback)((function(e,t){h(t)}),[]),O=(0,s.useCallback)((function(e){if("enter"===e.key.toLowerCase()){var t=e.currentTarget,n=Number(e.currentTarget.value),r=Number(t.min),o=Number(t.max);i(n<r?r:n>o?o:n)}}),[i]),S=(0,s.useCallback)((function(e){return d(e)}),[]),P=(0,s.useCallback)((function(e){return d((function(e){return i(e),e}))}),[i]),D=(0,s.useCallback)((function(){return i&&i(o-1)}),[i,o]),E=(0,s.useCallback)((function(){return i&&i(o+1)}),[i,o]);return(0,r.jsxs)(l.K,{grow:!0,horizontal:!0,disableShrink:!0,tokens:y,children:[(0,r.jsx)(b.v,{grow:1,children:(0,r.jsx)(m.i,{showValue:!1,min:t,max:n,value:c,onChange:S,onChanged:P})}),(0,r.jsxs)(l.K,{horizontal:!0,verticalAlign:"center",children:[(0,r.jsx)(x.h,{iconProps:w,disabled:t===o,onClick:D}),(0,r.jsx)(g.n,{styles:C,min:t,max:n,value:p,onChange:v,onKeyDown:O}),(0,r.jsx)(u.x,{variant:"large",styles:k,children:" / ".concat(n)}),(0,r.jsx)(x.h,{iconProps:j,disabled:n===o,onClick:E})]})]})})),S=n(2708),P=n(4671),D=n(8597),E=n(8172);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(0,E.MD)();var z,A=(0,P.Z)((0,D.$e)({objDict:{}},(z=function(e){return{set:e,loadObjects:function(t,n,r){e((function(e){var o={};for(var i in t)o[i]=t[i].map((function(e){var t=(0,S.UO)(e);return{path:e,url:"".concat(n,"/file?path=").concat(encodeURIComponent(e)),name:t,visible:!0,select:!1,color:(0,S.Lq)(t),preserved:!1}}));for(var s in e.objDict){var a,c=o[s]=o[s]||[],l=R(e.objDict[s]);try{var u=function(){var e=a.value,t=c.findIndex((function(t){return t.name===e.name}));-1===t?r&&c.unshift(N(N({},e),{},{preserved:!0})):c[t].visible=e.visible};for(l.s();!(a=l.n()).done;)u()}catch(d){l.e(d)}finally{l.f()}}e.objDict=o}))}}},function(e,t,n){return z((function(t){return e((0,E.ZP)(t))}),t,n)}))),T=A.getState(),L=function(e){return e.objDict},M=n(6233),q=n(2174),K=n(2871),Z=n(6160),W=n(1955);function B(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V={root:{padding:v.r.spacing.s1,height:"100%"}},G={root:{overflow:"auto"}},H=(0,M.NF)((function(e,t){return{root:{padding:v.r.spacing.s2},checkbox:{background:t?e:"white",borderColor:e,borderWidth:2}}})),X=(0,M.NF)((function(e){return{root:{padding:v.r.spacing.s2},checkbox:{background:e?"grey":"white",borderColor:"grey",borderWidth:2}}})),F=!1,J=new Set,$=new Map,Q=function(e){var t=(0,f.ZC)({input:{width:"20px",height:"20px",display:"none"},label:{"&::before":{content:'""',display:"inline-block",verticalAlign:"middle",width:"20px",height:"20px",borderRadius:"50%",border:"2px solid ".concat(e.color),boxSizing:"border-box",marginRight:"".concat(v.r.spacing.s1)}},labelAfter:{"&::before":{backgroundColor:"".concat(e.color),backgroundClip:"content-box",padding:"3px"}}}),n=e.type+e.index;return(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{checked:e.select,type:"radio",name:"group",className:t.input,id:n,onChange:function(t){F=!0,T.set((function(t){for(var n in t.objDict){var r,i=B(t.objDict[n].entries());try{for(i.s();!(r=i.n()).done;){var s=(0,o.Z)(r.value,2),a=s[0],c=s[1];n==e.type&&a==e.index?(c.visible=!0,c.select=!0,J.add(n+a)):(c.visible=!1,c.select=!1,J.delete(n+a))}}catch(l){i.e(l)}finally{i.f()}}}))}}),(0,r.jsx)("label",{className:"".concat(t.label," ").concat(e.select?t.labelAfter:""),htmlFor:n})]})},Y=(0,f.y0)({display:"flex",alignItems:"center"}),ee=function(){var e=J.values().next().value,t=e.match(/\d+/g)[0];return[e.slice(0,-t.length),t]},te=function(e){var t=e.label,n=e.type,o=(0,s.useState)(!0),i=o[0],a=o[1],c=A(L);$.set(n,1);return(0,s.useEffect)((function(){$.forEach((function(e,t){$.set(t,0)})),J.forEach((function(e){var t=e.match(/[a-z,_]+/g)[0];$.set(t,1)})),$.forEach((function(e,t){var n=document.getElementById("label"+t);n&&(0==e&&null!==n&&void 0!==n&&n.checked?n.click():1!=e||n.checked||n.click())}))}),[J.values()]),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(q._,{children:t}),(0,r.jsx)(K.X,{checked:i,styles:X(i),onChange:function(e,t){if(a(t),e.isTrusted)for(var r in c[n]){var o;if(c[n][r].visible!=t)null===(o=document.getElementById("checkbox-"+n+"-"+r))||void 0===o||o.click()}},id:"label"+n})]})},ne=function(e){return function(t,n){var i=t.visible,s=t.select,a=t.color,c=t.name;i&&J.add(e+n);return(0,r.jsxs)("div",{className:Y,children:[(0,r.jsx)(K.X,{checked:i,styles:H(a,i),onChange:function(t,r){if(e=t.target.id.split("-")[1],n=t.target.id.split("-")[2],T.set((function(t){t.objDict[e][n].visible=r})),r?J.add(e+n):J.delete(e+n),0==J.size)T.set((function(t){t.objDict[e][n].select=!1})),F=!1;else if(1==J.size){var i=J.values().next().value;document.getElementById(i).click()}else if(F){var s=ee(),a=(0,o.Z)(s,2),c=a[0],l=a[1];T.set((function(e){e.objDict[c][l].select=!1})),F=!1}},id:"checkbox-"+e+"-"+n}),(0,r.jsx)(Q,{name:c,color:a,type:e,index:n,select:s}),(0,r.jsx)("label",{children:c})]})}},re=ne("meshes"),oe=ne("point_clouds"),ie=ne("boxes"),se=ne("camera_trajectories"),ae=ne("lines"),ce=ne("voxels"),le=ne("spheres"),ue=ne("polargrid"),de=(0,s.memo)((function(e){var t=A(L),n=(0,s.useRef)(!0),i=e.frameIndex;(0,s.useEffect)((function(){J.clear()}),[i]);var a=(0,s.useCallback)((function(){if(n.current=!n.current,F){var e=ee(),t=(0,o.Z)(e,2),r=t[0],i=t[1];T.set((function(e){e.objDict[r][i].select=!1})),F=!1}T.set((function(e){for(var t in e.objDict){var r,i=B(e.objDict[t].entries());try{for(i.s();!(r=i.n()).done;){var s=(0,o.Z)(r.value,2),a=s[0];s[1].visible=n.current,n.current?J.add(t+a):J.delete(t+a)}}catch(c){i.e(c)}finally{i.f()}}}))}),[]),c=function(e){return!(!t[e]||0==t[e].length)};return(0,r.jsxs)(l.K,{styles:V,children:[(0,r.jsxs)(b.v,{grow:!0,styles:G,children:[c("meshes")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(te,{label:"Mesh",type:"meshes"}),(0,r.jsx)(Z.a,{items:t.meshes,onRenderCell:re,onShouldVirtualize:function(){return!1}})]}),c("point_clouds")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(te,{label:"Point Cloud",type:"point_clouds"}),(0,r.jsx)(Z.a,{items:t.point_clouds,onRenderCell:oe,onShouldVirtualize:function(){return!1}})]}),c("boxes")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(te,{label:"Box",type:"boxes"}),(0,r.jsx)(Z.a,{items:t.boxes,onRenderCell:ie,onShouldVirtualize:function(){return!1}})]}),c("camera_trajectories")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(te,{label:"Camera Trajectory",type:"camera_trajectories"}),(0,r.jsx)(Z.a,{items:t.camera_trajectories,onRenderCell:se,onShouldVirtualize:function(){return!1}})]}),c("lines")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(te,{label:"Line",type:"lines"}),(0,r.jsx)(Z.a,{items:t.lines,onRenderCell:ae,onShouldVirtualize:function(){return!1}})]}),c("voxels")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(te,{label:"Voxel",type:"voxels"}),(0,r.jsx)(Z.a,{items:t.voxels,onRenderCell:ce,onShouldVirtualize:function(){return!1}})]}),c("spheres")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(te,{label:"Sphere",type:"spheres"}),(0,r.jsx)(Z.a,{items:t.spheres,onRenderCell:le,onShouldVirtualize:function(){return!1}})]}),c("polargrid")&&(0,r.jsxs)("div",{children:[(0,r.jsx)(te,{label:"PolarGrid",type:"polargrid"}),(0,r.jsx)(Z.a,{items:t.polargrid,onRenderCell:ue,onShouldVirtualize:function(){return!1}})]})]}),(0,r.jsx)(W.a,{text:"Toggle All",onClick:a})]})})),fe=n(4584),pe=n(423),he=n(5172);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=(0,a.default)((function(){return n.e(862).then(n.bind(n,6862)).then((function(e){return e.Pivot}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[6862]},modules:["index.tsx -> @fluentui/react/lib/Pivot"]}}),xe=(0,a.default)((function(){return n.e(274).then(n.bind(n,8274))}),{ssr:!1,loadableGenerated:{webpack:function(){return[8274]},modules:["index.tsx -> @/components/react/play-button"]}}),ge=(0,a.default)((function(){return Promise.all([n.e(351),n.e(978),n.e(347)]).then(n.bind(n,2168))}),{ssr:!1,loadableGenerated:{webpack:function(){return[2168]},modules:["index.tsx -> @/components/canvas/canvas"]}}),ye=(0,a.default)((function(){return Promise.all([n.e(351),n.e(978),n.e(72),n.e(206)]).then(n.bind(n,3395))}),{ssr:!1,loadableGenerated:{webpack:function(){return[3395]},modules:["index.tsx -> @/components/canvas/scene"]}}),je=(0,a.default)((function(){return Promise.all([n.e(351),n.e(9),n.e(925)]).then(n.bind(n,6925))}),{ssr:!1,loadableGenerated:{webpack:function(){return[6925]},modules:["index.tsx -> @/components/canvas/correspondence"]}}),we={},Ce=function(e){var t=e.currentTarget;we.prevNode&&(we.prevNode.style.zIndex=we.prevNodeZIndex),we.prevNode=t,we.prevNodeZIndex=t.style.zIndex,t.style.zIndex="999"},ke=(0,s.memo)((function(){var e,t,n=(0,c.useRouter)(),i=n.query.tab||"3d",a=n.query.sequence,f=(0,s.useState)(0),b=f[0],m=f[1],x=(0,h.WQ)(),g=(0,h.WQ)(),y=(0,pe.J6)("".concat("","/all_sequences"),"GET","json",[]),j=a||y[0],w=j&&"".concat("","/all_scenes_in_sequence?sequence=").concat(encodeURIComponent(j)),C=(0,pe.J6)(w,"GET","json",[],(function(e){var t,n=null===(t=e.currentTarget.response)||void 0===t?void 0:t.length;n&&b>=n&&m(n-1)}));(0,pe.J6)(C[b]&&"".concat("","/files_in_scene?scene_path=").concat(encodeURIComponent(C[b])),"GET","json",{},(function(e){x.get("preserveItems");var t=x.get("preserveItems");T.loadObjects(e.currentTarget.response,"",t)}));var k=A(L),S=(0,s.useRef)(),P=(0,s.useRef)(),D=(0,s.useRef)();(0,h.M4)({preserveItems:{label:"preserve items",hint:"preserve items",value:!1}},{store:x},[]),(0,s.useEffect)((function(){var e=function(){for(var e=x.getData(),t=g.getData(),r="2d"===n.query.tab?be(be({},e),t):be(be({},t),e),i=0,s=Object.entries(r);i<s.length;i++){var a=(0,o.Z)(s[i],2),c=a[0],l=a[1];"value"in l&&localStorage.setItem(c,JSON.stringify(l.value))}};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]);var E=(0,s.useCallback)((function(e){var t={pathname:"/",query:a?{tab:e.props.itemKey,sequence:a}:{tab:e.props.itemKey}};n.push(t,t,{shallow:!0})}),[a]),I=(0,s.useCallback)((function(){return m((function(e){return e+1}))}),[]),N=(0,s.useCallback)((function(e){var t={pathname:"/",query:{tab:i,sequence:e.value}};n.push(t,t,{shallow:!0})}),[i,j]),R=y.map((function(e){return{label:e,value:e}}));(0,he.y)("d",(function(){m((function(e){return e<C.length-1?e+1:e}))}),[C]),(0,he.y)("a",(function(){m((function(e){return e>0?e-1:e}))}),[C]),(0,he.y)("s",(function(){for(var e=0;e<y.length&&j!=y[e];e++);e<y.length-1&&e++;var t={pathname:"/",query:{tab:i,sequence:y[e]}};n.push(t,t,{shallow:!0})}),[y,j]),(0,he.y)("w",(function(){for(var e=0;e<y.length&&j!=y[e];e++);e>0&&e--;var t={pathname:"/",query:{tab:i,sequence:y[e]}};n.push(t,t,{shallow:!0})}),[y,j]),(0,he.y)("r",(function(){m((function(e){return(e-1+C.length)%C.length})),m((function(e){return(e+1)%C.length}))}),[C]),(0,he.y)("q",(function(){m((function(e){return 0}))}),[C]),(0,he.y)("e",(function(){m((function(e){return C.length-1}))}),[C]);var _=(0,s.useState)(0),z=_[0],M=_[1],q=(0,s.useState)(0),K=q[0],Z=q[1];return(0,r.jsxs)(l.K,{styles:Se,children:[(0,r.jsxs)(l.K,{styles:Pe,horizontal:!0,children:[(0,r.jsx)(l.K,{styles:De,children:(0,r.jsx)(u.x,{variant:"xLargePlus",children:"Wis3D"})}),(0,r.jsxs)(me,{selectedKey:i,onLinkClick:E,headersOnly:!0,className:ze.pivot,children:[(0,r.jsx)(d.M,{headerText:"3D Objects",itemKey:"3d"}),(0,r.jsx)(d.M,{headerText:"Keypoint Correspondences",itemKey:"2d"})]}),(0,r.jsx)(p.ZP,{options:R,value:R.find((function(e){return e.value===j})),onChange:N,styles:{menu:function(e){return be(be({},e),{},{zIndex:9999,width:"max-content",height:"fit-content",minWidth:"100%",position:"absolute",right:0})}}})]}),(0,r.jsxs)(l.K,{horizontal:!0,grow:1,styles:Ie,children:[(0,r.jsxs)(l.K,{disableShrink:!0,styles:Ee,children:["3d"==i&&(0,r.jsx)(de,{frameIndex:b}),"2d"==i&&(0,r.jsx)(h.MT,{store:g,fill:!0,flat:!0,hideCopyButton:!0,titleBar:!1,theme:v.R})]}),(0,r.jsxs)(l.K,{grow:1,reversed:!0,styles:Re,children:[(0,r.jsxs)(l.K,{horizontal:!0,verticalAlign:"center",styles:Ne,children:[(0,r.jsx)(xe,{disabled:b===C.length-1,onUpdateFrame:I,store1:x,store2:g,currentStore:"3d"===i?x:g}),(0,r.jsx)(O,{min:0,max:C.length-1,value:b,onChange:m})]}),(0,r.jsxs)(l.K,{grow:1,disableShrink:!0,styles:_e,children:["3d"===i&&(0,r.jsx)(ge,{children:(0,r.jsx)(ye,{meshes:k.meshes,pointClouds:k.point_clouds,dofBoxes:k.boxes,cameraPoses:k.camera_trajectories,lines:k.lines,voxels:k.voxels,spheres:k.spheres,planes:k.planes,polargrid:k.polargrid,store:x})}),"2d"===i&&(null===(e=k.correspondences)||void 0===e?void 0:e[0])&&(0,r.jsx)(je,be(be({},k.correspondences[0]),{},{store:g}))]}),"3d"===i&&(null===(t=k.images)||void 0===t?void 0:t.map((function(e){return(0,r.jsx)(fe.l,{title:e.name,docker:S.current,default:Oe,onMouseDown:Ce,children:(0,r.jsx)("img",{src:e.url,className:ze.image})},e.name)})))]})]}),"3d"===i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:ze.controlsWrapper,ref:D,onMouseDown:function(){document.onmousemove=function(e){var t=D.current.firstChild;if(t.style.transform){var n=t.style.transform.split("(")[1].split(")")[0].split(","),r=parseInt(n[0])>0?0:parseInt(n[0]);r=r<-(document.body.offsetWidth-310)?-(document.body.offsetWidth-310):r;var o=parseInt(n[1])>-60?parseInt(n[1]):-60;o=o<document.body.offsetHeight-100?o:document.body.offsetHeight-100,t.style.transform="translate3d(".concat(r,"px, ").concat(o,"px, ").concat(n[2],")"),M(r),Z(o)}}},onMouseUp:function(){document.onmousemove=null,D.current.firstChild.style.transform="translate3d(".concat(z,"px, ").concat(K,"px, 0px)")},children:(0,r.jsx)(h.MT,{store:x,flat:!0,hideCopyButton:!0,theme:v.R,hidden:"3d"!==i})}),(0,r.jsx)("div",{ref:S,className:ze.imgDocker}),(0,r.jsx)("div",{id:"property-docker",ref:P,className:ze.propertyDocker})]})]})})),Oe={width:"25%"},Se={root:{width:"100vw",height:"100vh",overflow:"hidden"}},Pe={root:{padding:v.r.spacing.m,paddingBottom:0,borderBottom:"1px solid ".concat(v.r.palette.neutralLighter),justifyContent:"space-between"}},De={root:{width:284}},Ee={root:{width:300,borderRight:"1px solid ".concat(v.r.palette.neutralLighter)}},Ie={root:{overflow:"hidden"}},Ne={root:{paddingLeft:v.r.spacing.s1,borderTop:"1px solid ".concat(v.r.palette.neutralLighter)}},Re={root:{overflow:"hidden",position:"relative"}},_e={root:{position:"relative"}},ze=(0,f.ZC)({pivot:{flex:1},imgDocker:{position:"fixed",zIndex:100,left:0,bottom:0,display:"flex",flexDirection:"row",width:"fit-content"},image:{width:"100%",height:"auto"},propertyDocker:{position:"fixed",pointerEvents:"none",left:300,bottom:0,"&:not(:empty)":{minHeight:220}},controlsWrapper:{"&>div":{top:60,right:0,maxHeight:"calc(100vh - 110px)",overflowY:"auto",border:"1px solid ".concat(v.r.palette.neutralLighter),display:"flex !important",flexDirection:"column"}}}),Ae=ke},423:function(e,t,n){"use strict";n.d(t,{U2:function(){return o},J6:function(){return i},Hn:function(){return a}});var r=n(7294);function o(e,t){var n=(0,r.useState)(),o=n[0],i=n[1];return(0,r.useEffect)((function(){(new e).load(t,(function(e){i(e)}))}),[t]),o}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=(0,r.useState)(o),a=s[0],c=s[1];return(0,r.useEffect)((function(){if(e){var r=new XMLHttpRequest;return r.responseType=n,r.addEventListener("load",(function(e){null===i||void 0===i||i(e),c(r.response)})),r.open(t,e),r.send(),function(){return r.abort()}}}),[e]),a}function s(e){return new Promise((function(t,n){var r=new window.Image;r.src=e,r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",n)}))}function a(e){var t=(0,r.useState)([]),n=t[0],o=t[1],i=(0,r.useState)(!1),a=i[0],c=i[1],l=Array.isArray(e),u=Array.isArray(e)?e:[e];return(0,r.useEffect)((function(){Promise.all(u.map(s)).then((function(e){o(e),c(!0)})).catch((function(){})),c(!1)}),u),[l?n:n[0],a]}},2708:function(e,t,n){"use strict";n.d(t,{UO:function(){return o},Lq:function(){return s},pe:function(){return a},ih:function(){return c},Od:function(){return l},sP:function(){return u}});var r=n(5893),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=-1==e.lastIndexOf("/")?e.lastIndexOf("\\"):e.lastIndexOf("/"),n=e.substring(t+1);return n.substring(0,n.lastIndexOf("."))},i={},s=function(e){var t=i[e];return t||(t="#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6),i[e]=t),t};function a(e){for(var t=e;t;t=t.parent)if(!t.visible)return!1;return!0}function c(e){var t=[];for(var n in e)t.push((0,r.jsxs)("span",{children:[n,": ",e[n]]},n));return t}var l=function(e,t,n){return t<=e&&e<=n};function u(e,t,n,r){var o=e.scaleX(),i=(n.x-e.x())/o,s=(n.y-e.y())/o,a={x:n.x-i*t,y:n.y-s*t};e.position(a),r&&r.setValueAtPath("scale",t,!1)}},3234:function(e,t,n){"use strict";n.d(t,{r:function(){return r},R:function(){return o}});var r=(0,n(2525).gh)(),o={sizes:{rootWidth:"310px",controlWidth:"57%"},space:{sm:"3px"},colors:{elevation1:r.semanticColors.disabledBackground,elevation2:r.semanticColors.bodyBackground,elevation3:r.semanticColors.infoBackground,accent1:r.semanticColors.inputPlaceholderText,accent2:r.semanticColors.disabledSubtext,accent3:r.semanticColors.disabledText,highlight1:r.semanticColors.bodySubtext,highlight2:r.semanticColors.bodySubtext,highlight3:r.semanticColors.bodyText,toolTipText:r.semanticColors.bodyText}}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1229)}])}},function(e){e.O(0,[774,331,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);