(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{84540:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/settings",function(){return n(10990)}])},14197:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var s=n(39324),i=n(4337),a=n(35250),r=n(16266),o=n(19841),c=n(60554),d=n(70079),l=n(1454),u=n(32004),g=n(94968),f=n(21389),m=n(6038),x=n(52696),h=n(75641),p=n(88327),v=n(15329),j=n(1821),b=n(82277),k=n(13090),w=n(78931);function y(){var e=(0,i._)(["max-w-5xl mx-auto w-full"]);return y=function(){return e},e}function _(e){var t=e.route,n=e.children,s=(0,c.useRouter)();return(0,a.jsx)(v.ZB,{$as:"button",className:(0,o.default)("rounded",s.route===t?"bg-gray-700":"hover:bg-gray-800"),onClick:function(){s.push(t)},children:n})}function T(e){var t=e.workspaceName,n=e.hasAdminPrivileges,i=(0,w.hz)(),o=(0,c.useRouter)(),g=(0,d.useCallback)(function(){o.push("/")},[o]);return(0,a.jsxs)("nav",{className:"p-2",children:[(0,a.jsxs)("div",{className:"mb-1 flex flex-row gap-2",children:[(0,a.jsxs)(k.MP,{onClick:g,children:[(0,a.jsx)(p.ZP,{icon:l.Ao2}),(0,a.jsx)(u.Z,(0,s._)({},Z.backToChat))]}),(0,a.jsx)(k.H,{})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 py-2",children:[(0,a.jsxs)("div",{className:"my-2 flex flex-col gap-2 px-2",children:[(0,a.jsx)(m.B0,{size:"large"}),(0,a.jsx)("h2",{className:"text-lg text-gray-100",children:t})]}),(0,a.jsxs)(_,{route:"/admin",children:[(0,a.jsx)(p.ZP,{icon:r.Z}),(0,a.jsx)(u.Z,(0,s._)({},Z.membersPageTitle))]}),!0===n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(_,{route:"/admin/analytics",children:[(0,a.jsx)(p.ZP,{icon:l.orK}),(0,a.jsx)(u.Z,(0,s._)({},Z.analytics))]}),i.has("workspace_admin_settings")&&(0,a.jsxs)(_,{route:"/admin/settings",children:[(0,a.jsx)(p.ZP,{icon:l.nbt}),(0,a.jsx)(u.Z,(0,s._)({},Z.adminSettings))]})]}):null]})]})}function N(e){var t,n=e.mobilePageTitle,i=e.requireAdminPrivileges,r=void 0!==i&&i,o=e.children,l=(0,w.ec)(function(e){return e.currentWorkspace}),g=(0,w.$T)(),f=(0,x.Ix)(l),m=(0,c.useRouter)(),p=null!=l?(t=l.role)===h.r3.ADMIN||t===h.r3.OWNER:void 0;return(0,d.useEffect)(function(){r&&!1===p&&m.push("/admin")},[r,p,m]),(0,a.jsx)(b.Z,{showNavigation:!0,renderTitle:n,renderSidebar:(0,a.jsx)(T,{workspaceName:g?"":f,hasAdminPrivileges:p}),children:(0,a.jsxs)(P,{children:[g&&(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)(j.Z,{})}),!g&&!l&&(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)(u.Z,(0,s._)({},Z.workspaceNotFound))}),!g&&l&&o]})})}var P=f.Z.div(y()),Z=(0,g.vU)({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found",description:"The title of the admin page."},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat",description:"Navigation button to return to main chat page"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members",description:"The title of the members page"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics",description:"Analytics sidebar item"},adminSettings:{id:"adminPage.adminSettings",defaultMessage:"Admin settings",description:"Settings sidebar item"}})},10990:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return D},default:function(){return O}});var s=n(39324),i=n(35250),a=n(21722),r=n(22830),o=n(4337),c=n(75883),d=n(5268),l=n(13995),u=n(74686),g=n(73413),f=n.n(g),m=n(70671),x=n(32004),h=n(94968),p=n(21389),v=n(62509),j=n(99486),b=n(54118),k=n(78931),w=n(41230),y=n(1821),_=n(88798);function T(){var e=(0,o._)(["border-t border-gray-100 dark:border-gray-700 py-6"]);return T=function(){return e},e}function N(){var e=(0,o._)(["mt-2 text-xs text-token-text-tertiary"]);return N=function(){return e},e}function P(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,a._)(function(e){var t,n,s,i;return(0,c.Jh)(this,function(a){return(t=(0,r._)(e.queryKey,2))[0],s=(n=t[1]).workspaceId,i=n.accessToken,[2,j.ZP.getWorkspaceSettings(i,s)]})})).apply(this,arguments)}function M(e){var t,n,s=e.workspaceId,a=e.label,r=e.description,o=e.feature,c=e.enabled,d=(0,m.Z)(),g=(0,v.kP)().session,f=(0,l.NL)(),x=(0,u.D)({mutationFn:function(e){var n=e.feature,i=e.enabled;return j.ZP.setWorkspaceBetaFeature(null!==(t=null==g?void 0:g.accessToken)&&void 0!==t?t:"",s,n,i)},onSettled:function(){f.invalidateQueries(["workspace-settings"])},onError:function(){_.m.danger(d.formatMessage(A.betaSettingsUpdateFailed))}}),h=x.variables,p=x.mutate;return(0,i.jsx)("div",{children:(0,i.jsx)(w.oC,{label:a,enabled:null!==(n=null==h?void 0:h.enabled)&&void 0!==n?n:c,onChange:function(e){p({feature:o,enabled:e})},description:r})})}function C(e){var t,n=e.conversationTTL,a=(0,m.Z)();return t=null===n?a.formatMessage(A.retentionInfinite):2592e3===n?a.formatMessage(A.retentionThirtyDays):31536e3===n?a.formatMessage(A.retentionOneYear):a.formatMessage(A.retentionCustomDays,{num:Math.floor(n/86400)}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("div",{children:(0,i.jsx)(x.Z,(0,s._)({},A.conversationRetention))}),(0,i.jsx)("div",{children:t})]}),(0,i.jsx)(R,{children:(0,i.jsx)(x.Z,(0,s._)({},A.retentionChange))})]})}function S(e){var t=e.workspaceId,n=e.data,a=(0,m.Z)();return(0,i.jsxs)("div",{children:[(0,i.jsxs)(I,{children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("div",{className:"mb-2",children:(0,i.jsx)(x.Z,(0,s._)({},A.betaTitle))}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:(0,i.jsx)(x.Z,(0,s._)({},A.betaIntro))})]}),(0,i.jsx)("div",{className:"flex flex-col gap-6",children:(0,i.jsx)(M,{workspaceId:t,label:(0,w.zO)(a),description:(0,w.u7)(a),feature:b.tr.CODE_INTERPRETER,enabled:n.beta_settings[b.tr.CODE_INTERPRETER]})})]}),(0,i.jsx)(I,{children:(0,i.jsx)(C,{conversationTTL:n.conversation_ttl})})]})}function E(e){var t,n=e.currentWorkspaceId,a=(0,m.Z)(),r=(t=(0,v.kP)().session,(0,d.a)(["workspace-settings",{workspaceId:n,accessToken:null==t?void 0:t.accessToken}],P,{enabled:(null==t?void 0:t.accessToken)!=null})).data;return(0,k.hz)().has("workspace_admin_settings")?(0,i.jsxs)("div",{className:"mx-auto max-w-lg px-4 py-8",children:[(0,i.jsx)(f(),{children:(0,i.jsx)("title",{children:a.formatMessage(A.title)})}),(0,i.jsx)("div",{className:"mb-6 text-2xl font-medium text-token-text-primary",children:(0,i.jsx)(x.Z,(0,s._)({},A.title))}),void 0!==r?(0,i.jsx)(S,{workspaceId:n,data:r}):(0,i.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,i.jsx)(y.Z,{})})]}):null}var I=p.Z.div(T()),R=p.Z.div(N()),A=(0,h.vU)({title:{id:"workspaceSettings.title",defaultMessage:"Admin settings",description:"Title of settings page"},betaTitle:{id:"workspaceSettings.betaTitle",defaultMessage:"Beta Features",description:"Title for workspace beta features"},betaIntro:{id:"workspaceSettings.betaIntro",defaultMessage:"Toggle access to experimental new features in your workspace. Features may change during development.",description:"Introduction for the workspace beta settings"},betaSettingsUpdateFailed:{id:"workspaceSettings.betaSettingsUpdateFailed",defaultMessage:"Failed to update beta setting",description:"Message shown when there's an error updating beta settings"},conversationRetention:{id:"workspaceSettings.conversationRetention",defaultMessage:"Conversation retention",description:"Conversation retention setting label"},retentionInfinite:{id:"workspaceSettings.retentionInfinite",defaultMessage:"Infinite",description:"Conversation retention value"},retentionThirtyDays:{id:"workspaceSettings.retentionThirtyDays",defaultMessage:"30 days",description:"Conversation retention value"},retentionOneYear:{id:"workspaceSettings.retentionOneYear",defaultMessage:"1 year",description:"Conversation retention value"},retentionCustomDays:{id:"workspaceSettings.retentionCustomDays",defaultMessage:"{num} days",description:"Conversation retention value"},retentionChange:{id:"workspaceSettings.retentionChange",defaultMessage:"Please contact your account manager to change this setting.",description:"Text underneath conversation retention setting"}}),F=n(14197),D=!0;function O(e){return(0,i.jsx)(E,(0,s._)({},e))}O.getLayout=function(e){return(0,i.jsx)(F.default,{mobilePageTitle:"Settings",requireAdminPrivileges:!0,children:e})}},16266:function(e,t,n){"use strict";var s=n(70079);let i=s.forwardRef(function({title:e,titleId:t,...n},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z",clipRule:"evenodd"}))});t.Z=i}},function(e){e.O(0,[2798,8246,1741,6786,8948,3504,4984,7483,6493,1230,9774,2888,179],function(){return e(e.s=84540)}),_N_E=e.O()}]);