(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6964],{69714:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(81375)}])},14197:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var r=t(39324),a=t(4337),i=t(35250),s=t(16266),o=t(19841),l=t(60554),d=t(70079),c=t(1454),u=t(32004),m=t(94968),f=t(21389),g=t(6038),v=t(52696),x=t(75641),h=t(88327),p=t(15329),b=t(1821),j=t(82277),M=t(13090),k=t(78931);function y(){var e=(0,a._)(["max-w-5xl mx-auto w-full"]);return y=function(){return e},e}function Z(e){var n=e.route,t=e.children,r=(0,l.useRouter)();return(0,i.jsx)(p.ZB,{$as:"button",className:(0,o.default)("rounded",r.route===n?"bg-gray-700":"hover:bg-gray-800"),onClick:function(){r.push(n)},children:t})}function N(e){var n=e.workspaceName,t=e.hasAdminPrivileges,a=(0,k.hz)(),o=(0,l.useRouter)(),m=(0,d.useCallback)(function(){o.push("/")},[o]);return(0,i.jsxs)("nav",{className:"p-2",children:[(0,i.jsxs)("div",{className:"mb-1 flex flex-row gap-2",children:[(0,i.jsxs)(M.MP,{onClick:m,children:[(0,i.jsx)(h.ZP,{icon:c.Ao2}),(0,i.jsx)(u.Z,(0,r._)({},P.backToChat))]}),(0,i.jsx)(M.H,{})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 py-2",children:[(0,i.jsxs)("div",{className:"my-2 flex flex-col gap-2 px-2",children:[(0,i.jsx)(g.B0,{size:"large"}),(0,i.jsx)("h2",{className:"text-lg text-gray-100",children:n})]}),(0,i.jsxs)(Z,{route:"/admin",children:[(0,i.jsx)(h.ZP,{icon:s.Z}),(0,i.jsx)(u.Z,(0,r._)({},P.membersPageTitle))]}),!0===t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Z,{route:"/admin/analytics",children:[(0,i.jsx)(h.ZP,{icon:c.orK}),(0,i.jsx)(u.Z,(0,r._)({},P.analytics))]}),a.has("workspace_admin_settings")&&(0,i.jsxs)(Z,{route:"/admin/settings",children:[(0,i.jsx)(h.ZP,{icon:c.nbt}),(0,i.jsx)(u.Z,(0,r._)({},P.adminSettings))]})]}):null]})]})}function w(e){var n,t=e.mobilePageTitle,a=e.requireAdminPrivileges,s=void 0!==a&&a,o=e.children,c=(0,k.ec)(function(e){return e.currentWorkspace}),m=(0,k.$T)(),f=(0,v.Ix)(c),g=(0,l.useRouter)(),h=null!=c?(n=c.role)===x.r3.ADMIN||n===x.r3.OWNER:void 0;return(0,d.useEffect)(function(){s&&!1===h&&g.push("/admin")},[s,h,g]),(0,i.jsx)(j.Z,{showNavigation:!0,renderTitle:t,renderSidebar:(0,i.jsx)(N,{workspaceName:m?"":f,hasAdminPrivileges:h}),children:(0,i.jsxs)(C,{children:[m&&(0,i.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,i.jsx)(b.Z,{})}),!m&&!c&&(0,i.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,i.jsx)(u.Z,(0,r._)({},P.workspaceNotFound))}),!m&&c&&o]})})}var C=f.Z.div(y()),P=(0,m.vU)({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found",description:"The title of the admin page."},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat",description:"Navigation button to return to main chat page"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members",description:"The title of the members page"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics",description:"Analytics sidebar item"},adminSettings:{id:"adminPage.adminSettings",defaultMessage:"Admin settings",description:"Settings sidebar item"}})},81375:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return eN},default:function(){return ew}});var r=t(39324),a=t(35250),i=t(21722),s=t(71209),o=t(22830),l=t(4337),d=t(75883),c=t(13995),u=t(74686),m=t(19841),f=t(91530),g=t.n(f),v=t(73413),x=t.n(v),h=t(60554),p=t(70079),b=t(1454),j=t(70671),M=t(32004),k=t(94968),y=t(21389),Z=t(62509),N=t(99486),w=t(46020),C=t(78931),P=t(6038),_=t(67273),I=t(97747),T=t(89368),U=t(81949),R=t(15420),A=t(37394),B=t(45635),S=t(88327),E=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function D(e){return e.split(/[\s,]+/)}function F(e){var n=e.value,t=e.onChange,r=e.className,i=(0,j.Z)(),s=(0,o._)((0,p.useState)(""),2),l=s[0],d=s[1],c=(0,p.useCallback)(function(e){if(l)switch(e.key){case"Enter":case",":case" ":var r=D(l);t((0,U._)(n).concat((0,U._)(r.map(z)))),d(""),e.preventDefault()}},[l,t,n]);return(0,a.jsx)(R.ZP,{className:(0,m.default)("react-select-container",r),isMulti:!0,onBlur:function(e){if(l){var r=D(l);t((0,U._)(n).concat((0,U._)(r.map(z)))),d(l),e.preventDefault()}},classNamePrefix:"react-select",components:W,inputValue:l,isClearable:!0,menuIsOpen:!1,onChange:t,onInputChange:d,onKeyDown:c,placeholder:i.formatMessage(H.placeholder),value:n,"aria-labelledby":"add-emails-label",name:"add-member-emails"})}var z=function(e){return{label:e,value:e,isValid:E.test(e)}},W={DropdownIndicator:function(){return null},IndicatorsContainer:function(){return null},ClearIndicator:function(){return null},MultiValueRemove:function(){return null},MultiValue:function(e){var n=(0,j.Z)(),t=(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:e.children}),(0,a.jsx)(S.ZP,{icon:b.q5L,size:"small"})]}),i=e.data.isValid?t:(0,a.jsx)(B.u,{label:n.formatMessage(H.tooltipInvalidEmail,{email:e.data.value}),side:"top",children:t});return(0,a.jsx)(A.c.MultiValue,(0,s._)((0,r._)({},e),{children:(0,a.jsx)("button",{className:(0,m.default)("m-1 cursor-pointer rounded-full border border-transparent py-1 pl-3 pr-2 text-sm dark:text-gray-300",e.data.isValid?"bg-gray-50 hover:border-gray-300 hover:bg-gray-100 dark:bg-gray-800 dark:hover:border-gray-600 dark:hover:bg-gray-700":"bg-red-200 text-red-500 dark:text-red-500"),onClick:function(n){var t,r;null===(r=(t=e.removeProps).onClick)||void 0===r||r.call(t,n),n.preventDefault()},"aria-label":n.formatMessage(H.removeMember,{member:e.data.value}),children:i})}))}},H=(0,k.vU)({membersAdded:{id:"emailsTextarea.membersAdded",defaultMessage:"+{count} {count, plural, one {member} other {members}}",description:"Current number of members that will be added to the workspace"},removeMember:{id:"emailsTextarea.removeMember",defaultMessage:"Remove {member}",description:"Remove a member from the list of members to be added"},tooltipInvalidEmail:{id:"emailsTextarea.tooltipInvalidEmail",defaultMessage:'"{email}" may not be a valid email',description:"Tooltip for invalid email addresses"},clearAllEntries:{id:"emailsTextarea.clearAllEntries",defaultMessage:"Clear all",description:"Clear all entries in the list of members to be added"},placeholder:{id:"emailsTextarea.placeholder",defaultMessage:"Type an email and press enter...",description:"Placeholder for the insert emails textarea"}}),O=t(88798),V=t(5268),q=t(76150),L=t(78103),$=t(75641),J=t(52696),K=t(92720),G=t(10580),Q=t(55629),Y=t(63857),X=(0,L.ZP)(function(){return{confirmModalUserData:null}}),ee={openModalForUser:function(e){X.setState({confirmModalUserData:e})},closeModal:function(){X.setState({confirmModalUserData:null})}};function en(e){var n,t,i,s,l=e.workspaceId,d=(0,o._)((0,p.useState)(0),2),m=d[0],f=d[1],g=eo(l,m).data,v=(0,Z.kP)().session,x=null==v?void 0:null===(s=v.user)||void 0===s?void 0:s.id,h=Math.ceil(el(l)/es),j=(0,J.Gk)(l),k=(0,J.bE)(l),y=j||k,C=(n=(0,Z.kP)().session,(0,u.D)({mutationFn:function(e){var t=e.userId,r=e.workspaceId,a=e.value;return N.ZP.updateWorkspaceUserRole(n.accessToken,r,t,a).catch(function(e){O.m.danger("Unable to update user (".concat(t,") role: ").concat(e.message))})}})),P=(t=(0,Z.kP)().session,i=(0,c.NL)(),(0,u.D)({mutationFn:function(e){var n=e.userId;return N.ZP.removeWorkspaceUser(t.accessToken,l,n).catch(function(e){O.m.danger("Unable to remove user (".concat(n,") from workspace: ").concat(e.message))})},onSuccess:function(){i.invalidateQueries({queryKey:["workspace",l]})}})),_=(0,p.useCallback)(function(e){ee.openModalForUser(e)},[]),I=(0,p.useCallback)(function(){var e,n=null===(e=X.getState().confirmModalUserData)||void 0===e?void 0:e.id;void 0!==n&&P.mutate({userId:n}),ee.closeModal()},[P]),T=(0,p.useCallback)(function(e,n){C.mutate({userId:e,value:n,workspaceId:l})},[C,l]);return void 0===g||(null==g?void 0:g.items.length)===0?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Q.Z.Root,{fixed:!0,size:"normal",children:[(0,a.jsxs)(Q.Z.Header,{children:[(0,a.jsx)(Q.Z.HeaderCell,{className:"dark:bg-gray-800",children:(0,a.jsx)(M.Z,(0,r._)({},ed.name))}),(0,a.jsx)(Q.Z.HeaderCell,{className:"dark:bg-gray-800",children:(0,a.jsx)(M.Z,(0,r._)({},ed.email))}),(0,a.jsx)(Q.Z.HeaderCell,{className:"w-28 dark:bg-gray-800",children:(0,a.jsx)("span",{className:j?"pl-3":"",children:(0,a.jsx)(M.Z,(0,r._)({},ed.role))})}),y&&(0,a.jsx)(Q.Z.HeaderCell,{className:"w-16 dark:bg-gray-800"})]}),(0,a.jsx)(Q.Z.Body,{children:g.items.map(function(e){return(0,a.jsx)(er,{isCurrentUser:void 0!==x&&e.id===x,userId:e.id,name:e.name,role:e.role,currentUserHasAdminRights:y,isCurrentUserOwner:j,email:e.email,onRemoveUserClick:function(){return _({id:e.id,name:e.name,email:e.email,created_time:e.created_time})},onUpdateUserRole:T},e.id)})})]}),(0,a.jsxs)("div",{className:"relative mb-8 mt-4 min-h-[20px]",children:[j&&(0,a.jsxs)("button",{onClick:function(){return w.vm.openModal(w.B.InviteUsersToWorkspace)},className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 dark:text-gray-400 hover:dark:text-gray-300",children:[(0,a.jsx)(S.ZP,{icon:b.OvN}),(0,a.jsx)(M.Z,(0,r._)({},ed.inviteMemberButton))]}),h>1&&(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:(0,a.jsx)(Y.Z,{currentPage:m,onChangeIndex:f,length:h})})]}),(0,a.jsx)(et,{onDeleteConfirm:I})]})}function et(e){var n,t=e.onDeleteConfirm,i=(0,j.Z)(),o=X(function(e){return null!==e.confirmModalUserData}),l=X(function(e){return null===e.confirmModalUserData?{}:{userId:e.confirmModalUserData.id,email:e.confirmModalUserData.email,name:e.confirmModalUserData.name,dateAdded:(0,q.Z)(e.confirmModalUserData.created_time)}});return(0,a.jsx)(T.Z,{isOpen:o,title:i.formatMessage(ed.removeMemberModalTitle),onClose:function(){return ee.closeModal()},type:"success",primaryButton:(0,a.jsx)(I.ZP.Button,{title:i.formatMessage(ed.removeMemberModalConfirm),color:"danger",onClick:t}),secondaryButton:(0,a.jsx)(I.ZP.Button,{title:i.formatMessage(ed.removeMemberModalCancel),color:"neutral",onClick:function(){return ee.closeModal()}}),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[null!==(n=l.name)&&void 0!==n?n:l.email,(0,a.jsx)("div",{className:"text-gray-500",children:(0,a.jsx)(M.Z,(0,s._)((0,r._)({},ed.dateJoined),{values:{dateAdded:i.formatDate(l.dateAdded,{year:"numeric",month:"long",day:"numeric"})}}))})]})})}function er(e){var n=e.userId,t=e.name,i=e.email,s=e.role,o=e.currentUserHasAdminRights,l=e.isCurrentUserOwner,d=e.isCurrentUser,c=e.onRemoveUserClick,u=e.onUpdateUserRole,f=(0,J.Ap)()[s];return(0,a.jsxs)(Q.Z.Row,{children:[(0,a.jsx)(Q.Z.Cell,{children:(0,a.jsxs)("span",{className:(0,m.default)("flex items-center gap-2",null===t||""===t?"text-gray-500":""),children:[(0,a.jsx)("span",{children:null!=t?t:(0,a.jsx)(M.Z,(0,r._)({},ed.missingName))}),(0,a.jsx)("span",{children:d&&(0,a.jsx)(M.Z,(0,r._)({},ed.youSpecifier))})]})}),(0,a.jsx)(Q.Z.Cell,{children:i}),(0,a.jsx)(Q.Z.Cell,{children:l?(0,a.jsx)(ea,{currentRole:s,onUpdateUserRole:function(e){u(n,e)},disabled:d}):f}),o&&(0,a.jsx)(Q.Z.Cell,{children:(0,a.jsx)(ei,{userId:n,onRemoveUserClick:c,disabled:d})})]})}function ea(e){var n=e.currentRole,t=e.onUpdateUserRole,r=e.disabled,i=(0,J.Ap)();return(0,a.jsxs)(G.Z.Root,{disabled:void 0!==r&&r,defaultValue:n,onValueChange:function(e){t(e)},children:[(0,a.jsxs)(G.Z.Trigger,{children:[(0,a.jsx)(G.Z.Value,{}),(0,a.jsx)(G.Z.Icon,{})]}),(0,a.jsx)(G.Z.Portal,{children:(0,a.jsxs)(G.Z.Content,{children:[(0,a.jsx)(G.Z.Item,{value:$.r3.STANDARD,children:i[$.r3.STANDARD]}),(0,a.jsx)(G.Z.Item,{value:$.r3.ADMIN,children:i[$.r3.ADMIN]}),(0,a.jsx)(G.Z.Item,{value:$.r3.OWNER,children:i[$.r3.OWNER]})]})})]})}function ei(e){var n=e.disabled,t=e.onRemoveUserClick,i=e.userId;return n?null:(0,a.jsxs)(K.Z.Root,{children:[(0,a.jsx)(K.Z.Trigger,{children:(0,a.jsx)(S.ZP,{icon:b.K9M})}),(0,a.jsx)(K.Z.Portal,{children:(0,a.jsx)(K.Z.Content,{children:(0,a.jsx)(K.Z.Item,{onClick:function(){t(i)},children:(0,a.jsx)(M.Z,(0,r._)({},ed.removeMemberModalTitle))})})})]})}var es=20;function eo(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(0,Z.kP)(),r=t.session,a=t.isAuthenticated;return(0,V.a)({queryKey:["workspace",e,n],queryFn:(0,i._)(function(){return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,N.ZP.getWorkspaceUsers(r.accessToken,e,n*es,es)];case 1:return[2,t.sent()]}})}),getNextPageParam:function(e){var n=e.offset+es;return{offset:n<e.total?n:void 0,total:e.total}},enabled:a})}function el(e){var n,t=eo(e).data;return null!==(n=null==t?void 0:t.total)&&void 0!==n?n:0}var ed=(0,k.vU)({name:{id:"UserManager.name",defaultMessage:"Name",description:"Name column in the user management table"},email:{id:"UserManager.email",defaultMessage:"Email",description:"Email column in the user management table"},role:{id:"UserManager.role",defaultMessage:"Role",description:"Role column in the user management table"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided",description:"Placeholder for missing user name"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)",description:"Specifier for the current user in the user manager"},removeUser:{id:"UserManager.removeUser",defaultMessage:"Remove user from workspace",description:"Remove user from workspace button in the user manager"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member",description:"Remove member title of confirmation modal"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete",description:"Remove member confirm button of confirmation modal"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel",description:"Remove member cancel button of confirmation modal"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}",description:"Date user joined the current workspace"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member",description:"The title of the invite member button"}});function ec(e){var n,t=e.workspaceId,s=(0,o._)((0,p.useState)(0),2),l=s[0],c=s[1],u=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(0,Z.kP)().session;return(0,V.a)({queryKey:["workspace/invites",e,n],queryFn:(0,i._)(function(){return(0,d.Jh)(this,function(r){switch(r.label){case 0:return[4,N.ZP.getWorkspaceInvites(t.accessToken,e,20*n,20)];case 1:return[2,r.sent()]}})}),getNextPageParam:function(e){var n=e.offset+20;return{offset:n<e.total?n:void 0,total:e.total}},enabled:!!(null==t?void 0:t.accessToken)})}(t,l).data,m=Math.ceil((null!==(n=null==u?void 0:u.total)&&void 0!==n?n:0)/20),f=(0,J.Gk)(t),g=(0,J.bE)(t),v=f||g,x=null==u?void 0:u.items;return void 0===x||0===x.length?(0,a.jsx)("div",{className:"text-gray-500",children:(0,a.jsx)(M.Z,(0,r._)({},ef.noPendingInvites))}):(0,a.jsxs)("div",{children:[(0,a.jsxs)(Q.Z.Root,{fixed:!0,size:"normal",children:[(0,a.jsxs)(Q.Z.Header,{children:[(0,a.jsx)(Q.Z.HeaderCell,{className:"dark:bg-gray-800",children:(0,a.jsx)(M.Z,(0,r._)({},ef.email))}),(0,a.jsx)(Q.Z.HeaderCell,{className:"w-28 dark:bg-gray-800",children:(0,a.jsx)("span",{className:v?"pl-3":"",children:(0,a.jsx)(M.Z,(0,r._)({},ef.role))})}),v&&(0,a.jsx)(Q.Z.HeaderCell,{className:"w-16 dark:bg-gray-800"})]}),(0,a.jsx)(Q.Z.Body,{children:x.map(function(e){return(0,a.jsx)(eu,{workspaceId:t,invite:e,isCurrentUserOwner:f,currentUserHasAdminRights:v},e.id)})})]}),m>1&&(0,a.jsx)("div",{className:"mt-2 flex justify-center",children:(0,a.jsx)(Y.Z,{currentPage:l,onChangeIndex:c,length:m})})]})}function eu(e){var n,t,r,i,s,o,l=e.workspaceId,d=e.invite,m=e.isCurrentUserOwner,f=e.currentUserHasAdminRights,g=(0,J.Ap)(),v=(n=(0,j.Z)(),t=(0,Z.kP)().session,r=(0,c.NL)(),(0,u.D)({mutationFn:function(e){var r=e.inviteId,a=e.role;return N.ZP.patchWorkspaceInvite(t.accessToken,l,r,{role:a}).catch(function(e){O.m.danger(n.formatMessage(ef.updateInviteError,{error:e.message}))})},onSuccess:function(){r.invalidateQueries({queryKey:["workspace/invites",l]})}})),x=(i=(0,j.Z)(),s=(0,Z.kP)().session,o=(0,c.NL)(),(0,u.D)({mutationFn:function(e){var n=e.email;return N.ZP.deleteWorkspaceInvite(s.accessToken,l,n).catch(function(e){O.m.danger(i.formatMessage(ef.deleteInviteError,{email:n,error:e.message}))})},onSuccess:function(){o.invalidateQueries({queryKey:["workspace/invites",l]})}}));return(0,a.jsxs)(Q.Z.Row,{disabled:v.isLoading||x.isLoading||x.isSuccess,children:[(0,a.jsx)(Q.Z.Cell,{children:d.email_address}),(0,a.jsx)(Q.Z.Cell,{children:m?(0,a.jsx)(ea,{currentRole:d.role,onUpdateUserRole:function(e){v.mutate({inviteId:d.id,role:e})}}):g[d.role]}),f&&(0,a.jsx)(Q.Z.Cell,{children:(0,a.jsx)(em,{onDeleteUser:function(){x.mutate({email:d.email_address})}})})]})}function em(e){var n=e.onDeleteUser;return(0,a.jsxs)(K.Z.Root,{children:[(0,a.jsx)(K.Z.Trigger,{children:(0,a.jsx)(S.ZP,{icon:b.K9M})}),(0,a.jsx)(K.Z.Portal,{children:(0,a.jsx)(K.Z.Content,{children:(0,a.jsx)(K.Z.Item,{onClick:n,children:(0,a.jsx)(M.Z,(0,r._)({},ef.revokeInvite))})})})]})}var ef=(0,k.vU)({email:{id:"InviteManager.email",defaultMessage:"Email",description:"Email column in the invites management table"},role:{id:"InviteManager.role",defaultMessage:"Role",description:"Role column in the invites management table"},revokeInvite:{id:"InviteManager.revokeInvite",defaultMessage:"Revoke invite",description:"Revoke invite action button"},noPendingInvites:{id:"InviteManager.noPendingInvites",defaultMessage:"No pending invites",description:"Placeholder text when there are no pending invites"},updateInviteError:{id:"InviteManager.updateInviteError",defaultMessage:"Unable to update invite from workspace: {error}",description:"Error message in toast when updating invite"},deleteInviteError:{id:"InviteManager.deleteInviteError",defaultMessage:"Unable to remove user ({email}) from workspace: {error}",description:"Error message in toast when removing user"}});function eg(){var e=(0,l._)(["mb-4 py-6 flex justify-between items-center"]);return eg=function(){return e},e}function ev(){var e=(0,l._)(["font-medium text-xl"]);return ev=function(){return e},e}function ex(){var e=(0,l._)(["text-gray-500 text-sm font-normal"]);return ex=function(){return e},e}function eh(e){var n,t=e.currentWorkspaceId,i=(0,j.Z)(),s=(0,C.ec)(function(e){return e.currentWorkspace}),o=(0,C.$T)(),l=(0,J.bE)(t),d=(0,J.Gk)(t),c=null!==(n=el(t))&&void 0!==n?n:"?",u=(0,J.Ix)(s),m=(0,J.qH)(s),f=o?"":u,g=(0,h.useRouter)(),v="invites"===g.query.tab;return(0,a.jsxs)("div",{className:"px-4 py-4 md:px-8",children:[(0,a.jsx)(x(),{children:(0,a.jsx)("title",{children:i.formatMessage(ey.adminBrowserPageTitle)})}),(0,a.jsxs)(ej,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(P.B0,{size:"large"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(eM,{children:f}),(0,a.jsx)(ek,{children:(0,a.jsx)(M.Z,(0,r._)({values:{totalMembers:c,planName:m}},ey.totalMembers))})]})]}),(l||d)&&(0,a.jsxs)(_.z,{onClick:function(){return w.vm.openModal(w.B.InviteUsersToWorkspace)},children:[(0,a.jsx)(S.ZP,{icon:b.OvN}),(0,a.jsx)(M.Z,(0,r._)({},ey.inviteMemberButton))]})]}),(0,a.jsxs)("div",{className:"mb-6 flex gap-2",children:[(0,a.jsx)(ep,{onClick:function(){g.push("/admin")},isSelected:!v,children:(0,a.jsx)(M.Z,(0,r._)({},ey.allMembers))}),(0,a.jsx)(ep,{onClick:function(){g.push("/admin?tab=invites")},isSelected:v,children:(0,a.jsx)(M.Z,(0,r._)({},ey.pendingInvites))})]}),v?(0,a.jsx)(ec,{workspaceId:t}):(0,a.jsx)(en,{workspaceId:t}),null!=s?(0,a.jsx)(eb,{workspaceName:f,workspace:s}):null]})}function ep(e){var n=e.children,t=e.isSelected,r=e.onClick;return(0,a.jsx)(_.z,{color:"none",className:(0,m.default)(t?"bg-gray-100 dark:bg-gray-600":"hover:bg-gray-50 hover:dark:bg-gray-700"),onClick:r,children:n})}function eb(e){var n,t,l,m=e.workspace,f=e.workspaceName,v=(0,j.Z)(),x=(0,w.tN)(function(e){return e.activeModals.has(w.B.InviteUsersToWorkspace)}),h=(0,o._)((0,p.useState)([]),2),b=h[0],k=h[1],y=(n=m.id,t=(0,Z.kP)().session,l=(0,c.NL)(),(0,u.D)({mutationFn:function(e){var n=e.workspaceId,r=e.emails;return N.ZP.addWorkspaceUsers(t.accessToken,n,r).then(function(e){return O.m.success("Invited ".concat(e.length," user(s) to ").concat(f)),e}).catch(function(e){throw O.m.danger(e.message),e})},onSuccess:function(){l.invalidateQueries({queryKey:["workspace/invites",n]})}})).mutateAsync,C=b.length>30,P=(0,o._)((0,p.useState)(!1),2),U=P[0],R=P[1];return(0,a.jsx)(T.Z,{closeButton:(0,a.jsx)(I.ZP.CloseButton,{onClose:function(){w.vm.closeModal(w.B.InviteUsersToWorkspace)}}),isOpen:x,onClose:g(),type:"success",title:(null==m?void 0:m.name)!=null?v.formatMessage(ey.inviteMemberModalTitle,{workspaceName:f}):v.formatMessage(ey.inviteMemberModalTitleUntitledWorkspace),primaryButton:(0,a.jsx)(I.ZP.Button,{title:U?v.formatMessage(ey.inviteMemberInviteSubmitButtonLoading):v.formatMessage(ey.inviteMemberInviteSubmitButton),color:"primary",disabled:C||0===b.length||U,onClick:(0,i._)(function(){var e;return(0,d.Jh)(this,function(n){switch(n.label){case 0:e=b.map(function(e){return e.value}),R(!0),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,y({workspaceId:m.id,emails:e})];case 2:return n.sent(),k([]),w.vm.closeModal(w.B.InviteUsersToWorkspace),[3,4];case 3:return R(!1),[7];case 4:return[2]}})})}),secondaryButton:(0,a.jsx)(I.ZP.Button,{title:v.formatMessage(ey.inviteMemberInviteCancelButton),color:"neutral",onClick:function(){return w.vm.closeModal(w.B.InviteUsersToWorkspace)}}),children:(0,a.jsxs)("div",{className:"flex flex-col text-sm",children:[(0,a.jsx)("div",{className:"mb-3 text-gray-500 dark:text-gray-400",children:(0,a.jsx)(M.Z,(0,r._)({},ey.inviteMemberModalDescription))}),(0,a.jsx)("label",{className:"mb-2",htmlFor:"add-member-emails",id:"add-emails-label",children:(0,a.jsx)(M.Z,(0,r._)({},ey.addEmailsFieldName))}),(0,a.jsx)(F,{value:b,onChange:k,className:C?"react-select--invalid":""}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:C?"text-red-500":"text-gray-500 dark:text-gray-200",children:(0,a.jsx)(M.Z,(0,s._)((0,r._)({},ey.maxInvitesCounter),{values:{num:b.length,max:30}}))}),(0,a.jsx)(_.z,{color:"none",children:(0,a.jsx)(M.Z,(0,r._)({},ey.clearAllEntries))})]})]})})}var ej=y.Z.div(eg()),eM=y.Z.h1(ev()),ek=y.Z.span(ex()),ey=(0,k.vU)({adminBrowserPageTitle:{id:"adminPage.adminBrowserPageTitle",defaultMessage:"ChatGPT - Member admin",description:"The title of the admin page."},adminPageTitle:{id:"adminPage.adminPageTitle",defaultMessage:"Member admin",description:"The title of the admin page."},workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found",description:"The title of the admin page."},totalMembers:{id:"adminPage.totalMembers",defaultMessage:"{planName} \xb7 {totalMembers} {totalMembers, plural, one {member} other {members}}",description:"The number of users in a workspace"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat",description:"Navigation button to return to main chat page"},allMembers:{id:"adminPage.allMembers",defaultMessage:"All members",description:"Navigation tab button"},pendingInvites:{id:"adminPage.pendingInvites",defaultMessage:"Pending invites",description:"Navigation tab button"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics",description:"Analytics sidebar item"},inviteMemberButton:{id:"adminPage.inviteMemberButton",defaultMessage:"Invite member",description:"The title of the invite member button"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace",description:"The title of the invite member modal"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace",description:"The title of the invite member modal when a workspace has no name"},inviteMemberInviteSubmitButton:{id:"adminPage.inviteMemberInviteSubmitButton",defaultMessage:"Send invites",description:"The title of the invite member modal submit button"},inviteMemberInviteSubmitButtonLoading:{id:"adminPage.inviteMemberInviteSubmitButtonLoading",defaultMessage:"Sending invites...",description:"Button label while inviting members"},inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel",description:"The title of the invite member modal cancel button"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training.",description:"The description of the invite member modal"},maxInvitesCounter:{id:"adminPage.maxInvitesCounter",defaultMessage:"{num}/{max} invites at a time",description:"The description of the invite member modal"},clearAllEntries:{id:"adminPage.clearAllEntries",defaultMessage:"Clear all",description:"Clear all entries in the list of members to be added"},addEmailsFieldName:{id:"adminPage.addEmailsFieldName",defaultMessage:"Emails",description:"Name of input for adding emails to workspace"}}),eZ=t(14197),eN=!0;function ew(e){return(0,a.jsx)(eh,(0,r._)({},e))}ew.getLayout=function(e){return(0,a.jsx)(eZ.default,{mobilePageTitle:"Members",children:e})}},63857:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(4337),a=t(35250),i=t(95182),s=t.n(i),o=t(1454),l=t(21389),d=t(88327);function c(){var e=(0,r._)(["text-xs flex items-center justify-center gap-1"]);return c=function(){return e},e}function u(){var e=(0,r._)(["dark:text-white disabled:text-gray-300 dark:disabled:text-gray-400"]);return u=function(){return e},e}function m(){var e=(0,r._)(["flex-grow flex-shrink-0"]);return m=function(){return e},e}function f(e){var n=e.currentPage,t=e.onChangeIndex,r=e.length,i=e.className,l=function(e){t(s()(n+e,0,r-1))};return(0,a.jsxs)(g,{className:i,children:[(0,a.jsx)(v,{onClick:function(){return l(-1)},disabled:0===n,children:(0,a.jsx)(d.ZP,{size:"xsmall",icon:o.YFh})}),(0,a.jsx)(x,{children:"".concat(n+1," / ").concat(r)}),(0,a.jsx)(v,{onClick:function(){return l(1)},disabled:n===r-1,children:(0,a.jsx)(d.ZP,{size:"xsmall",icon:o.Tfp})})]})}var g=l.Z.div(c()),v=l.Z.button(u()),x=l.Z.span(m())},92720:function(e,n,t){"use strict";var r=t(39324),a=t(71209),i=t(70216),s=t(35250),o=t(47428),l=t(70079),d=t(89705),c={Root:o.fC,Trigger:function(e){return(0,s.jsx)(d.J7,(0,r._)({$as:o.xz},e))},Portal:o.Uv,Content:function(e){return(0,s.jsx)(d.ay,(0,r._)({$as:o.VY,sideOffset:4,align:"start"},e))},Item:l.forwardRef(function(e,n){var t=e.children,l=e.onSelect,c=(0,i._)(e,["children","onSelect"]);return(0,s.jsx)(d.mS,(0,a._)((0,r._)({$as:o.ck,ref:n,onSelect:l},c),{children:t}))})};n.Z=c},10580:function(e,n,t){"use strict";var r=t(39324),a=t(71209),i=t(70216),s=t(35250),o=t(48349),l=t(70079),d=t(1454),c=t(88327),u=t(89705),m={Root:o.fC,Trigger:function(e){return(0,s.jsx)(u.J7,(0,r._)({$as:o.xz},e))},Value:o.B4,Icon:function(){return(0,s.jsx)(o.JO,{children:(0,s.jsx)(c.ZP,{icon:d.bTu,size:"small"})})},Portal:o.h_,Content:function(e){var n=e.children,t=(0,i._)(e,["children"]);return(0,s.jsxs)(u.ay,(0,a._)((0,r._)({$as:o.VY,side:"bottom",sideOffset:4,position:"popper"},t),{children:[(0,s.jsx)(o.u_,{className:"flex h-8 cursor-default items-center justify-center bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-200",children:(0,s.jsx)(c.ZP,{icon:d.rH8})}),(0,s.jsx)(o.l_,{children:n}),(0,s.jsx)(o.$G,{className:"flex h-8 cursor-default items-center justify-center bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-200",children:(0,s.jsx)(c.ZP,{icon:d.bTu})})]}))},Item:l.forwardRef(function(e,n){var t=e.children,l=(0,i._)(e,["children"]);return(0,s.jsx)(u.mS,(0,a._)((0,r._)({$as:o.ck,ref:n},l),{children:(0,s.jsx)(o.eT,{children:t})}))})};n.Z=m},55629:function(e,n,t){"use strict";var r=t(39324),a=t(71209),i=t(22830),s=t(35250),o=t(19841),l=t(70079);n.Z={Root:function(e){var n=e.children,t=e.fixed,r=e.className,a=e.size,d=(0,l.useRef)(null),c=(0,l.useRef)(null),u=(0,i._)((0,l.useState)(!1),2),m=u[0],f=u[1];return(0,l.useEffect)(function(){var e=d.current,n=c.current;if(e&&n){var t=new ResizeObserver(function(){f(n.scrollHeight>e.clientHeight)});return t.observe(e),function(){return t.disconnect()}}},[]),(0,s.jsx)("div",{className:(0,o.default)("overflow-y-auto text-gray-600 dark:text-gray-300","normal"===(void 0===a?"normal":a)?"text-base":"text-sm",m&&"pr-1",r),ref:d,children:(0,s.jsx)("table",{className:(0,o.default)("w-full border-separate border-spacing-0",void 0!==t&&t&&"table-fixed"),ref:c,children:n})})},Header:function(e){var n=e.children;return(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:n})})},HeaderCell:function(e){var n=e.textAlign,t=e.children,r=e.className;return(0,s.jsx)("th",{className:(0,o.default)("sticky top-0 z-10 border-b border-black/10 bg-white py-2 pr-4 font-medium last:pr-0 dark:border-white/10","left"===(void 0===n?"left":n)?"text-left":"text-right",void 0===r?"dark:bg-gray-900":r),children:t})},Body:function(e){var n=e.children;return(0,s.jsx)("tbody",{children:n})},Row:function(e){var n=e.children,t=e.disabled,i=void 0!==t&&t;return(0,s.jsx)("tr",(0,a._)((0,r._)({},i?{"data-disabled":!0}:{}),{className:(0,o.default)(i?"pointer-events-none":""),children:n}))},Cell:function(e){var n=e.textAlign,t=e.children,r=e.className;return(0,s.jsx)("td",{className:(0,o.default)("border-b border-black/10  pr-4 last:pr-0 dark:border-white/10 [tr:last-child_&]:border-b-0","left"===(void 0===n?"left":n)?"text-left":"text-right",r),children:(0,s.jsx)("div",{className:"py-2 [tr[data-disabled=true]_&]:opacity-50",children:t})})},Actions:function(e){var n=e.children;return(0,s.jsx)("div",{className:"text-md flex items-center justify-end gap-2",children:n})}}},89705:function(e,n,t){"use strict";t.d(n,{J7:function(){return l},ay:function(){return c},mS:function(){return d}});var r=t(4337),a=t(21389);function i(){var e=(0,r._)(["\ntext-gray-700 border border-transparent inline-flex h-9 items-center justify-center gap-4 rounded-md bg-white px-3 text-sm\ndark:text-gray-200 dark:transparent dark:bg-transparent\nleading-none outline-none cursor-pointer\nhover:bg-gray-50 dark:hover:bg-[#494A54]\nfocus-visible:border-blue-500 dark:focus-visible:border-blue-500\nradix-state-active:text-gray-600 dark:radix-state-active::text-gray-400\nradix-disabled:cursor-auto radix-disabled:bg-transparent radix-disabled:text-gray-500 dark:radix-disabled:bg-transparent dark:radix-disabled:text-gray-500\n"]);return i=function(){return e},e}function s(){var e=(0,r._)(["\nrelative flex h-8 cursor-pointer select-none items-center rounded-md pl-3 pr-7 text-sm leading-none text-gray-700 hover:bg-gray-50 radix-disabled:pointer-events-none radix-highlighted:bg-gray-50 radix-disabled:text-gray-300 radix-highlighted:outline-none dark:text-gray-200 dark:hover:bg-[#2E2F33] dark:radix-highlighted:bg-[#2E2F33] dark:radix-disabled:text-gray-600 dark:radix-highlighted:hover:bg-[#2E2F33]\n"]);return s=function(){return e},e}function o(){var e=(0,r._)(["\nmin-w-[220px] rounded-lg bg-white dark:bg-gray-900 p-[5px] shadow-xs will-change-[opacity,transform] radix-side-bottom:animate-slideUpAndFade radix-side-left:animate-slideRightAndFade radix-side-right:animate-slideLeftAndFade radix-side-top:animate-slideDownAndFade\n"]);return o=function(){return e},e}var l=a.Z.button(i()),d=a.Z.div(s()),c=a.Z.div(o())}},function(e){e.O(0,[2798,8948,3504,3551,7638,6493,9774,2888,179],function(){return e(e.s=69714)}),_N_E=e.O()}]);