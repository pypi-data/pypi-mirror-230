"use strict";(self.webpackChunk_gavincyi_jupyterlab_executor=self.webpackChunk_gavincyi_jupyterlab_executor||[]).push([[220],{220:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var r=n(322),s=n(426),i=n(888),o=n(609),a=n(380),l=n(716),c=n(901),u=n(29);let h=0;const d=Object.create(null),g=["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","columns","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","flex-order","font-weight","grid-area","grid-column","grid-column-end","grid-column-span","grid-column-start","grid-row","grid-row-end","grid-row-span","grid-row-start","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","flood-opacity","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width"];for(const e of g)for(const t of["-webkit-","-ms-","-moz-","-o-",""])d[t+e]=!0;function f(e,t){return t&&"number"==typeof t&&!d[e]?`${e}:${t}px`:`${e}:${t}`}function p(e){return e.sort(((e,t)=>e[0]>t[0]?1:-1))}function y(e){return e.map((([e,t])=>Array.isArray(t)?t.map((t=>f(e,t))).join(";"):f(e,t))).join(";")}function m(e,t){return-1===e.indexOf("&")?`${t} ${e}`:e.replace(/&/g,t)}function _(e,t,n,r,s){const{style:i,nested:o,isUnique:a}=function(e,t){const n=[],r=[];for(const t of Object.keys(e)){const i=t.trim(),o=e[t];36!==i.charCodeAt(0)&&null!=o&&("object"!=typeof o||Array.isArray(o)?n.push([(s=i,s.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)).replace(/^ms-/,"-ms-")),o]):r.push([i,o]))}var s;return{style:y(p(n)),nested:t?r:p(r),isUnique:!!e.$unique}}(t,""!==e);let l=i;if(64===e.charCodeAt(0)){const t={selector:e,styles:[],rules:[],style:s?"":i};n.push(t),i&&s&&t.styles.push({selector:s,style:i,isUnique:a});for(const[e,n]of o)l+=e+_(e,n,t.rules,t.styles,s)}else{const t=s?m(e,s):e;i&&r.push({selector:t,style:i,isUnique:a});for(const[e,s]of o)l+=e+_(e,s,n,r,t)}return l}function v(e,t,n,r,s,i){for(const{selector:n,style:o,isUnique:a}of r){const r=i?m(n,s):n,l=a?`u\0${(++h).toString(36)}`:`s\0${t}\0${o}`,c=new S(o,l);c.add(new $(r,`k\0${t}\0${r}`)),e.add(c)}for(const{selector:r,style:o,rules:a,styles:l}of n){const n=new C(r,o,`r\0${t}\0${r}\0${o}`);v(n,t,a,l,s,i),e.add(n)}}function b(e){let t="";for(let n=0;n<e.length;n++)t+=e[n];return t}const x={add:()=>{},change:()=>{},remove:()=>{}};class w{constructor(e=x){this.changes=e,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}add(e){const t=this._counters[e.id]||0,n=this._children[e.id]||e.clone();if(this._counters[e.id]=t+1,0===t)this._children[n.id]=n,this._keys.push(n.id),this.sheet.push(n.getStyles()),this.changeId++,this.changes.add(n,this._keys.length-1);else if(n instanceof w&&e instanceof w){const t=this._keys.indexOf(e.id),r=n.changeId;n.merge(e),n.changeId!==r&&(this.sheet.splice(t,1,n.getStyles()),this.changeId++,this.changes.change(n,t,t))}}remove(e){const t=this._counters[e.id];if(t){this._counters[e.id]=t-1;const n=this._children[e.id],r=this._keys.indexOf(n.id);if(1===t)delete this._counters[e.id],delete this._children[e.id],this._keys.splice(r,1),this.sheet.splice(r,1),this.changeId++,this.changes.remove(n,r);else if(n instanceof w&&e instanceof w){const t=n.changeId;n.unmerge(e),n.changeId!==t&&(this.sheet.splice(r,1,n.getStyles()),this.changeId++,this.changes.change(n,r,r))}}}values(){return this._keys.map((e=>this._children[e]))}merge(e){for(const t of e.values())this.add(t);return this}unmerge(e){for(const t of e.values())this.remove(t);return this}clone(){return(new w).merge(this)}}class ${constructor(e,t){this.selector=e,this.id=t}getStyles(){return this.selector}clone(){return this}}class S extends w{constructor(e,t){super(),this.style=e,this.id=t}getStyles(){return`${this.sheet.join(",")}{${this.style}}`}clone(){return new S(this.style,this.id).merge(this)}}class C extends w{constructor(e,t,n){super(),this.rule=e,this.style=t,this.id=n}getStyles(){return`${this.rule}{${this.style}${b(this.sheet)}}`}clone(){return new C(this.rule,this.style,this.id).merge(this)}}function j(e,t){return`f${function(e){let t=5381,n=e.length;for(;n--;)t=33*t^e.charCodeAt(n);return(t>>>0).toString(36)}(e)}`}class E extends w{constructor(e,t){super(t),this.id=e}registerStyle(e){const t=[],n=[],r=_("&",e,t,n),s=j(r);return v(this,r,t,n,`.${s}`,!0),s}registerKeyframes(e){return this.registerHashRule("@keyframes",e)}registerHashRule(e,t){const n=[],r=[],s=_("",t,n,r),i=j(s),o=new C(`${e} ${i}`,"",`h\0${s}\0${e}`);return v(o,s,n,r,"",!1),this.add(o),i}registerRule(e,t){const n=[],r=[];v(this,_(e,t,n,r),n,r,"",!1)}registerCss(e){return this.registerRule("",e)}getStyles(){return b(this.sheet)}clone(){return new E(this.id,this.changes).merge(this)}}function k(e){var t={};for(var n in e){var r=e[n];if("$nest"===n){var s=r;for(var i in s){var o=s[i];t[i]=k(o)}}else"$debugName"===n?t.$displayName=r:t[n]=r}return t}var R="undefined"==typeof requestAnimationFrame?function(e){return setTimeout(e)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window);function I(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,s=e;r<s.length;r++){var i=s[r];if(null!=i&&!1!==i)for(var o in i){var a=i[o];(a||0===a)&&("$nest"===o&&a?n[o]=n.$nest?I(n.$nest,a):a:-1!==o.indexOf("&")||0===o.indexOf("@media")?n[o]=n[o]?I(n[o],a):a:n[o]=a)}}return n}var A=function(){return new E(`f${(++h).toString(36)}`,undefined)},N=new(function(){function e(e){var t=this,n=e.autoGenerateTag;this.cssRaw=function(e){e&&(t._raw+=e||"",t._pendingRawChange=!0,t._styleUpdated())},this.cssRule=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var s=k(I.apply(void 0,n));t._freeStyle.registerRule(e,s),t._styleUpdated()},this.forceRenderStyles=function(){var e=t._getTag();e&&(e.textContent=t.getStyles())},this.fontFace=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=t._freeStyle,s=0,i=e;s<i.length;s++){var o=i[s];r.registerRule("@font-face",o)}t._styleUpdated()},this.getStyles=function(){return(t._raw||"")+t._freeStyle.getStyles()},this.keyframes=function(e){var n=function(e){var t={};for(var n in e)"$debugName"!==n&&(t[n]=e[n]);return e.$debugName&&(t.$displayName=e.$debugName),t}(e),r=t._freeStyle.registerKeyframes(n);return t._styleUpdated(),r},this.reinit=function(){var e=A();t._freeStyle=e,t._lastFreeStyleChangeId=e.changeId,t._raw="",t._pendingRawChange=!1;var n=t._getTag();n&&(n.textContent="")},this.setStylesTarget=function(e){t._tag&&(t._tag.textContent=""),t._tag=e,t.forceRenderStyles()},this.stylesheet=function(e){for(var n={},r=0,s=Object.getOwnPropertyNames(e);r<s.length;r++){var i=s[r],o=e[i];o&&(o.$debugName=i,n[i]=t.style(o))}return n};var r=A();this._autoGenerateTag=n,this._freeStyle=r,this._lastFreeStyleChangeId=r.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return e.prototype._afterAllSync=function(e){var t=this;this._pending++;var n=this._pending;R((function(){n===t._pending&&e()}))},e.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var e="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(e),this._tag=e,e}},e.prototype._styleUpdated=function(){var e=this,t=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||t!==n)&&(this._lastFreeStyleChangeId=t,this._pendingRawChange=!1,this._afterAllSync((function(){return e.forceRenderStyles()})))},e.prototype.style=function(){var e=this._freeStyle.registerStyle(k(I.apply(void 0,arguments)));return this._styleUpdated(),e},e}())({autoGenerateTag:!0}),T=(N.setStylesTarget,N.cssRaw,N.cssRule,N.forceRenderStyles,N.fontFace,N.getStyles,N.keyframes,N.reinit,N.style);N.stylesheet;const F=T({marginTop:"6px",marginBottom:"0",borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)"}),U=T({boxSizing:"border-box",width:"100%",height:"2em",padding:"1px 18px 2px 7px",color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",fontWeight:300,backgroundColor:"var(--jp-layout-color1)",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",$nest:{"&:active":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"},"&:focus":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"}}});class O extends o.ReactWidget{constructor(e,t){super(),this._path="",this._selectedExecutor="",this._arguments="",this._environVariables="",this._options=[],this._signal=new c.Signal(this),this._path=e,this._options=t,this._selectedExecutor=t[0].command}getValue(){const e=this._selectedExecutor.replace("{path}",this._path).replace("{args}",this._arguments);return 0===this._environVariables.length?e:`${this._environVariables} ${e}`}render(){return u.createElement("div",{className:F},u.createElement("label",{htmlFor:"executor"},"Executor"),u.createElement("select",{id:"executor",className:U,onChange:e=>{this._selectedExecutor=e.target.value,this._signal.emit()}},this._options.map((e=>u.createElement("option",{value:e.command},e.name)))),u.createElement("label",null,"Path",u.createElement("input",{type:"text",id:"path",className:U,value:this._path,disabled:!0})),u.createElement("label",null,"Arugments",u.createElement("input",{type:"text",id:"arguments",className:U,onChange:e=>{this._arguments=e.target.value,this._signal.emit()}})),u.createElement("label",null,"Environment variables",u.createElement("input",{type:"text",id:"environVariables",className:U,onChange:e=>{this._environVariables=e.target.value,this._signal.emit()}})),u.createElement("label",null,"Command",u.createElement(o.UseSignal,{signal:this._signal},(()=>u.createElement("input",{type:"text",className:U,value:this.getValue(),disabled:!0})))))}}var q=n(527),z=n.n(q);const B="@gavincyi/jupyterlab-executor:executor",V={id:B,autoStart:!0,requires:[r.IFileBrowserFactory,s.ISettingRegistry],activate:function(e,t,n){console.log("JupyterLab extension jupyterlab-executor is activated!");const{tracker:r}=t;let s=[];const c=e=>{s=e.composite.executors};Promise.all([n.load(B),e.restored]).then((([e])=>{c(e),e.changed.connect(c)})),e.commands.addCommand("gavincyi/jupyterlab-executor:execute",{label:"Execute",caption:"Execute script",icon:i.buildIcon,execute:()=>{var t,n;const i=r.currentWidget;if(!i)return;const c=null===(n=null===(t=null==e?void 0:e.paths)||void 0===t?void 0:t.directories)||void 0===n?void 0:n.serverRoot,u=i.selectedItems().next().value.path;!function(e,t,n){(0,o.showDialog)({title:"Execute",buttons:[o.Dialog.cancelButton({label:"Cancel"}),o.Dialog.createButton({label:"Copy Command"}),o.Dialog.okButton({label:"Execute"})],body:new O(t,n)}).then((async t=>{if(t.button.accept)if("Execute"===t.button.label){console.log("Execute the command");const n=new a.TerminalManager,r=await n.startNew(),s=new l.Terminal(r,{initialCommand:`${t.value}`});s.title.closable=!0;const i=new o.MainAreaWidget({content:s});i.id=`jupyter-executor-${Date.now()}`,i.title.label="Execute",i.title.closable=!0,i.isAttached||e.shell.add(i,"main"),e.shell.activateById(i.id)}else"Copy Command"===t.button.label?o.Clipboard.copyToSystem(t.value):console.log(`${t.button.label}`);else console.log("Canceled")}))}(e,z().join(c,u),s)}})}}}}]);