"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9197],{51471:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(34896),i=t(88038),s=t.n(i),a=t(86677),o=(t(27378),t(90768)),c=t(35100),l=t(64989),u=t(48114),d=t(51365),p=t(29549),f=t(60709),m=t(24246),v=function(){var e=(0,a.useRouter)();return(0,m.jsx)(r.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,m.jsxs)(r.xu,{children:[(0,m.jsxs)(r.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,m.jsx)(r.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,m.jsx)(p.zx,{size:"sm",variant:"outline",onClick:function(){e.push(f.fz)},children:"Configure"})]}),(0,m.jsxs)(r.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},h=function(e){var n=e.children,t=e.title,i=(0,o.hz)(),p=(0,a.useRouter)(),f="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,h=!(i.flags.privacyRequestsConfiguration&&f),b=(0,d.JE)(void 0,{skip:h}).data,y=(0,d.PW)(void 0,{skip:h}).data,j=i.flags.privacyRequestsConfiguration&&(!b||!y)&&f;return(0,m.jsxs)(r.kC,{"data-testid":t,direction:"column",children:[(0,m.jsxs)(s(),{children:[(0,m.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,m.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,m.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,m.jsx)(c.Z,{}),(0,m.jsx)(u.Z,{}),(0,m.jsxs)(r.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,m.jsx)(r.xu,{flex:0,flexShrink:0,children:(0,m.jsx)(l.U,{})}),(0,m.jsxs)(r.kC,{direction:"column",flex:1,minWidth:0,children:[j?(0,m.jsx)(v,{}):null,n]})]})]})}},86054:function(e,n,t){var r=t(90849),i=t(90089),s=t(34896),a=t(24246),o=["title","children"];function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.title,t=e.children,r=(0,i.Z)(e,o);return(0,a.jsxs)(s.xu,l(l({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},r),{},{children:[(0,a.jsx)(s.X6,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:n}),(0,a.jsx)(s.Kq,{p:6,spacing:6,children:t})]}))}},24753:function(e,n,t){t.d(n,{MA:function(){return u},Vo:function(){return p},t5:function(){return d}});var r=t(90849),i=t(34896),s=t(24246);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var c=function(e){var n=e.message;return(0,s.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",n]})},l=function(e){var n=e.message;return(0,s.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",n]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var n=(0,s.jsx)(c,{message:e});return o(o({},u),{description:n})},p=function(e){var n=(0,s.jsx)(l,{message:e});return o(o({},u),{description:n,status:"error"})}},85915:function(e,n,t){t.d(n,{Z:function(){return N}});var r=t(55732),i=t(97865),s=t(34707),a=t.n(s),o=t(70409),c=t(34896),l=t(29549),u=t(34090),d=t(86677),p=t(27378),f=t(6848),m=t(86054),v=t(43139),h=t(78624),b=t(60709),y=t(24753),j=t(75846),x=t(20477),g=t(20800),_=t(24246),O=(0,h.MM)(x.J7).map((function(e){return{label:g.y.get(e.label)||e.label,value:e.value}})),w=(0,h.MM)(x.QT).map((function(e){return{label:g.B.get(e.label)||e.label,value:e.value}})),P=function(){var e=(0,u.u6)(),n=e.values,t=e.setFieldValue,r=(0,p.useMemo)((function(){return n.consent_mechanism===x.J7.NOTICE_ONLY}),[n.consent_mechanism]);return(0,p.useEffect)((function(){r&&(t("enforcement_level",x.QT.NOT_APPLICABLE),t("has_gpc_flag",!1))}),[r,t]),(0,_.jsxs)(m.Z,{title:"Consent mechanism",children:[(0,_.jsx)(v.AP,{label:"If this use of data requires consent, you can specify the method of consent here.",name:"consent_mechanism",options:O,variant:"stacked"}),(0,_.jsx)(v.AP,{label:"Select the enforcement level for this consent mechanism",name:"enforcement_level",options:w,variant:"stacked",isDisabled:r}),(0,_.jsxs)(c.xu,{children:[(0,_.jsx)(c.xv,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Configure whether this notice conforms to the Global Privacy Control."}),(0,_.jsx)(v.w8,{label:"GPC Enabled",name:"has_gpc_flag",variant:"condensed",isDisabled:r})]})]})},k=t(90849),C=t(90089),E=t(68301),S=["created_at","updated_at","privacy_notice_history_id","version","cookies"];function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach((function(n){(0,k.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M={name:"",regions:[],consent_mechanism:x.J7.OPT_IN,data_uses:[],enforcement_level:x.QT.SYSTEM_WIDE,displayed_in_api:!0,displayed_in_overlay:!0,displayed_in_privacy_center:!0},q=E.Ry().shape({name:E.Z_().required().label("Title"),data_uses:E.IX(E.Z_()).min(1,"Must assign at least one data use").label("Data uses"),regions:E.IX(E.Z_()).min(1,"Must assign at least one location").label("Locations")}),z=t(14441),R=t.n(z),A=function(e){var n=e.isEditing,t=(0,u.u6)(),r=t.values,i=t.setFieldValue;return(0,p.useEffect)((function(){if(!n){var e=R()(r.name);i("notice_key",e)}}),[r.name,n,i]),(0,_.jsx)(v.j0,{name:"notice_key",label:"Key used in Fides cookie",variant:"stacked"})},I=t(15749),T=(0,h.MM)(x._F),N=function(e){var n=e.privacyNotice,t=(0,d.useRouter)(),s=(0,o.pm)(),x=n?function(e){var n,t,r,i,s;return e.created_at,e.updated_at,e.privacy_notice_history_id,e.version,e.cookies,Z(Z({},(0,C.Z)(e,S)),{},{name:null!==(n=e.name)&&void 0!==n?n:M.name,regions:null!==(t=e.regions)&&void 0!==t?t:M.regions,consent_mechanism:null!==(r=e.consent_mechanism)&&void 0!==r?r:M.consent_mechanism,data_uses:null!==(i=e.data_uses)&&void 0!==i?i:M.data_uses,enforcement_level:null!==(s=e.enforcement_level)&&void 0!==s?s:M.enforcement_level})}(n):M;(0,j.fd)();var g=(0,f.C)(j.qv),O=(0,I.vL)(),w=(0,i.Z)(O,1)[0],k=(0,I.p4)(),E=(0,i.Z)(k,1)[0],D=(0,p.useMemo)((function(){return!!n}),[n]),z=function(){var e=(0,r.Z)(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=6;break}return e.next=3,w([n]);case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,E([n]);case 8:r=e.sent;case 9:(0,h.D4)(r)?s((0,y.Vo)((0,h.e$)(r.error))):(s((0,y.t5)("Privacy notice ".concat(D?"updated":"created"))),D||t.push(b.IT));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,_.jsx)(u.J9,{initialValues:x,enableReinitialize:!0,onSubmit:z,validationSchema:q,children:function(e){var n=e.dirty,r=e.isValid,i=e.isSubmitting;return(0,_.jsx)(u.l0,{children:(0,_.jsxs)(c.Kq,{spacing:10,children:[(0,_.jsxs)(c.Kq,{spacing:6,children:[(0,_.jsxs)(m.Z,{title:"Privacy notice details",children:[(0,_.jsx)(v.j0,{label:"Title of the consent notice as displayed to the user",name:"name",variant:"stacked"}),(0,_.jsx)(v.Ks,{label:"Privacy notice displayed to the user",name:"description",variant:"stacked"})]}),(0,_.jsx)(P,{}),(0,_.jsxs)(m.Z,{title:"Privacy notice configuration",children:[(0,_.jsx)(v.AP,{name:"data_uses",label:"Data uses associated with this privacy notice",options:g,variant:"stacked",isMulti:!0,isRequired:!0}),(0,_.jsx)(v.Ks,{label:"Description of the privacy notice (visible to internal users only)",name:"internal_description",variant:"stacked"}),(0,_.jsx)(v.AP,{name:"regions",label:"Locations where consent notice is shown to visitors",options:T,variant:"stacked",isMulti:!0,isRequired:!0}),(0,_.jsx)(A,{isEditing:D}),(0,_.jsxs)(c.xu,{children:[(0,_.jsx)(c.xv,{fontSize:"sm",fontWeight:"medium",mb:2,children:"Configure the user experience for how this notice is displayed"}),(0,_.jsxs)(c.Ug,{justifyContent:"space-between",children:[(0,_.jsx)(v.w8,{label:"Show in Privacy Preference Center",name:"displayed_in_privacy_center",variant:"condensed"}),(0,_.jsx)(v.w8,{label:"Show in Privacy Overlay",name:"displayed_in_overlay",variant:"condensed"}),(0,_.jsx)(v.w8,{label:"API Only",name:"displayed_in_api",variant:"condensed"})]})]})]})]}),(0,_.jsxs)(l.hE,{size:"sm",spacing:2,children:[(0,_.jsx)(l.zx,{variant:"outline",onClick:function(){t.back()},children:"Cancel"}),(0,_.jsx)(l.zx,{type:"submit",variant:"primary",size:"sm",isDisabled:i||!n||!r,isLoading:i,"data-testid":"save-btn",children:"Save"})]})]})})}})}},20800:function(e,n,t){t.d(n,{B:function(){return i},y:function(){return r}});var r=new Map([["opt_in","Opt in"],["notice_only","Notice only"],["opt_out","Opt out"]]),i=new Map([["system_wide","System wide"],["frontend","Front end"],["not_applicable","Not applicable"]])}}]);