"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2153],{55447:function(e,n,r){var t=r(90849),i=r(60530),o=r(34896),s=r(29549),c=r(24246);function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.Z=function(e){var n=e.isOpen,r=e.onClose,t=e.onConfirm,a=e.title,l=e.message,d=e.cancelButtonText,p=e.cancelButtonThemingProps,f=e.continueButtonText,b=e.continueButtonThemingProps,h=e.isLoading,g=e.returnFocusOnClose,j=e.isCentered,v=e.testId,y=void 0===v?"confirmation-modal":v,O=e.icon;return(0,c.jsxs)(i.u_,{isOpen:n,onClose:r,size:"lg",returnFocusOnClose:null===g||void 0===g||g,isCentered:j,children:[(0,c.jsx)(i.ZA,{}),(0,c.jsxs)(i.hz,{textAlign:"center",p:6,"data-testid":y,children:[O?(0,c.jsx)(o.M5,{mb:2,children:O}):null,a?(0,c.jsx)(i.xB,{fontWeight:"medium",pb:0,children:a}):null,l?(0,c.jsx)(i.fe,{children:l}):null,(0,c.jsx)(i.mz,{children:(0,c.jsxs)(o.MI,{columns:2,width:"100%",children:[(0,c.jsx)(s.zx,u(u({variant:"outline",mr:3,onClick:r,"data-testid":"cancel-btn",isDisabled:h},p),{},{children:d||"Cancel"})),(0,c.jsx)(s.zx,u(u({colorScheme:"primary",onClick:t,"data-testid":"continue-btn",isLoading:h},b),{},{children:f||"Continue"}))]})})]})]})}},64860:function(e,n,r){var t=r(30794),i=(r(27378),r(74011)),o=r(24246);n.Z=function(e){var n=e.daysLeft,r=e.includeText,s=e.status;if(!n||s===i.q.COMPLETE||s===i.q.CANCELED||s===i.q.DENIED||s===i.q.IDENTITY_UNVERIFIED)return null;var c="";switch(!0){case n>=10:c="green.500";break;case n<10&&n>4:c="orange.500";break;case n<5:c="red.400"}var a=r?"".concat(n," days left"):n;return(0,o.jsx)(t.Vp,{backgroundColor:c,color:"white",children:a})}},51471:function(e,n,r){r.d(n,{Z:function(){return g}});var t=r(34896),i=r(88038),o=r.n(i),s=r(86677),c=(r(27378),r(90768)),a=r(35100),u=r(64989),l=r(48114),d=r(51365),p=r(29549),f=r(60709),b=r(24246),h=function(){var e=(0,s.useRouter)();return(0,b.jsx)(t.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,b.jsxs)(t.xu,{children:[(0,b.jsxs)(t.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,b.jsx)(t.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,b.jsx)(p.zx,{size:"sm",variant:"outline",onClick:function(){e.push(f.fz)},children:"Configure"})]}),(0,b.jsxs)(t.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},g=function(e){var n=e.children,r=e.title,i=(0,c.hz)(),p=(0,s.useRouter)(),f="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,g=!(i.flags.privacyRequestsConfiguration&&f),j=(0,d.JE)(void 0,{skip:g}).data,v=(0,d.PW)(void 0,{skip:g}).data,y=i.flags.privacyRequestsConfiguration&&(!j||!v)&&f;return(0,b.jsxs)(t.kC,{"data-testid":r,direction:"column",children:[(0,b.jsxs)(o(),{children:[(0,b.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,b.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,b.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,b.jsx)(a.Z,{}),(0,b.jsx)(l.Z,{}),(0,b.jsxs)(t.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,b.jsx)(t.xu,{flex:0,flexShrink:0,children:(0,b.jsx)(u.U,{})}),(0,b.jsxs)(t.kC,{direction:"column",flex:1,minWidth:0,children:[y?(0,b.jsx)(h,{}):null,n]})]})]})}},13807:function(e,n,r){var t=r(24246);n.Z=function(e){var n=e.data,r=e.revealPII?n:n.replace(/./g,"*");return(0,t.jsx)(t.Fragment,{children:r})}},95946:function(e,n,r){var t=r(62709),i=(r(27378),r(24246));n.Z=function(e){var n=e.revealPII,r=e.onChange;return(0,i.jsx)(t.r,{colorScheme:"secondary",isChecked:n,onChange:function(e){return r(e.target.checked)}})}},19099:function(e,n,r){var t=r(34896),i=r(24246),o={approved:{bg:"yellow.500",label:"Approved"},complete:{bg:"green.500",label:"Completed"},awaiting_email_send:{bg:"gray.400",label:"Awaiting Email Send"},denied:{bg:"red.500",label:"Denied"},canceled:{bg:"red.600",label:"Canceled"},error:{bg:"red.800",label:"Error"},in_processing:{bg:"orange.500",label:"In Progress"},paused:{bg:"gray.400",label:"Paused"},pending:{bg:"blue.400",label:"New"},identity_unverified:{bg:"red.400",label:"Unverified"},requires_input:{bg:"yellow.400",label:"Requires Input"}};n.Z=function(e){var n=e.status;return(0,i.jsx)(t.Ct,{color:"white",bg:o[n].bg,width:"100%",lineHeight:"18px",textAlign:"center","data-testid":"request-status-badge",children:o[n].label})}},1540:function(e,n,r){var t=r(30794),i=r(34896),o=r(9481),s=(r(27378),r(1326)),c=r(24246);n.Z=function(e){var n=e.rules,r=Array.from(new Set(n.filter((function(e){return Object.values(o.U).includes(e.action_type)})).map((function(e){return(0,s.kC)(e.action_type)})))).map((function(e){return(0,c.jsx)(t.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:e},e)}));return(0,c.jsx)(i.xu,{children:r})}},9408:function(e,n,r){r.d(n,{HK:function(){return o},VY:function(){return t.V}});var t=r(36653),i=r(78624),o=function(){var e=(0,t.V)().errorAlert;return{handleError:function(n){var r="An unexpected error occurred. Please try again.";(0,i.Ot)(n)?r=n.data.detail:(0,i.tB)(n)&&(r=n.data.detail[0].msg),e(r)}}};r(27378)},36653:function(e,n,r){r.d(n,{V:function(){return d}});var t=r(90849),i=r(70409),o=r(23286),s=r(34896),c=r(93235),a=r(24246);function u(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?u(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(n,r,t){var i=l(l({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,a.jsxs)(o.bZ,{alignItems:"normal",status:"error",children:[(0,a.jsx)(o.zM,{}),(0,a.jsxs)(s.xu,{children:[r&&(0,a.jsx)(o.Cd,{children:r}),(0,a.jsx)(o.X,{children:n})]}),(0,a.jsx)(c.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)},successAlert:function(n,r,t){var i=l(l({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,a.jsxs)(o.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,a.jsx)(o.zM,{}),(0,a.jsxs)(s.xu,{children:[r&&(0,a.jsx)(o.Cd,{children:r}),(0,a.jsx)(o.X,{children:n})]}),(0,a.jsx)(c.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)}}}},40377:function(e,n,r){r.d(n,{Z:function(){return b}});var t=r(90849),i=r(32393),o=r(21084),s=r(55447),c=r(27378),a=r(24246),u=function(e){var n=e.isOpen,r=e.onClose,t=e.onApproveRequest,i=e.isLoading,o=(0,c.useCallback)((function(){t().then((function(){r()}))}),[t,r]);return(0,a.jsx)(s.Z,{isOpen:n,onClose:r,onConfirm:o,message:"Are you sure you want to approve this privacy request?",continueButtonText:"Confirm",continueButtonThemingProps:{variant:"solid"},isLoading:i,returnFocusOnClose:!1,isCentered:!0})},l=r(759),d=r(34333);function p(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function f(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?p(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var b=(0,i.Gp)((function(e,n){var r=e.buttonProps,t=e.children,i=e.onClose,s=e.subjectRequest,c=(0,l.Z)({subjectRequest:s}),p=c.handleApproveRequest,b=c.isLoading,h=(0,o.qY)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.S,f(f({ref:n,onClick:h.onOpen,isLoading:b,isDisabled:b},r),{},{"data-testid":"privacy-request-approve-btn",children:t})),(0,a.jsx)(u,{isOpen:h.isOpen,isLoading:b,onClose:function(){h.onClose(),null===i||void 0===i||i()},onApproveRequest:p})]})}))},20970:function(e,n,r){r.d(n,{Z:function(){return y}});var t=r(90849),i=r(32393),o=r(21084),s=r(60530),c=r(29549),a=r(43139),u=r(34090),l=r(27378),d=r(68301),p=r(24246),f={denialReason:""},b=function(e){var n=e.isOpen,r=e.onClose,t=e.onDenyRequest,i=(0,l.useCallback)((function(e,n){var i=n.setSubmitting;t(e.denialReason).then((function(){i(!1),r()}))}),[t,r]);return(0,p.jsxs)(s.u_,{isOpen:n,onClose:r,isCentered:!0,returnFocusOnClose:!1,children:[(0,p.jsx)(s.ZA,{}),(0,p.jsx)(s.hz,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,p.jsx)(u.J9,{initialValues:f,validationSchema:d.Ry({denialReason:d.Z_().required().label("Reason for denial")}),onSubmit:i,children:function(e){var n=e.isSubmitting,t=e.dirty,i=e.isValid;return(0,p.jsxs)(u.l0,{children:[(0,p.jsx)(s.xB,{children:"Privacy Request Denial"}),(0,p.jsx)(s.fe,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,p.jsx)(s.fe,{children:(0,p.jsx)(a.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,p.jsxs)(s.mz,{children:[(0,p.jsx)(c.zx,{size:"sm",width:"100%",maxWidth:"198px",colorScheme:"gray.200",mr:3,disabled:n,onClick:r,children:"Close"}),(0,p.jsx)(c.zx,{type:"submit",size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",disabled:!t||!i,isLoading:n,"data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})},h=r(759),g=r(34333);function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function v(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var y=(0,i.Gp)((function(e,n){var r=e.buttonProps,t=e.children,i=e.onClose,s=e.subjectRequest,c=(0,h.Z)({subjectRequest:s}),a=c.handleDenyRequest,u=c.isLoading,l=(0,o.qY)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g.S,v(v({ref:n,onClick:l.onOpen,isLoading:u,isDisabled:u},r),{},{"data-testid":"privacy-request-deny-btn",children:t})),(0,p.jsx)(b,{isOpen:l.isOpen,onClose:function(){l.onClose(),null===i||void 0===i||i()},onDenyRequest:a})]})}))},30199:function(e,n,r){var t=r(90849),i=r(55732),o=r(97865),s=r(34707),c=r.n(s),a=r(32393),u=r(34896),l=r(29549),d=r(27378),p=r(6848),f=r(78624),b=r(9408),h=r(51365),g=r(24246);function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function v(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var y=(0,a.Gp)((function(e,n){var r=e.buttonProps,t=e.handleBlur,s=e.subjectRequest,a=(0,p.T)(),j=(0,d.useState)(!1),y=j[0],O=j[1],x=(0,b.VY)(),m=x.errorAlert,P=x.successAlert,C=(0,p.C)(h.fe).errorRequests,w=(0,h.JD)(),R=(0,o.Z)(w,1)[0],q=(0,h.Fq)(),D=(0,o.Z)(q,1)[0],E=function(){var e=(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,R(C);case 3:"error"in(n=e.sent)?(a((0,h.uT)({checkAll:!1,errorRequests:[]})),m((0,f.e$)(n.error),"DSR batch automation has failed due to the following:",{duration:null})):(n.data.failed.length>0&&m((0,g.jsxs)(u.xu,{children:["DSR automation has failed for"," ",(0,g.jsx)(u.xv,{as:"span",fontWeight:"semibold",children:n.data.failed.length})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null}),n.data.succeeded.length>0&&P("Privacy request(s) are now being reprocessed.")),O(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return O(!0),e.next=5,D(s);case 5:"error"in(r=e.sent)?m((0,f.e$)(r.error),"DSR automation has failed for this privacy request due to the following:",{duration:null}):P("Privacy request is now being reprocessed."),O(!1),t&&t(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)(l.zx,v(v({},r),{},{isDisabled:y,isLoading:y,loadingText:"Reprocessing",onClick:s?S:E,ref:n,spinnerPlacement:"end",variant:"outline",_hover:{bg:"gray.100"},_loading:{opacity:1,div:{opacity:.4}},children:"Reprocess"}))}));n.Z=y},34333:function(e,n,r){r.d(n,{S:function(){return a}});var t=r(90849),i=r(32393),o=r(29549),s=r(24246);function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}var a=(0,i.Gp)((function(e,n){return(0,s.jsx)(o.zx,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({ref:n,size:"xs",bg:"white",_loading:{opacity:1,div:{opacity:.4}},_hover:{bg:"gray.100"}},e))}))},759:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(97865),i=r(51365),o=function(e){var n=e.subjectRequest,r=(0,i.RW)({fixedCacheKey:n.id}),o=(0,t.Z)(r,2),s=o[0],c=o[1],a=(0,i.F1)({fixedCacheKey:n.id}),u=(0,t.Z)(a,2),l=u[0],d=u[1],p=d.isLoading||c.isLoading;return{approveRequest:s,approveRequestResult:c,denyRequest:l,denyRequestResult:d,handleApproveRequest:function(){return s(n)},handleDenyRequest:function(e){return l({id:n.id,reason:e})},isLoading:p}}},9481:function(e,n,r){var t,i;r.d(n,{U:function(){return t},n:function(){return i}}),function(e){e.ACCESS="access",e.ERASURE="erasure",e.CONSENT="consent",e.UPDATE="update"}(t||(t={})),function(e){e.IN_PROCESSING="in_processing",e.PENDING="pending",e.COMPLETE="complete",e.ERROR="error",e.PAUSED="paused",e.RETRYING="retrying",e.SKIPPED="skipped"}(i||(i={}))}}]);