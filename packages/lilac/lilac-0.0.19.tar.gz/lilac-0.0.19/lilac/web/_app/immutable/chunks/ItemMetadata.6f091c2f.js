import{S as te,i as le,s as ne,k as D,a as Y,q as ie,e as N,l as R,m as z,h as v,c as G,r as ae,n as I,G as p,p as M,b as $,a0 as F,H as de,v as T,d as k,f as q,g as b,u as re,W as ue,X as he,a2 as me,a3 as X,y as B,z as H,A as K,B as U,a4 as _e,O as ge}from"./index.8706e7a3.js";import{$ as pe,an as be,ab as O,aO as ve,aP as ke,ay as we,aE as Se,X as Ee,as as ye,az as Ve,aG as $e,bt as Pe,bu as Fe}from"./Commands.e7100a7a.js";import{s as j,C as Ie,a as Ne}from"./notificationsStore.2895bc3e.js";function W(r,e,l){const t=r.slice();return t[2]=e[l],t}function Ae(r){let e,l;return e=new Ie({}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){K(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Le(r){let e,l;return e=new Ne({}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){K(e,t,n),l=!0},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function J(r){var f;let e,l=(r[0].formattedValue||((f=r[0].children)!=null&&f.length?"":"n/a"))+"",t,n;return{c(){e=D("div"),t=ie(l),this.h()},l(i){e=R(i,"DIV",{title:!0,class:!0});var o=z(e);t=ae(o,l),o.forEach(v),this.h()},h(){var i,o;I(e,"title",n=(i=r[0].value)==null?void 0:i.toString()),I(e,"class","truncated text-right svelte-1woyz4e"),p(e,"italic",!r[0].formattedValue&&!((o=r[0].children)!=null&&o.length))},m(i,o){$(i,e,o),F(e,t)},p(i,o){var a,c,d;o&1&&l!==(l=(i[0].formattedValue||((a=i[0].children)!=null&&a.length?"":"n/a"))+"")&&re(t,l),o&1&&n!==(n=(c=i[0].value)==null?void 0:c.toString())&&I(e,"title",n),o&1&&p(e,"italic",!i[0].formattedValue&&!((d=i[0].children)!=null&&d.length))},d(i){i&&v(e)}}}function Q(r){let e,l=[],t=new Map,n,f,i=r[0].children;const o=a=>pe(a[2].path);for(let a=0;a<i.length;a+=1){let c=W(r,i,a),d=o(c);t.set(d,l[a]=Z(d,c))}return{c(){e=D("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=R(a,"DIV",{});var c=z(e);for(let d=0;d<l.length;d+=1)l[d].l(c);c.forEach(v),this.h()},h(){p(e,"bg-blue-100",r[0].isSignal),p(e,"bg-emerald-100",r[0].isPreviewSignal)},m(a,c){$(a,e,c);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);f=!0},p(a,c){c&1&&(i=a[0].children,T(),l=ue(l,c,o,1,a,i,t,e,he,Z,null,W),q()),(!f||c&1)&&p(e,"bg-blue-100",a[0].isSignal),(!f||c&1)&&p(e,"bg-emerald-100",a[0].isPreviewSignal)},i(a){if(!f){for(let c=0;c<i.length;c+=1)b(l[c]);a&&me(()=>{f&&(n||(n=X(e,j,{},!0)),n.run(1))}),f=!0}},o(a){for(let c=0;c<l.length;c+=1)k(l[c]);a&&(n||(n=X(e,j,{},!1)),n.run(0)),f=!1},d(a){a&&v(e);for(let c=0;c<l.length;c+=1)l[c].d();a&&n&&n.end()}}}function Z(r,e){let l,t,n;return t=new oe({props:{node:e[2]}}),{key:r,first:null,c(){l=N(),B(t.$$.fragment),this.h()},l(f){l=N(),H(t.$$.fragment,f),this.h()},h(){this.first=l},m(f,i){$(f,l,i),K(t,f,i),n=!0},p(f,i){e=f;const o={};i&1&&(o.node=e[2]),t.$set(o)},i(f){n||(b(t.$$.fragment,f),n=!0)},o(f){k(t.$$.fragment,f),n=!1},d(f){f&&v(l),U(t,f)}}}function Ce(r){var C;let e,l,t,n,f,i,o=r[0].fieldName+"",a,c,d,g,_,S,A;const L=[Le,Ae],E=[];function y(s,u){return s[0].expanded?0:1}t=y(r),n=E[t]=L[t](r);let m=(r[0].formattedValue||!((C=r[0].children)!=null&&C.length))&&J(r),h=r[0].children&&r[0].expanded&&Q(r);return{c(){e=D("div"),l=D("button"),n.c(),f=Y(),i=D("div"),a=ie(o),c=Y(),m&&m.c(),d=Y(),h&&h.c(),g=N(),this.h()},l(s){e=R(s,"DIV",{class:!0});var u=z(e);l=R(u,"BUTTON",{class:!0});var w=z(l);n.l(w),w.forEach(v),f=G(u),i=R(u,"DIV",{class:!0});var V=z(i);a=ae(V,o),V.forEach(v),c=G(u),m&&m.l(u),u.forEach(v),d=G(s),h&&h.l(s),g=N(),this.h()},h(){var s;I(l,"class","p-1"),p(l,"invisible",!((s=r[0].children)!=null&&s.length)),I(i,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),M(i,"min-width","10ch"),I(e,"class","flex items-center gap-x-1 pr-2 text-xs"),p(e,"bg-blue-100",r[0].isSignal),p(e,"bg-emerald-100",r[0].isPreviewSignal),p(e,"bg-teal-200",r[0].isLabel),M(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),M(e,"line-height","1.7rem")},m(s,u){$(s,e,u),F(e,l),E[t].m(l,null),F(e,f),F(e,i),F(i,a),F(e,c),m&&m.m(e,null),$(s,d,u),h&&h.m(s,u),$(s,g,u),_=!0,S||(A=de(l,"click",r[1]),S=!0)},p(s,[u]){var V,P;let w=t;t=y(s),t!==w&&(T(),k(E[w],1,1,()=>{E[w]=null}),q(),n=E[t],n||(n=E[t]=L[t](s),n.c()),b(n,1),n.m(l,null)),(!_||u&1)&&p(l,"invisible",!((V=s[0].children)!=null&&V.length)),(!_||u&1)&&o!==(o=s[0].fieldName+"")&&re(a,o),s[0].formattedValue||!((P=s[0].children)!=null&&P.length)?m?m.p(s,u):(m=J(s),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!_||u&1)&&p(e,"bg-blue-100",s[0].isSignal),(!_||u&1)&&p(e,"bg-emerald-100",s[0].isPreviewSignal),(!_||u&1)&&p(e,"bg-teal-200",s[0].isLabel),u&1&&M(e,"padding-left",.25+(s[0].path.length-1)*.5+"rem"),s[0].children&&s[0].expanded?h?(h.p(s,u),u&1&&b(h,1)):(h=Q(s),h.c(),b(h,1),h.m(g.parentNode,g)):h&&(T(),k(h,1,1,()=>{h=null}),q())},i(s){_||(b(n),b(h),_=!0)},o(s){k(n),k(h),_=!1},d(s){s&&v(e),E[t].d(),m&&m.d(),s&&v(d),h&&h.d(s),s&&v(g),S=!1,A()}}}function se(r){r.expanded=!0,r.children&&r.children.forEach(se)}function De(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&se(t),l(0,t)};return r.$$set=f=>{"node"in f&&l(0,t=f.node)},[t,n]}class oe extends te{constructor(e){super(),le(this,e,De,Ce,ne,{node:0})}}function x(r,e,l){const t=r.slice();return t[7]=e[l],t}function ee(r){let e,l;return e=new oe({props:{node:r[7]}}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){K(e,t,n),l=!0},p(t,n){const f={};n&1&&(f.node=t[7]),e.$set(f)},i(t){l||(b(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Re(r){let e,l,t=r[0].children||[],n=[];for(let i=0;i<t.length;i+=1)n[i]=ee(x(r,t,i));const f=i=>k(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=N()},l(i){for(let o=0;o<n.length;o+=1)n[o].l(i);e=N()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);$(i,e,o),l=!0},p(i,[o]){if(o&1){t=i[0].children||[];let a;for(a=0;a<t.length;a+=1){const c=x(i,t,a);n[a]?(n[a].p(c,o),b(n[a],1)):(n[a]=ee(c),n[a].c(),b(n[a],1),n[a].m(e.parentNode,e))}for(T(),a=t.length;a<n.length;a+=1)f(a);q()}},i(i){if(!l){for(let o=0;o<t.length;o+=1)b(n[o]);l=!0}},o(i){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)k(n[o]);l=!1},d(i){_e(n,i),i&&v(e)}}}function ze(r,e,l){let t,n,{row:f}=e,{selectRowsSchema:i=void 0}=e,{highlightedFields:o}=e;const a=be();ge(r,a,d=>l(5,n=d));function c(d){var C;const g=O.field(d),_=O.path(d);let S=O.value(d);if(g.dtype==="string_span"){const s=[];for(let u=_.length-1;u>=0;u--){const w=_.slice(0,u);if(ve(i.schema,w).dtype==="string"){const P=O.value(ke(f,w)),{start:fe,end:ce}=S;s.push(P.slice(fe,ce));break}}S=s}const A=((C=n.data)==null?void 0:C.some(s=>{var u;return s.name===((u=g.signal)==null?void 0:u.signal_name)}))||!1,L=we(g),E=Se(g);let y;A||L&&g.dtype==null||g.dtype==="embedding"||g.repeated_field!=null?y="":S==null?y=null:y=Ee(S);function m(s){const{[$e]:u,[Pe]:w,[Fe]:V,...P}=s;return Object.values(P)}const h=o.some(s=>ye(s.path,_));return{children:Array.isArray(d)?d.map(c):m(d).map(c),fieldName:_[_.length-1],field:g,path:_,expanded:h,isSignal:L,isLabel:E,isPreviewSignal:i!=null?Ve(i,_):!1,isEmbeddingSignal:A,value:S,formattedValue:y}}return r.$$set=d=>{"row"in d&&l(2,f=d.row),"selectRowsSchema"in d&&l(3,i=d.selectRowsSchema),"highlightedFields"in d&&l(4,o=d.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=c(f))},[t,a,f,i,o]}class qe extends te{constructor(e){super(),le(this,e,ze,Re,ne,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{qe as I};
