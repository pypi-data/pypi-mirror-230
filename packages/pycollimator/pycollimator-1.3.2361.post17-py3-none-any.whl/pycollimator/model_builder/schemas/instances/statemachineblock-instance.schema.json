{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://collimator.ai/models/statemachineblock-instance.schema.json",
  "title": "State Machine Block Instance",
  "description": "Representation of a state machine block instance and its parameters",
  "type": "object",
  "properties": {
    "$class_version": {
      "type": "string",
      "default": "latest",
      "description": "Block class version to use",
      "$comment": "Unclear how to handle this, frontend would need to know the version when creating a new block and have a way to upgrade a block as well."
    },
    "uuid": {
      "$ref": "uuid.schema.json"
    },
    "original_uuid": {
      "$ref": "uuid.schema.json"
    },
    "name": {
      "description": "Name of this block",
      "type": "string",
      "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
    },
    "type": {
      "type": "string",
      "description": "Fully classified class of this block, including namespace",
      "default": "core.StateMachine",
      "enum": [
        "core.StateMachine"
      ]
    },
    "inputs": {
      "type": "array",
      "items": {
        "$ref": "port.schema.json"
      }
    },
    "outputs": {
      "type": "array",
      "items": {
        "$ref": "port.schema.json"
      }
    },
    "file_outputs": {
      "type": "array",
      "items": {
        "$ref": "file-output.schema.json"
      }
    },
    "state_machine_diagram_id": {
      "type": "string"
    },
    "parameters": {
      "$ref": "parameters.schema.json"
    },
    "parameter_list": {
      "$ref": "parameter-list.schema.json"
    },
    "time_mode": {
      "type": "string",
      "description": "For (source) blocks where `modes.time` is `any`, selects whether to force discrete output.",
      "enum": [
        "agnostic",
        "discrete"
      ],
      "default": "agnostic"
    },
    "uiprops": {
      "$ref": "node-uiprops.schema.json"
    }
  },
  "required": [
    "type",
    "uuid",
    "name",
    "inputs",
    "outputs",
    "parameters"
  ]
}
