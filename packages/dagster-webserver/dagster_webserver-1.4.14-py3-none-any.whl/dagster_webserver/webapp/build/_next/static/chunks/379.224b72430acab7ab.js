"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{98353:function(e,n,r){r.d(n,{T:function(){return i}});var t=r(73235);function o(){var e=(0,t._)(["\n  height: 100%;\n  overflow-y: auto;\n  padding-bottom: 64px;\n  width: 100%;\n"]);return o=function(){return e},e}var i=r(35505).ZP.div.withConfig({componentId:"sc-2cf5acf-0"})(o())},62540:function(e,n,r){r.d(n,{m:function(){return u}});var t=r(73235),o=r(52322);r(2784);var i=r(35505),s=r(2736),a=r(87323);function c(){var e=(0,t._)(["\n  width: 100%;\n\n  /**\n   * Blueprint breadcrumbs annoyingly have a built-in height.\n   */\n  .bp4-breadcrumbs {\n    height: auto;\n  }\n"]);return c=function(){return e},e}var u=function(e){var n=e.title,r=e.tags,t=e.right,i=e.tabs;return(0,o.jsxs)(l,{background:a.w.Gray50,padding:{top:16,left:24,right:12},border:{side:"bottom",width:1,color:a.w.KeylineGray},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",justifyContent:"space-between"},padding:{bottom:16},children:[(0,o.jsxs)(s.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[n,r]}),t]}),i]})},l=(0,i.ZP)(s.x).withConfig({componentId:"sc-f784651-0"})(c())},81268:function(e,n,r){r.d(n,{$H:function(){return j},Lg:function(){return y},eB:function(){return m}});var t=r(52322),o=r(38379),i=r(4804),s=r(55829),a=r(2736),c=r(29403),u=r(18149),l=r.n(u),d=r(84636),p=r.n(d),f=r(2784),g=r(20270),h=r(61018);function m(e){return f.useMemo(function(){return p()((e||[]).map(j).filter(function(e){return!!e}),function(e){return JSON.stringify(e)}).sort(function(e,n){return e.groupName.localeCompare(n.groupName)})},[e])}var x={groupName:"-",repositoryLocationName:"-",repositoryName:"-"},y=function(e){var n=e.assetGroups,r=e.value,u=e.onChange,d=function(e){return"".concat(e.repositoryName,"@").concat(e.repositoryLocationName)},p=n[0]?d(n[0]):"",f=!n.every(function(e){return p===d(e)});return(0,t.jsx)(o.U5,{selectedItem:r.length?x:null,items:n,menuWidth:300,inputProps:{style:{width:200},placeholder:"Filter asset groupsâ€¦",rightElement:r.length?(0,t.jsx)(g.C,{onClick:function(){return u([])},style:{marginTop:5,marginRight:4},children:(0,t.jsx)(i.JO,{name:"cancel"})}):void 0},inputValueRenderer:function(){return 1===r.length?r[0].groupName:r.length>1?"".concat(r.length," groups"):""},itemPredicate:function(e,n){return 0===e.length||n.groupName.toLowerCase().includes(e.toLowerCase())},itemsEqual:l(),itemRenderer:function(e,n){return(0,t.jsx)(s.sN,{active:n.modifiers.active,onClick:n.handleClick,text:(0,t.jsxs)(a.x,{flex:{direction:"row",gap:6,alignItems:"center"},margin:{left:4},style:{maxWidth:"500px"},children:[(0,t.jsx)(c.X,{checked:r.some(function(n){return l()(n,e)}),size:"small",readOnly:!0}),(0,t.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1,shrink:1},style:{overflow:"hidden"},children:(0,t.jsxs)("div",{style:{overflow:"hidden"},children:[e.groupName,f?(0,t.jsx)("span",{style:{opacity:.5,paddingLeft:4},children:(0,h.At)(e.repositoryName,e.repositoryLocationName)}):void 0]})})]})},JSON.stringify(e))},noResults:(0,t.jsx)(s.sN,{disabled:!0,text:"No asset groups"}),closeOnSelect:!1,resetOnQuery:!1,onItemSelect:function(e){var n=r.filter(function(n){return!l()(e,n)});n.length===r.length&&n.push(e),u(n)}})};function j(e){return e.definition&&e.definition.groupName?{groupName:e.definition.groupName,repositoryName:e.definition.repository.name,repositoryLocationName:e.definition.repository.location.name}:null}},95379:function(e,n,r){r.r(n),r.d(n,{AssetsGroupsGlobalGraphRoot:function(){return b}});var t=r(85333),o=r(6692),i=r(58467),s=r(52322),a=r(98353),c=r(62540),u=r(19369),l=r(18149),d=r.n(l),p=r(2784),f=r(7267),g=r(95318),h=r(34503),m=r(76358),x=r(31271),y=r(38736),j=r(33667),v=r(81268),N=r(50292),C=r(77100),b=function(){var e=(0,f.UO)()[0],n=p.useContext(j.C5),r=n.allRepos,l=n.visibleRepos,b=(0,f.k6)(),w=(0,i._)((0,m.q)({encode:function(e){return{groups:JSON.stringify(e.groups)}},decode:function(e){return{groups:e.groups?JSON.parse(e.groups):[]}}}),2),O=w[0],k=w[1];(0,h.j)("Global Asset Lineage");var L=p.useCallback(function(e,n){b[n]({pathname:(0,C.Cd)(e),search:b.location.search})},[b]),R=p.useCallback(function(e){b.push((0,N.p)(e.assetKey,{view:"definition"}))},[b]),_=p.useMemo(function(){return{hideEdgesToNodesOutsideQuery:!1,hideNodesMatching:function(e){var n;if(!l.some(function(n){return n.repositoryLocation.name===e.repository.location.name&&n.repository.name===e.repository.name}))return!0;if(null===(n=O.groups)||void 0===n?void 0:n.length){var r=(0,v.$H)({definition:e});if(!O.groups.some(function(e){return d()(e,r)}))return!0}return!1}}},[O.groups,l]),J=p.useMemo(function(){return l.flatMap(function(e){return e.repository.assetGroups.map(function(n){return{groupName:n.groupName,repositoryLocationName:e.repositoryLocation.name,repositoryName:e.repository.name}})})},[l]);return(0,s.jsxs)(a.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,s.jsx)(c.m,{title:(0,s.jsx)(u.X6,{children:"Global Asset Lineage"}),right:(0,s.jsx)("div",{style:{marginBottom:-8},children:(0,s.jsx)(y.i,{label:"Reload definitions"})})}),(0,s.jsx)(g.OK,{fetchOptions:_,fetchOptionFilters:(0,s.jsxs)(s.Fragment,{children:[r.length>1&&(0,s.jsx)(x.C,{}),(0,s.jsx)(v.Lg,{assetGroups:J,value:O.groups||[],onChange:function(e){return k((0,o._)((0,t._)({},O),{groups:e}))}})]}),options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,C.Lu)(e),onChangeExplorerPath:L,onNavigateToSourceAssetNode:R})]})};n.default=b},77100:function(e,n,r){r.d(n,{Cd:function(){return c},Lu:function(){return u},TJ:function(){return l}});var t=r(85333),o=r(6692),i=r(28292),s=r(16201),a="__GLOBAL__";function c(e){var n=(0,s.gY)((0,o._)((0,t._)({},e),{pipelineName:a})).replace(a,"");return"/asset-groups".concat(n)}function u(e){return(0,s.p3)(a+e||"/")}function l(e){var n=e.map(function(e){return"".concat((0,i.Je)(e),"*")}).join(", ");return c({opNames:n.length>16e3?[]:[e.map(i.Je).join(",")],opsQuery:n})}},31271:function(e,n,r){r.d(n,{C:function(){return p}});var t=r(58467),o=r(52322),i=r(80572),s=r(2736),a=r(70399),c=r(4804),u=r(2784),l=r(86900),d=r(33667),p=function(){var e=u.useContext(d.C5),n=e.allRepos,r=e.visibleRepos,p=e.toggleVisible,f=(0,t._)(u.useState(!1),2),g=f[0],h=f[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:g,style:{width:"auto"},onClose:function(){return h(!1)},children:[(0,o.jsx)(i.fK,{icon:"repo",label:"Filter code locations"}),(0,o.jsx)(l.e,{options:n,onBrowse:function(){return h(!1)},onToggle:p,selected:r}),(0,o.jsx)(i.cN,{children:(0,o.jsx)(s.x,{padding:{top:8},children:(0,o.jsx)(a.zx,{intent:"none",onClick:function(){return h(!1)},children:"Done"})})})]}),(0,o.jsx)(a.zx,{intent:"none",icon:(0,o.jsx)(c.JO,{name:"folder"}),rightIcon:(0,o.jsx)(c.JO,{name:"expand_more"}),onClick:function(){return h(!0)},children:"".concat(r.length," of ").concat(n.length)})]})}},38736:function(e,n,r){r.d(n,{i:function(){return g}});var t=r(58467),o=r(52322),i=r(42971),s=r(70399),a=r(4804),c=r(80572),u=r(2784),l=r(90951),d=r(14590),p=r(63013),f=r(48908),g=function(e){var n=e.label,r=void 0===n?"Reload all":n,g=(0,l.WB)(),h=g.permissions.canReloadWorkspace,m=g.disabledReasons,x=(0,p.Dc)({scope:"workspace",reloadFn:p.rL}),y=x.reloading,j=x.tryReload,v=x.error,N=x.errorLocationId,C=(0,t._)(u.useState(!!v),2),b=C[0],w=C[1];return(u.useEffect(function(){return w(!!v)},[v]),h)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.zx,{onClick:j,icon:(0,o.jsx)(a.JO,{name:"refresh"}),loading:y,intent:"none",children:r}),N?(0,o.jsx)(f.V,{error:v,location:N,reloading:y,onTryReload:j,onDismiss:function(){return w(!1)},isOpen:b}):(0,o.jsxs)(c.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:b,children:[(0,o.jsx)(c.a7,{children:v&&(0,o.jsx)(d.T9,{error:v})}),(0,o.jsx)(c.cN,{children:(0,o.jsx)(s.zx,{onClick:function(){return w(!1)},children:"Dismiss"})})]})]}):(0,o.jsx)(i.u,{content:m.canReloadWorkspace,children:(0,o.jsx)(s.zx,{icon:(0,o.jsx)(a.JO,{name:"refresh"}),disabled:!0,intent:"none",children:r})})}}}]);
//# sourceMappingURL=379.224b72430acab7ab.js.map