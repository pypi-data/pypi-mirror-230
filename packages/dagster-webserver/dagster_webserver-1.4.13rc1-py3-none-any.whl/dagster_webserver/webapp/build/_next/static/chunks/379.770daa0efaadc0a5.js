"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{81268:function(e,n,o){o.d(n,{$H:function(){return j},Lg:function(){return y},eB:function(){return h}});var r=o(52322),t=o(38379),i=o(4804),s=o(55829),a=o(2736),c=o(29403),l=o(18149),u=o.n(l),d=o(84636),p=o.n(d),f=o(2784),g=o(20270),m=o(61018);function h(e){return f.useMemo(function(){return p()((e||[]).map(j).filter(function(e){return!!e}),function(e){return JSON.stringify(e)}).sort(function(e,n){return e.groupName.localeCompare(n.groupName)})},[e])}var x={groupName:"-",repositoryLocationName:"-",repositoryName:"-"},y=function(e){var n=e.assetGroups,o=e.value,l=e.onChange,d=function(e){return"".concat(e.repositoryName,"@").concat(e.repositoryLocationName)},p=n[0]?d(n[0]):"",f=!n.every(function(e){return p===d(e)});return(0,r.jsx)(t.U5,{selectedItem:o.length?x:null,items:n,menuWidth:300,inputProps:{style:{width:200},placeholder:"Filter asset groupsâ€¦",rightElement:o.length?(0,r.jsx)(g.C,{onClick:function(){return l([])},style:{marginTop:5,marginRight:4},children:(0,r.jsx)(i.JO,{name:"cancel"})}):void 0},inputValueRenderer:function(){return 1===o.length?o[0].groupName:o.length>1?"".concat(o.length," groups"):""},itemPredicate:function(e,n){return 0===e.length||n.groupName.toLowerCase().includes(e.toLowerCase())},itemsEqual:u(),itemRenderer:function(e,n){return(0,r.jsx)(s.sN,{active:n.modifiers.active,onClick:n.handleClick,text:(0,r.jsxs)(a.x,{flex:{direction:"row",gap:6,alignItems:"center"},margin:{left:4},style:{maxWidth:"500px"},children:[(0,r.jsx)(c.X,{checked:o.some(function(n){return u()(n,e)}),size:"small",readOnly:!0}),(0,r.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1,shrink:1},style:{overflow:"hidden"},children:(0,r.jsxs)("div",{style:{overflow:"hidden"},children:[e.groupName,f?(0,r.jsx)("span",{style:{opacity:.5,paddingLeft:4},children:(0,m.At)(e.repositoryName,e.repositoryLocationName)}):void 0]})})]})},JSON.stringify(e))},noResults:(0,r.jsx)(s.sN,{disabled:!0,text:"No asset groups"}),closeOnSelect:!1,resetOnQuery:!1,onItemSelect:function(e){var n=o.filter(function(n){return!u()(e,n)});n.length===o.length&&n.push(e),l(n)}})};function j(e){return e.definition&&e.definition.groupName?{groupName:e.definition.groupName,repositoryName:e.definition.repository.name,repositoryLocationName:e.definition.repository.location.name}:null}},95379:function(e,n,o){o.r(n),o.d(n,{AssetsGroupsGlobalGraphRoot:function(){return k}});var r=o(85333),t=o(6692),i=o(58467),s=o(52322),a=o(98353),c=o(62540),l=o(19369),u=o(18149),d=o.n(u),p=o(2784),f=o(7267),g=o(95318),m=o(34503),h=o(76358),x=o(31271),y=o(16201),j=o(38736),N=o(33667),v=o(81268),C=o(50292),O="__GLOBAL__",k=function(){var e=(0,f.UO)()[0],n=p.useContext(N.C5),o=n.allRepos,u=n.visibleRepos,k=(0,f.k6)(),L=(0,i._)((0,h.q)({encode:function(e){return{groups:JSON.stringify(e.groups)}},decode:function(e){return{groups:e.groups?JSON.parse(e.groups):[]}}}),2),R=L[0],b=L[1];(0,m.j)("Global Asset Lineage");var _=p.useCallback(function(e,n){var o=(0,y.gY)((0,t._)((0,r._)({},e),{pipelineName:O})).replace(O,"");k[n]({pathname:"/asset-groups".concat(o),search:k.location.search})},[k]),w=p.useCallback(function(e){k.push((0,C.p)(e.assetKey,{view:"definition"}))},[k]),E=p.useMemo(function(){return{hideEdgesToNodesOutsideQuery:!1,hideNodesMatching:function(e){var n;if(!u.some(function(n){return n.repositoryLocation.name===e.repository.location.name&&n.repository.name===e.repository.name}))return!0;if(null===(n=R.groups)||void 0===n?void 0:n.length){var o=(0,v.$H)({definition:e});if(!R.groups.some(function(e){return d()(e,o)}))return!0}return!1}}},[R.groups,u]),G=p.useMemo(function(){return u.flatMap(function(e){return e.repository.assetGroups.map(function(n){return{groupName:n.groupName,repositoryLocationName:e.repositoryLocation.name,repositoryName:e.repository.name}})})},[u]);return(0,s.jsxs)(a.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,s.jsx)(c.m,{title:(0,s.jsx)(l.X6,{children:"Global Asset Lineage"}),right:(0,s.jsx)("div",{style:{marginBottom:-8},children:(0,s.jsx)(j.i,{label:"Reload definitions"})})}),(0,s.jsx)(g.OK,{fetchOptions:E,fetchOptionFilters:(0,s.jsxs)(s.Fragment,{children:[o.length>1&&(0,s.jsx)(x.C,{}),(0,s.jsx)(v.Lg,{assetGroups:G,value:R.groups||[],onChange:function(e){return b((0,t._)((0,r._)({},R),{groups:e}))}})]}),options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,y.p3)(O+e||"/"),onChangeExplorerPath:_,onNavigateToSourceAssetNode:w})]})};n.default=k},31271:function(e,n,o){o.d(n,{C:function(){return p}});var r=o(58467),t=o(52322),i=o(80572),s=o(2736),a=o(70399),c=o(4804),l=o(2784),u=o(86900),d=o(33667),p=function(){var e=l.useContext(d.C5),n=e.allRepos,o=e.visibleRepos,p=e.toggleVisible,f=(0,r._)(l.useState(!1),2),g=f[0],m=f[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:g,style:{width:"auto"},onClose:function(){return m(!1)},children:[(0,t.jsx)(i.fK,{icon:"repo",label:"Filter code locations"}),(0,t.jsx)(u.e,{options:n,onBrowse:function(){return m(!1)},onToggle:p,selected:o}),(0,t.jsx)(i.cN,{children:(0,t.jsx)(s.x,{padding:{top:8},children:(0,t.jsx)(a.zx,{intent:"none",onClick:function(){return m(!1)},children:"Done"})})})]}),(0,t.jsx)(a.zx,{intent:"none",icon:(0,t.jsx)(c.JO,{name:"folder"}),rightIcon:(0,t.jsx)(c.JO,{name:"expand_more"}),onClick:function(){return m(!0)},children:"".concat(o.length," of ").concat(n.length)})]})}},38736:function(e,n,o){o.d(n,{i:function(){return g}});var r=o(58467),t=o(52322),i=o(42971),s=o(70399),a=o(4804),c=o(80572),l=o(2784),u=o(90951),d=o(14590),p=o(63013),f=o(48908),g=function(e){var n=e.label,o=void 0===n?"Reload all":n,g=(0,u.WB)(),m=g.permissions.canReloadWorkspace,h=g.disabledReasons,x=(0,p.Dc)({scope:"workspace",reloadFn:p.rL}),y=x.reloading,j=x.tryReload,N=x.error,v=x.errorLocationId,C=(0,r._)(l.useState(!!N),2),O=C[0],k=C[1];return(l.useEffect(function(){return k(!!N)},[N]),m)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.zx,{onClick:j,icon:(0,t.jsx)(a.JO,{name:"refresh"}),loading:y,intent:"none",children:o}),v?(0,t.jsx)(f.V,{error:N,location:v,reloading:y,onTryReload:j,onDismiss:function(){return k(!1)},isOpen:O}):(0,t.jsxs)(c.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:O,children:[(0,t.jsx)(c.a7,{children:N&&(0,t.jsx)(d.T9,{error:N})}),(0,t.jsx)(c.cN,{children:(0,t.jsx)(s.zx,{onClick:function(){return k(!1)},children:"Dismiss"})})]})]}):(0,t.jsx)(i.u,{content:h.canReloadWorkspace,children:(0,t.jsx)(s.zx,{icon:(0,t.jsx)(a.JO,{name:"refresh"}),disabled:!0,intent:"none",children:o})})}}}]);
//# sourceMappingURL=379.770daa0efaadc0a5.js.map