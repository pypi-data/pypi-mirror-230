"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{58253:function(n,e,r){r.r(e),r.d(e,{CodeLocationsPage:function(){return nd},default:function(){return nx}});var t=r(52322),o=r(62540),i=r(19369),s=r(2736),a=r(2784),c=r(48608),l=r(34503),d=r(38736),x=r(91588),u=r(45),h=r(34706),j=r(81862),p=r(58467),f=r(73235),m=r(82550),g=r(22970),y=r(87323),v=r(88528),b=r(70399),w=r(42971),C=r(42033),O=r(47625),_=r(4804),k=r(47933),E=r(35505),L=r(67953),z=r(99339),V=r(18154),N=r(63013),I=r(95910),R=r(87612),D=r(85333),S=r(6692),U=r(55829),F=r(17577),P=r(80572),T=r(88153),W=r(29316),M=function(n){var e,r=n.locationNode,o=(0,p._)(a.useState(!1),2),i=o[0],s=o[1],c=(0,p._)(a.useState(!1),2),l=c[0],d=c[1],x=null,u=null;return(null===(e=r.locationOrLoadError)||void 0===e?void 0:e.__typename)==="RepositoryLocation"&&null!==r.locationOrLoadError.dagsterLibraryVersions&&(x=(0,t.jsx)(U.sN,{icon:"info",text:"View Dagster libraries",onClick:function(){return d(!0)}}),u=(0,t.jsx)(J,{libraries:r.locationOrLoadError.dagsterLibraryVersions,isOpen:l,setIsOpen:d})),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.J,{position:"bottom-left",content:(0,t.jsxs)(U.v2,{children:[(0,t.jsx)(U.sN,{icon:"info",text:"View configuration",onClick:function(){return s(!0)}}),x]}),children:(0,t.jsx)(b.zx,{icon:(0,t.jsx)(_.JO,{name:"expand_more"})})}),(0,t.jsx)(G,{metadata:r.displayMetadata,isOpen:i,setIsOpen:s}),u]})},G=function(n){var e=n.isOpen,r=n.setIsOpen,o=n.metadata;return(0,t.jsxs)(P.Vq,{title:"Code location configuration",icon:"info",isOpen:e,onClose:function(){return r(!1)},style:{width:"600px"},children:[(0,t.jsx)($,{displayMetadata:o}),(0,t.jsx)(P.cN,{topBorder:!0,children:(0,t.jsx)(b.zx,{onClick:function(){return r(!1)},intent:"primary",children:"Done"})})]})},J=function(n){var e=n.isOpen,r=n.setIsOpen,o=n.libraries;return(0,t.jsxs)(P.Vq,{title:"Dagster library versions",icon:"info",isOpen:e,onClose:function(){return r(!1)},style:{width:"600px"},children:[(0,t.jsxs)(h.i,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Libray"}),(0,t.jsx)("th",{children:"Version"})]})}),(0,t.jsx)("tbody",{children:o.map(function(n){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:n.name}),(0,t.jsx)("td",{children:n.version})]},n.name)})})]}),(0,t.jsx)(P.cN,{topBorder:!0,children:(0,t.jsx)(b.zx,{onClick:function(){return r(!1)},intent:"primary",children:"Done"})})]})},$=function(n){var e=n.displayMetadata,r=a.useMemo(function(){var n=e.reduce(function(n,e){return(0,S._)((0,D._)({},n),(0,R._)({},e.key,e.value))},{});return W.Pz(n)},[e]);return(0,t.jsx)(T.u,{value:r,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})},B=r(28292),A=r(41060);function Z(){var n=(0,f._)(["\n  :hover,\n  :active {\n    outline: none;\n    text-decoration: none;\n  }\n"]);return Z=function(){return n},n}var q=function(n){var e=n.repo,r=n.repoAddress,o=e.assetGroups.length,i=e.pipelines.filter(function(n){var e=n.name;return!(0,B.pv)(e)}).length,a=e.schedules.length,c=e.sensors.length;return(0,t.jsxs)(s.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,t.jsx)(w.u,{content:1===o?"1 asset group":"".concat(o," asset groups"),placement:"top",children:(0,t.jsx)(H,{to:(0,A.$U)(r,"/assets"),children:(0,t.jsx)(C.V,{interactive:!0,icon:"asset_group",children:o})})}),(0,t.jsx)(w.u,{content:1===i?"1 job":"".concat(i," jobs"),placement:"top",children:(0,t.jsx)(H,{to:(0,A.$U)(r,"/jobs"),children:(0,t.jsx)(C.V,{interactive:!0,icon:"job",children:i})})}),(0,t.jsx)(w.u,{content:1===a?"1 schedule":"".concat(a," schedules"),placement:"top",children:(0,t.jsx)(H,{to:(0,A.$U)(r,"/schedules"),children:(0,t.jsx)(C.V,{interactive:!0,icon:"schedule",children:a})})}),(0,t.jsx)(w.u,{content:1===c?"1 sensor":"".concat(c," sensors"),placement:"top",children:(0,t.jsx)(H,{to:(0,A.$U)(r,"/sensors"),children:(0,t.jsx)(C.V,{interactive:!0,icon:"sensors",children:c})})})]})},H=(0,E.ZP)(k.rU).withConfig({componentId:"sc-44c0a391-0"})(Z()),K=r(48908),Q=r(61018),X=r(19618);function Y(){var n=(0,f._)(["\n  width: 100%;\n  color: ",";\n  font-size: 12px;\n\n  .bp4-popover2-target {\n    overflow: hidden;\n  }\n\n  button {\n    background: transparent;\n    border: none;\n    color: ",";\n    cursor: pointer;\n    font-size: 12px;\n    overflow: hidden;\n    padding: 0;\n    margin: 0;\n    width: 100%;\n\n    :focus {\n      outline: none;\n    }\n  }\n"]);return Y=function(){return n},n}var nn=function(n){var e=n.locationNode,r=e.name,o=e.locationOrLoadError;if(!o||(null==o?void 0:o.__typename)==="PythonError")return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{maxWidth:"400px",color:y.w.Gray500},children:(0,t.jsx)(v.g,{text:r})}),(0,t.jsx)("td",{children:(0,t.jsx)(no,{location:r,locationOrError:e})}),(0,t.jsx)("td",{style:{whiteSpace:"nowrap"},children:(0,t.jsx)(I.C,{unixTimestamp:e.updatedTimestamp})}),(0,t.jsx)("td",{children:"â€“"}),(0,t.jsx)("td",{style:{width:"180px"},children:(0,t.jsxs)(b.zH,{children:[(0,t.jsx)(ni,{location:r}),(0,t.jsx)(M,{locationNode:e})]})})]});var i=(0,m._)(o.repositories).sort(function(n,e){return n.name.localeCompare(e.name)});return(0,t.jsx)(t.Fragment,{children:i.map(function(n){var o=(0,Q.kQ)(n.name,r),i=(0,m._)(e.displayMetadata).concat((0,m._)(n.displayMetadata));return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{maxWidth:"400px"},children:(0,t.jsxs)(s.x,{flex:{direction:"column",gap:4},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:(0,t.jsx)(k.rU,{to:(0,A.$U)(o),children:(0,t.jsx)(v.g,{text:(0,X.Uz)(o)})})}),(0,t.jsx)(ne,{metadata:i}),(0,t.jsx)(nt,{metadata:i})]})}),(0,t.jsx)("td",{children:(0,t.jsx)(no,{location:n.name,locationOrError:e})}),(0,t.jsx)("td",{style:{whiteSpace:"nowrap"},children:(0,t.jsx)(I.C,{unixTimestamp:e.updatedTimestamp})}),(0,t.jsx)("td",{children:(0,t.jsx)(q,{repo:n,repoAddress:o})}),(0,t.jsx)("td",{style:{width:"180px"},children:(0,t.jsxs)(b.zH,{children:[(0,t.jsx)(ni,{location:r}),(0,t.jsx)(M,{locationNode:e})]})})]},(0,X.Uz)(o))})})},ne=function(n){var e=n.metadata,r=(0,z.m)(),o=e.find(function(n){return"image"===n.key}),i=(null==o?void 0:o.value)||"",s=a.useCallback((0,j._)(function(){return(0,g.Jh)(this,function(n){switch(n.label){case 0:return r(i),[4,(0,L.B7)({intent:"success",icon:"done",message:"Image string copied!"})];case 1:return n.sent(),[2]}})}),[r,i]);return o?(0,t.jsxs)(nr,{flex:{direction:"row",gap:4},children:[(0,t.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,t.jsx)(w.u,{content:"Click to copy",placement:"top",display:"block",children:(0,t.jsx)("button",{onClick:s,children:(0,t.jsx)(v.g,{text:o.value})})})]}):null},nr=(0,E.ZP)(s.x).withConfig({componentId:"sc-baa8191-0"})(Y(),y.w.Gray700,y.w.Gray700),nt=function(n){var e=n.metadata.find(function(n){var e=n.key;return"module_name"===e||"package_name"===e||"python_file"===e});return e?(0,t.jsxs)(s.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:y.w.Gray700,fontSize:12},children:[(0,t.jsxs)("span",{style:{fontWeight:500},children:[e.key,":"]}),(0,t.jsx)(v.g,{text:e.value})]}):null},no=function(n){var e,r=n.location,o=n.locationOrError,i=(0,p._)(a.useState(!1),2),c=i[0],l=i[1],d=a.useMemo(function(){return(0,N.je)(r)},[r]),x=(0,N.Dc)({scope:"location",reloadFn:d}),u=x.reloading,h=x.tryReload;return"LOADING"===o.loadStatus?o.locationOrLoadError?(0,t.jsx)(C.V,{minimal:!0,intent:"primary",children:"Updating..."}):(0,t.jsx)(C.V,{minimal:!0,intent:"primary",children:"Loading..."}):(null===(e=o.locationOrLoadError)||void 0===e?void 0:e.__typename)==="PythonError"?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.x,{flex:{alignItems:"center",gap:12},children:[(0,t.jsx)(C.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,t.jsx)(O.Z,{onClick:function(){return l(!0)},children:(0,t.jsx)("span",{style:{fontSize:"14px"},children:"View error"})})]}),(0,t.jsx)(K.p,{location:r,isOpen:c,error:o.locationOrLoadError,reloading:u,onDismiss:function(){return l(!1)},onTryReload:function(){return h()}})]}):(0,t.jsx)(C.V,{minimal:!0,intent:"success",children:"Loaded"})},ni=function(n){var e=n.location;return(0,t.jsx)(V.s,{location:e,ChildComponent:function(n){var e=n.reloading,r=n.tryReload,o=n.hasReloadPermission;return(0,t.jsx)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,t.jsx)(w.u,{content:o?"":V.H,canShow:!o,useDisabledButtonTooltipFix:!0,children:(0,t.jsx)(b.zx,{icon:(0,t.jsx)(_.JO,{name:"refresh"}),disabled:!o,loading:e,onClick:function(){return r()},children:"Reload"})})})}})},ns=r(33667),na=function(){var n=a.useContext(ns.C5),e=n.locationEntries;return n.loading&&!e.length?(0,t.jsxs)(s.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,t.jsx)(x.$,{purpose:"body-text"}),(0,t.jsx)("div",{children:"Loading..."})]}):e.length?(0,t.jsxs)(h.i,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Updated"}),(0,t.jsx)("th",{children:"Definitions"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(function(n){return(0,t.jsx)(nn,{locationNode:n},n.name)})})]}):(0,t.jsx)(s.x,{padding:{vertical:32},children:(0,t.jsx)(u.t,{icon:"folder",title:"No code locations",description:"When you add a code location, your definitions will appear here."})})},nc=r(46806),nl=r(49719),nd=function(){(0,c.Px)(),(0,l.j)("Code locations");var n=a.useContext(nc.N).pageTitle,e=a.useContext(ns.C5),r=e.locationEntries,x=e.loading,u=a.useMemo(function(){var n=0;return r.forEach(function(e){var r;e.locationOrLoadError&&(null===(r=e.locationOrLoadError)||void 0===r?void 0:r.__typename)!=="PythonError"?n+=e.locationOrLoadError.repositories.length:n+=1}),n},[r]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.m,{title:(0,t.jsx)(i.X6,{children:n}),tabs:(0,t.jsx)(nl.Z,{tab:"locations"})}),(0,t.jsxs)(s.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[(0,t.jsx)(i.pm,{id:"repository-locations",children:x||!u?"Code locations":1===u?"1 code location":"".concat(u," code locations")}),(0,t.jsx)(d.i,{})]}),(0,t.jsx)(na,{})]})},nx=nd},38736:function(n,e,r){r.d(e,{i:function(){return j}});var t=r(58467),o=r(52322),i=r(42971),s=r(70399),a=r(4804),c=r(80572),l=r(2784),d=r(90951),x=r(14590),u=r(63013),h=r(48908),j=function(n){var e=n.label,r=void 0===e?"Reload all":e,j=(0,d.WB)(),p=j.permissions.canReloadWorkspace,f=j.disabledReasons,m=(0,u.Dc)({scope:"workspace",reloadFn:u.rL}),g=m.reloading,y=m.tryReload,v=m.error,b=m.errorLocationId,w=(0,t._)(l.useState(!!v),2),C=w[0],O=w[1];return(l.useEffect(function(){return O(!!v)},[v]),p)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.zx,{onClick:y,icon:(0,o.jsx)(a.JO,{name:"refresh"}),loading:g,intent:"none",children:r}),b?(0,o.jsx)(h.V,{error:v,location:b,reloading:g,onTryReload:y,onDismiss:function(){return O(!1)},isOpen:C}):(0,o.jsxs)(c.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:C,children:[(0,o.jsx)(c.a7,{children:v&&(0,o.jsx)(x.T9,{error:v})}),(0,o.jsx)(c.cN,{children:(0,o.jsx)(s.zx,{onClick:function(){return O(!1)},children:"Dismiss"})})]})]}):(0,o.jsx)(i.u,{content:f.canReloadWorkspace,children:(0,o.jsx)(s.zx,{icon:(0,o.jsx)(a.JO,{name:"refresh"}),disabled:!0,intent:"none",children:r})})}}}]);
//# sourceMappingURL=253.5fc1fb8d9f9fb308.js.map