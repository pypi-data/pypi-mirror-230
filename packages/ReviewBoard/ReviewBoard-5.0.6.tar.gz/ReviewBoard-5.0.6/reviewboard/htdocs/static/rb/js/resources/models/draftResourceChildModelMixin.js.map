{"version":3,"file":"draftResourceChildModelMixin.js","names":["RB","DraftResourceChildModelMixin","destroy","options","arguments","length","undefined","context","_","isFunction","success","error","complete","console","warn","promiseToCallbacks","newOptions","get","ensureCreated","_super","call","ready"],"sources":["../../../../../../static/rb/js/resources/models/draftResourceChildModelMixin.es6.js"],"sourcesContent":["/**\n * Mixin for resources that are children of a draft resource.\n *\n * This will ensure that the draft is in a proper state before operating\n * on the resource.\n */\nRB.DraftResourceChildModelMixin = {\n    /**\n     * Delete the object's resource on the server.\n     *\n     * This will ensure the draft is created before deleting the object,\n     * in order to record the deletion as part of the draft.\n     *\n     * Args:\n     *     options (object, optional):\n     *         Options for the operation, including callbacks.\n     *\n     *     context (object, optional):\n     *         Context to bind when calling callbacks.\n     *\n     * Returns:\n     *     Promise:\n     *     A promise which resolves when the operation is complete.\n     */\n    async destroy(options={}, context=undefined) {\n        if (_.isFunction(options.success) ||\n            _.isFunction(options.error) ||\n            _.isFunction(options.complete)) {\n            console.warn('RB.DraftResourceChildModelMixin.destroy was ' +\n                         'called using callbacks. Callers should be updated ' +\n                         'to use promises instead.');\n            return RB.promiseToCallbacks(\n                options, context, newOptions => this.destroy(newOptions));\n        }\n\n        await this.get('parentObject').ensureCreated();\n        await _super(this).destroy.call(this, options);\n    },\n\n    /**\n     * Call a function when the object is ready to use.\n     *\n     * This will ensure the draft is created before ensuring the object\n     * is ready.\n     *\n     * Version Changed:\n     *     5.0:\n     *     Deprecated callbacks and changed to return a promise.\n     *\n     * Args:\n     *     options (object, optional):\n     *         Options for the operation, including callbacks.\n     *\n     *     context (object, optional):\n     *         Context to bind when calling callbacks.\n     *\n     * Returns:\n     *     Promise:\n     *     A promise which resolves when the operation is complete.\n     */\n    async ready(options={}, context=undefined) {\n        if (_.isFunction(options.success) ||\n            _.isFunction(options.error) ||\n            _.isFunction(options.complete) ||\n            _.isFunction(options.ready)) {\n            console.warn('RB.DraftResourceChildModelMixin.ready was ' +\n                         'called using callbacks. Callers should be updated ' +\n                         'to use promises instead.');\n            return RB.promiseToCallbacks(\n                options, context, newOptions => this.ready());\n        }\n\n        await this.get('parentObject').ensureCreated();\n        await _super(this).ready.call(this);\n    },\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,4BAA4B,GAAG;EAC9B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,MAAMC,OAAOA,CAAA,EAAgC;IAAA,IAA/BC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC,CAAC;IAAA,IAAEG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACE,SAAS;IACvC,IAAIE,CAAC,CAACC,UAAU,CAACN,OAAO,CAACO,OAAO,CAAC,IAC7BF,CAAC,CAACC,UAAU,CAACN,OAAO,CAACQ,KAAK,CAAC,IAC3BH,CAAC,CAACC,UAAU,CAACN,OAAO,CAACS,QAAQ,CAAC,EAAE;MAChCC,OAAO,CAACC,IAAI,CAAC,8CAA8C,GAC9C,oDAAoD,GACpD,0BAA0B,CAAC;MACxC,OAAOd,EAAE,CAACe,kBAAkB,CACxBZ,OAAO,EAAEI,OAAO,EAAES,UAAU,IAAI,IAAI,CAACd,OAAO,CAACc,UAAU,CAAC,CAAC;IACjE;IAEA,MAAM,IAAI,CAACC,GAAG,CAAC,cAAc,CAAC,CAACC,aAAa,CAAC,CAAC;IAC9C,MAAMC,MAAM,CAAC,IAAI,CAAC,CAACjB,OAAO,CAACkB,IAAI,CAAC,IAAI,EAAEjB,OAAO,CAAC;EAClD,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,MAAMkB,KAAKA,CAAA,EAAgC;IAAA,IAA/BlB,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC,CAAC;IAAA,IAAEG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACE,SAAS;IACrC,IAAIE,CAAC,CAACC,UAAU,CAACN,OAAO,CAACO,OAAO,CAAC,IAC7BF,CAAC,CAACC,UAAU,CAACN,OAAO,CAACQ,KAAK,CAAC,IAC3BH,CAAC,CAACC,UAAU,CAACN,OAAO,CAACS,QAAQ,CAAC,IAC9BJ,CAAC,CAACC,UAAU,CAACN,OAAO,CAACkB,KAAK,CAAC,EAAE;MAC7BR,OAAO,CAACC,IAAI,CAAC,4CAA4C,GAC5C,oDAAoD,GACpD,0BAA0B,CAAC;MACxC,OAAOd,EAAE,CAACe,kBAAkB,CACxBZ,OAAO,EAAEI,OAAO,EAAES,UAAU,IAAI,IAAI,CAACK,KAAK,CAAC,CAAC,CAAC;IACrD;IAEA,MAAM,IAAI,CAACJ,GAAG,CAAC,cAAc,CAAC,CAACC,aAAa,CAAC,CAAC;IAC9C,MAAMC,MAAM,CAAC,IAAI,CAAC,CAACE,KAAK,CAACD,IAAI,CAAC,IAAI,CAAC;EACvC;AACJ,CAAC"}